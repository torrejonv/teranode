<svg contentStyleType="text/css" height="904" preserveAspectRatio="none" viewBox="0 0 666 904" width="666" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m0 0h666v904h-666z" fill="#f0f8ff"/><path d="m228.7651 112.7988h10v545.8789h-10z" fill="#fff" stroke="#181818"/><path d="m168.002 212.4199h491.3618v326.0156h-491.3618z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m178.002 339.6172h471.3618v191.8184h-471.3618z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m168.002 552.4355h380.6226v77.9316h-380.6226z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m178.002 576.7461h360.6226v46.6211h-360.6226z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke="#181818"><path d="m27 81.4883v727.0527" stroke-dasharray="5 5" stroke-width=".5"/><path d="m233.002 81.4883v727.0527" stroke-dasharray="5 5" stroke-width=".5"/><path d="m490.8599 81.4883v727.0527" stroke-dasharray="5 5" stroke-width=".5"/><path d="m588.6245 81.4883v727.0527" stroke-dasharray="5 5" stroke-width=".5"/></g><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5049" x="5" y="78.5352">Client</text><ellipse cx="27.7524" cy="13.5" fill="#e2e2f0" rx="8" ry="8" stroke="#181818" stroke-width=".5"/><path d="m27.7524 21.5v27m-13-19h26m-13 19-13 15m13-15 13 15" fill="none" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.5049" x="5" y="821.0762">Client</text><ellipse cx="27.7524" cy="832.5293" fill="#e2e2f0" rx="8" ry="8" stroke="#181818" stroke-width=".5"/><path d="m27.7524 840.5293v27m-13-19h26m-13 19-13 15m13-15 13 15" fill="none" stroke="#181818" stroke-width=".5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="91.5264" x="188.002" y="50"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="195.002" y="70.5352">UTXO Store</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="91.5264" x="188.002" y="807.541"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="195.002" y="828.0762">UTXO Store</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.7646" x="454.8599" y="78.5352">Aerospike</text><path d="m473.7422 29c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m473.7422 29c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="67.7646" x="454.8599" y="821.0762">Aerospike</text><path d="m473.7422 834.0293c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m473.7422 834.0293c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.7393" x="538.6245" y="78.5352">External Store</text><path d="m570.9941 29c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m570.9941 29c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="94.7393" x="538.6245" y="821.0762">External Store</text><path d="m570.9941 834.0293c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m570.9941 834.0293c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><path d="m228.7651 112.7988h10v545.8789h-10z" fill="#fff" stroke="#181818"/><path d="m216.7651 108.7988 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m27.7524 112.7988h195.0127" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.0127" x="34.7524" y="108.0566">Create(tx, blockHeight, opts)</text><path d="m238.7651 142.1094h42" stroke="#666"/><path d="m280.7651 142.1094v13" stroke="#666"/><path d="m239.7651 155.1094h41" stroke="#666"/><path d="m249.7651 151.1094-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.1323" x="245.7651" y="137.3672">Prepare batchStoreItem</text><path d="m238.7651 184.4199h42" stroke="#666"/><path d="m280.7651 184.4199v13" stroke="#666"/><path d="m239.7651 197.4199h41" stroke="#666"/><path d="m249.7651 193.4199-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="96.7764" x="245.7651" y="179.6777">sendStoreBatch</text><path d="m168.002 212.4199h62.1386v7.3106l-10 10h-52.1386z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m168.002 212.4199h491.3618v326.0156h-491.3618z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="183.002" y="225.9883">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="199.5469" x="245.1406" y="225.0547">[externalizeAllTransactions is true]</text><path d="m576.9941 247.041 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m238.7651 251.041h344.229" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.3521" x="245.7651" y="246.2988">Store full tx data</text><path d="m479.7422 276.3516 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m238.7651 280.3516h246.9771" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169.0952" x="245.7651" y="275.6094">Store metadata and UTXOs</text><path d="m168.002 289.3516h491.3618" stroke="#000" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="203.688" x="173.002" y="299.9863">[externalizeAllTransactions is false]</text><path d="m479.7422 320.6172 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m238.7651 324.6172h246.9771" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="160.2212" x="245.7651" y="319.875">Attempt to store full data</text><path d="m178.002 339.6172h62.1386v7.3105l-10 10h-52.1386z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m178.002 339.6172h471.3618v191.8184h-471.3618z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="193.002" y="353.1855">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="143.1289" x="255.1406" y="352.252">[RECORD_TOO_BIG error]</text><path d="m249.7651 374.2383-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m243.7651 378.2383h246.9771" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="114.353" x="255.7651" y="373.4961">RECORD_TOO_BIG</text><path d="m238.7651 407.5488h42" stroke="#666"/><path d="m280.7651 407.5488v13" stroke="#666"/><path d="m239.7651 420.5488h41" stroke="#666"/><path d="m249.7651 416.5488-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="223.9771" x="245.7651" y="402.8066">Recalculate bins with external=true</text><path d="m576.9941 445.8594 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m238.7651 449.8594h344.229" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.3521" x="245.7651" y="445.1172">Store full tx data</text><path d="m479.7422 475.1699 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m238.7651 479.1699h246.9771" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="169.0952" x="245.7651" y="474.4277">Store metadata and UTXOs</text><path d="m178.002 488.1699h471.3618" stroke="#000" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="52.2554" x="183.002" y="498.8047">[Success]</text><path d="m249.7651 519.4355-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m243.7651 523.4355h246.9771" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.8833" x="255.7651" y="518.6934">Success</text><path d="m168.002 552.4355h62.1386v7.3106l-10 10h-52.1386z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m168.002 552.4355h380.6226v77.9316h-380.6226z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="183.002" y="566.0039">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="145.5083" x="245.1406" y="565.0703">[Multiple records needed]</text><path d="m178.002 576.7461h74.4467v7.3105l-10 10h-64.4467z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m178.002 576.7461h360.6226v46.6211h-360.6226z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="193.002" y="590.3145">loop</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="96.3521" x="267.4487" y="589.3809">[For each record]</text><path d="m479.7422 611.3672 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m238.7651 615.3672h246.9771" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.4619" x="245.7651" y="610.625">Store part of data</text><path d="m38.7524 654.6777-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m32.7524 658.6777h200.0127" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.7705" x="44.7524" y="653.9355">Return result</text><path d="m194 671.6777v71h335v-61l-10-10z" fill="#feffdd" stroke="#181818" stroke-width=".5"/><path d="m519 671.6777v10h10z" fill="#feffdd" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.3335" x="234.5793" y="689.2461">Aerospike records include:</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="180.5146" x="234.5793" y="704.5566">- external flag (if applicable)</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="70.459" x="234.5793" y="719.8672">- metadata</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="245.4639" x="234.5793" y="735.1777">- UTXOs (possibly split across records)</text><path d="m188 752.9199v40h446v-30l-10-10z" fill="#feffdd" stroke="#181818" stroke-width=".5"/><path d="m624 752.9199v10h10z" fill="#feffdd" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="149.0303" x="332.1658" y="770.4883">External store contains:</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.7495" x="332.1658" y="785.7988">Full transaction data</text><text fill="#333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155.4346" y="894.6973">Last Modified On: 24-Feb-2025</text></svg>
