@startuml
skinparam backgroundColor #F0F8FF
skinparam defaultFontColor #333333
skinparam arrowColor #666666

' Define borders for all elements
skinparam entity {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

skinparam control {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

skinparam participant {
  BorderColor #666666
  BackgroundColor #DDDDDD
}



participant "Block Assembly" as BlockAssembly
participant "UTXO Store" as UTXOStore

== Create Coinbase TX ==

BlockAssembly -> BlockAssembly: processCoinbaseUtxos(ctx, block)
BlockAssembly -> UTXOStore: Create(ctx, block.CoinbaseTx, blockHeight+100)
activate UTXOStore

UTXOStore --> BlockAssembly: Confirmation
deactivate UTXOStore


== Delete Coinbase TX ==

BlockAssembly -> UTXOStore: Delete(Coinbase UTXO)
activate UTXOStore

UTXOStore --> BlockAssembly: Confirmation
deactivate UTXOStore

left footer Last Modified On: %date("dd-MMM-yyyy")

@enduml
