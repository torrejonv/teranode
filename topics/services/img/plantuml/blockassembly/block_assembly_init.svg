<svg contentStyleType="text/css" height="885" preserveAspectRatio="none" viewBox="0 0 1515 885" width="1515" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m0 0h1515v885h-1515z" fill="#f0f8ff"/><path d="m318.3047 128.1094h10v188.8633h-10z" fill="#fff" stroke="#181818"/><path d="m318.3047 389.5938h10v130.2422h-10z" fill="#fff" stroke="#181818"/><path d="m318.3047 592.457h10v207.1738h-10z" fill="#fff" stroke="#181818"/><path d="m255.7905 607.457h665.7085v46.6211h-665.7085z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke-width=".5"><path d="m51 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m322.7905 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m678.5225 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m747.5742 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m847.6152 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m977.499 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1105.7412 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1237.9844 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1355.3154 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1456.5527 53.4883v764.1426" stroke="#181818" stroke-dasharray="5 5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" width="92.832" x="5" y="22"/></g><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.832" x="12" y="42.5352">Client Code</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="92.832" x="5" y="816.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.832" x="12" y="837.166">Client Code</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="115.0283" x="265.7905" y="22"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.0283" x="272.7905" y="42.5352">BlockAssembly</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="115.0283" x="265.7905" y="816.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="101.0283" x="272.7905" y="837.166">BlockAssembly</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="61.0518" x="648.5225" y="22"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0518" x="655.5225" y="42.5352">Logger</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="61.0518" x="648.5225" y="816.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="47.0518" x="655.5225" y="837.166">Logger</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="56.041" x="719.5742" y="22"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.041" x="726.5742" y="42.5352">Stores</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="56.041" x="719.5742" y="816.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="42.041" x="726.5742" y="837.166">Stores</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="125.8838" x="785.6152" y="22"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.8838" x="792.6152" y="42.5352">BlockchainClient</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="125.8838" x="785.6152" y="816.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.8838" x="792.6152" y="837.166">BlockchainClient</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.2422" x="921.499" y="50.5352">BlockAssembler</text><ellipse cx="978.1201" cy="21" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m966.1201 35h24" stroke="#666" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.2422" x="921.499" y="830.166">BlockAssembler</text><ellipse cx="978.1201" cy="849.1191" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m966.1201 863.1191h24" stroke="#666" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2432" x="1044.7412" y="50.5352">SubtreeProcessor</text><ellipse cx="1106.3628" cy="21" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m1094.3628 35h24" stroke="#666" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2432" x="1044.7412" y="830.166">SubtreeProcessor</text><ellipse cx="1106.3628" cy="849.1191" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m1094.3628 863.1191h24" stroke="#666" stroke-width=".5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="121.3311" x="1177.9844" y="22"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.3311" x="1184.9844" y="42.5352">KafkaConsumer</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="121.3311" x="1177.9844" y="816.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.3311" x="1184.9844" y="837.166">KafkaConsumer</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="92.2373" x="1309.3154" y="22"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.2373" x="1316.3154" y="42.5352">GRPCServer</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="92.2373" x="1309.3154" y="816.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.2373" x="1316.3154" y="837.166">GRPCServer</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="91.5742" x="1411.5527" y="22"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5742" x="1418.5527" y="42.5352">HTTPServer</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="91.5742" x="1411.5527" y="816.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5742" x="1418.5527" y="837.166">HTTPServer</text><path d="m318.3047 128.1094h10v188.8633h-10z" fill="#fff" stroke="#181818"/><path d="m318.3047 389.5938h10v130.2422h-10z" fill="#fff" stroke="#181818"/><path d="m318.3047 592.457h10v207.1738h-10z" fill="#fff" stroke="#181818"/><path d="m0 84.1436h1508.127v3h-1508.127z" fill="#eee" stroke="#eee"/><path d="m0 84.1436h1508.127" stroke="#000"/><path d="m0 87.1436h1508.127" stroke="#000"/><path d="m730.5088 73.4883h47.1094v23.3105h-47.1094z" fill="#eee" stroke="#000" stroke-width="2"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="28.8247" x="736.5088" y="90.0566">New</text><path d="m306.3047 124.1094 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m51.416 128.1094h260.8887" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="247.8887" x="58.416" y="123.3672">New(logger, stores, blockchainClient...)</text><path d="m667.0483 153.4199 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 157.4199h344.7436" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.2109" x="335.3047" y="152.6777">Initialize logger</text><path d="m735.5947 182.7305 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 186.7305h413.29" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="311.8794" x="335.3047" y="181.9883">Initialize stores (txStore, utxoStore, subtreeStore)</text><path d="m836.5571 212.041 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 216.041h514.2524" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.0679" x="335.3047" y="211.2988">Initialize blockchain client</text><path d="m966.1201 241.3516 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 245.3516h643.8154" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="473.6685" x="335.3047" y="240.6094">NewBlockAssembler(ctx, logger, utxoStore, subtreeStore, blockchainClient)</text><path d="m328.3047 274.6621h42" stroke="#666"/><path d="m370.3047 274.6621v13" stroke="#666"/><path d="m329.3047 287.6621h41" stroke="#666"/><path d="m339.3047 283.6621-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="295.7373" x="335.3047" y="269.9199">Initialize channels (blockSubmissionChan, etc.)</text><path d="m62.416 312.9727-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m56.416 316.9727h265.8887" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.3569" x="68.416" y="312.2305">Return instance</text><path d="m0 345.6279h1508.127v3h-1508.127z" fill="#eee" stroke="#eee"/><path d="m0 345.6279h1508.127" stroke="#000"/><path d="m0 348.6279h1508.127" stroke="#000"/><path d="m733.7493 334.9727h40.6284v23.3105h-40.6284z" fill="#eee" stroke="#000" stroke-width="2"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="22.3438" x="739.7493" y="351.541">Init</text><path d="m306.3047 385.5938 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m51.416 389.5938h260.8887" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="48.3818" x="58.416" y="384.8516">Init(ctx)</text><path d="m966.1201 414.9043 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 418.9043h643.8154" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.1563" x="335.3047" y="414.1621">Init block assembler</text><path d="m1226.6499 444.2148 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 448.2148h904.3452" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="240.9253" x="335.3047" y="443.4727">Setup Kafka consumers (if configured)</text><path d="m328.3047 477.5254h42" stroke="#666"/><path d="m370.3047 477.5254v13" stroke="#666"/><path d="m329.3047 490.5254h41" stroke="#666"/><path d="m339.3047 486.5254-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="321.7437" x="335.3047" y="472.7832">Start background goroutines (processing channels)</text><path d="m62.416 515.8359-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m56.416 519.8359h265.8887" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="140.3721" x="68.416" y="515.0938">Initialization complete</text><path d="m0 548.4912h1508.127v3h-1508.127z" fill="#eee" stroke="#eee"/><path d="m0 548.4912h1508.127" stroke="#000"/><path d="m0 551.4912h1508.127" stroke="#000"/><path d="m729.1631 537.8359h49.8008v23.3105h-49.8008z" fill="#eee" stroke="#000" stroke-width="2"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="31.5161" x="735.1631" y="554.4043">Start</text><path d="m306.3047 588.457 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m51.416 592.457h260.8887" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="57.1733" x="58.416" y="587.7148">Start(ctx)</text><path d="m255.7905 607.457h62.1387v7.3106l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m255.7905 607.457h665.7085v46.6211h-665.7085z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="270.7905" y="621.0254">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="173.7012" x="332.9292" y="620.0918">[FSM state restoration needed]</text><path d="m836.5571 642.0781 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 646.0781h514.2524" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="225.3481" x="335.3047" y="641.3359">Restore and wait for RUNNING state</text><path d="m1226.6499 678.3887 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 682.3887h904.3452" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.4067" x="335.3047" y="677.6465">Start Kafka consumers</text><path d="m1445.3398 707.6992 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 711.6992h1123.0351" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.4966" x="335.3047" y="706.957">Start HTTP server (if configured)</text><path d="m1343.4341 737.0098 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m328.3047 741.0098h1021.1294" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.437" x="335.3047" y="736.2676">Start gRPC server</text><path d="m339.3047 766.3203-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m333.3047 770.3203h1021.1294" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.021" x="345.3047" y="765.5781">Register block assembly service</text><path d="m62.416 795.6309-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m56.416 799.6309h265.8887" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.4063" x="68.416" y="794.8887">Start complete</text><text fill="#333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155.4346" y="875.7871">Last Modified On: 24-Feb-2025</text></svg>
