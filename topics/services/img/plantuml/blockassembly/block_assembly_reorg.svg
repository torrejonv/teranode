<svg contentStyleType="text/css" height="926" preserveAspectRatio="none" viewBox="0 0 1137 926" width="1137" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m0 0h1137v926h-1137z" fill="#f0f8ff"/><path d="m549.1748 98.7988h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m549.1748 224.041h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m549.1748 313.9727h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m687.7383 379.5938h10v319.7949h-10z" fill="#fff" stroke="#181818"/><path d="m10 185.4199h617.1167v75.9316h-617.1167z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m10 275.3516h617.1167v75.9316h-617.1167z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m617.1167 394.5938h477.5913v88.9316h-477.5913z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m617.1167 497.5254h477.5913v88.9316h-477.5913z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke-width=".5"><path d="m80 67.4883v776.832" stroke="#181818" stroke-dasharray="5 5"/><path d="m553.2329 67.4883v776.832" stroke="#181818" stroke-dasharray="5 5"/><path d="m692.1167 67.4883v776.832" stroke="#181818" stroke-dasharray="5 5"/><path d="m949.1025 67.4883v776.832" stroke="#181818" stroke-dasharray="5 5"/><path d="m1044.6113 67.4883v776.832" stroke="#181818" stroke-dasharray="5 5"/><path d="m1115.708 67.4883v776.832" stroke="#181818" stroke-dasharray="5 5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" width="121.2422" x="20" y="36"/></g><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.2422" x="27" y="56.5352">BlockAssembler</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="121.2422" x="20" y="843.3203"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="107.2422" x="27" y="863.8555">BlockAssembler</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="125.8838" x="491.2329" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.8838" x="498.2329" y="56.5352">BlockchainClient</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="125.8838" x="491.2329" y="843.3203"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="111.8838" x="498.2329" y="863.8555">BlockchainClient</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="131.2432" x="627.1167" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2432" x="634.1167" y="56.5352">SubtreeProcessor</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="131.2432" x="627.1167" y="843.3203"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.2432" x="634.1167" y="863.8555">SubtreeProcessor</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.5088" x="903.1025" y="64.5352">SubtreeStore</text><path d="m931.3569 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m931.3569 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="86.5088" x="903.1025" y="856.8555">SubtreeStore</text><path d="m931.3569 869.8086c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m931.3569 869.8086c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.0967" x="1005.6113" y="64.5352">UTXOStore</text><path d="m1027.1597 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1027.1597 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="73.0967" x="1005.6113" y="856.8555">UTXOStore</text><path d="m1027.1597 869.8086c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1027.1597 869.8086c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0527" x="1094.708" y="64.5352">Block</text><ellipse cx="1115.7344" cy="35" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m1103.7344 49h24" stroke="#666" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0527" x="1094.708" y="856.8555">Block</text><ellipse cx="1115.7344" cy="875.8086" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m1103.7344 889.8086h24" stroke="#666" stroke-width=".5"/><path d="m549.1748 98.7988h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m549.1748 224.041h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m549.1748 313.9727h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m687.7383 379.5938h10v319.7949h-10z" fill="#fff" stroke="#181818"/><path d="m537.1748 94.7988 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m80.6211 98.7988h462.5537" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="449.5537" x="87.6211" y="94.0566">GetBlockHeaders(ctx, header.Hash(), uint64(b.maxBlockReorgCatchup))</text><path d="m91.6211 124.1094-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m85.6211 128.1094h467.5537" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="102.229" x="97.6211" y="123.3672">newChain, _, err</text><path d="m80.6211 157.4199h42" stroke="#666"/><path d="m122.6211 157.4199v13" stroke="#666"/><path d="m81.6211 170.4199h41" stroke="#666"/><path d="m91.6211 166.4199-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="411.1885" x="87.6211" y="152.6777">Calculate moveForwardBlockHeaders and moveBackBlockHeaders</text><path d="m10 185.4199h74.4468v7.3106l-10 10h-64.4468z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 185.4199h617.1167v75.9316h-617.1167z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="25" y="198.9883">loop</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="302.5752" x="99.4468" y="198.0547">[For Each BlockHeader in moveForwardBlockHeaders]</text><path d="m537.1748 220.041 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m80.6211 224.041h462.5537" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.0493" x="87.6211" y="219.2988">GetBlock(ctx, blockHeader.Hash())</text><path d="m91.6211 249.3516-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m85.6211 253.3516h467.5537" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34.1821" x="97.6211" y="248.6094">block</text><path d="m10 275.3516h74.4468v7.3105l-10 10h-64.4468z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 275.3516h617.1167v75.9316h-617.1167z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="25" y="288.9199">loop</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="282.1973" x="99.4468" y="287.9863">[For Each BlockHeader in moveBackBlockHeaders]</text><path d="m537.1748 309.9727 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m80.6211 313.9727h462.5537" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="214.0493" x="87.6211" y="309.2305">GetBlock(ctx, blockHeader.Hash())</text><path d="m91.6211 339.2832-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m85.6211 343.2832h467.5537" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="34.1821" x="97.6211" y="338.541">block</text><path d="m675.7383 375.5938 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m80.6211 379.5938h601.1172" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="281.8359" x="87.6211" y="374.8516">Reorg(moveBackBlocks, moveForwardBlocks)</text><path d="m617.1167 394.5938h74.4468v7.3105l-10 10h-64.4468z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m617.1167 394.5938h477.5913v88.9316h-477.5913z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="632.1167" y="408.1621">loop</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="201.7383" x="706.5635" y="407.2285">[For Each Block in moveBackBlocks]</text><path d="m697.7383 433.2148h42" stroke="#666"/><path d="m739.7383 433.2148v13" stroke="#666"/><path d="m698.7383 446.2148h41" stroke="#666"/><path d="m708.7383 442.2148-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="166.8418" x="704.7383" y="428.4727">moveBackBlock(ctx, block)</text><path d="m1033.1597 471.5254 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m697.7383 475.5254h341.4214" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.4771" x="704.7383" y="470.7832">Delete coinbase UTXO</text><path d="m617.1167 497.5254h74.4468v7.3105l-10 10h-64.4468z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m617.1167 497.5254h477.5913v88.9316h-477.5913z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="632.1167" y="511.0938">loop</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="222.1162" x="706.5635" y="510.1602">[For Each Block in moveForwardBlocks]</text><path d="m697.7383 536.1465h42" stroke="#666"/><path d="m739.7383 536.1465v13" stroke="#666"/><path d="m698.7383 549.1465h41" stroke="#666"/><path d="m708.7383 545.1465-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="222.6187" x="704.7383" y="531.4043">moveForwardBlock(ctx, block, true)</text><path d="m1033.1597 574.457 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m697.7383 578.457h341.4214" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="153.6641" x="704.7383" y="573.7148">Process coinbase UTXOs</text><path d="m697.7383 614.7676h42" stroke="#666"/><path d="m739.7383 614.7676v13" stroke="#666"/><path d="m698.7383 627.7676h41" stroke="#666"/><path d="m708.7383 623.7676-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.3862" x="704.7383" y="610.0254">Announce all subtrees to network</text><path d="m697.7383 657.0781h42" stroke="#666"/><path d="m739.7383 657.0781v13" stroke="#666"/><path d="m698.7383 670.0781h41" stroke="#666"/><path d="m708.7383 666.0781-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.3579" x="704.7383" y="652.3359">setTxCount()</text><path d="m91.6211 695.3887-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m85.6211 699.3887h606.1172" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.7227" x="97.6211" y="694.6465">reorg completion</text><path d="m80.6211 728.6992h42" stroke="#666"/><path d="m122.6211 728.6992v13" stroke="#666"/><path d="m81.6211 741.6992h41" stroke="#666"/><path d="m91.6211 737.6992-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="359.7979" x="87.6211" y="723.957">Update internal state (bestBlockHeader, bestBlockHeight)</text><path d="m80.6211 771.0098h42" stroke="#666"/><path d="m122.6211 771.0098v13" stroke="#666"/><path d="m81.6211 784.0098h41" stroke="#666"/><path d="m91.6211 780.0098-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="78.2031" x="87.6211" y="766.2676">SetState(ctx)</text><path d="m80.6211 813.3203h42" stroke="#666"/><path d="m122.6211 813.3203v13" stroke="#666"/><path d="m81.6211 826.3203h41" stroke="#666"/><path d="m91.6211 822.3203-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.6221" x="87.6211" y="808.5781">setCurrentChain(ctx)</text><text fill="#333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155.4346" y="916.4766">Last Modified On: 24-Feb-2025</text></svg>
