<svg contentStyleType="text/css" height="1125" preserveAspectRatio="none" viewBox="0 0 1326 1125" width="1326" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m0 0h1326v1125h-1326z" fill="#f0f8ff"/><path d="m270.5908 141.1094h10v810.2949h-10z" fill="#fff" stroke="#181818"/><path d="m275.5908 207.7305h10v722.3633h-10z" fill="#fff" stroke="#181818"/><path d="m10 286.3516h1190.5703v636.7422h-1190.5703z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m232.0479 519.8359h958.5225v46.6211h-958.5225z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m20 580.457h860.5967v291.3711h-860.5967z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m30 634.0781h840.5967v230.75h-840.5967z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m30 966.4043h195.4082v59.6211h-195.4082z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke-width=".5"><path d="m67 67.4883v975.5371" stroke="#181818" stroke-dasharray="5 5"/><path d="m275.0479 67.4883v975.5371" stroke="#181818" stroke-dasharray="5 5"/><path d="m444.2124 67.4883v975.5371" stroke="#181818" stroke-dasharray="5 5"/><path d="m600.1787 67.4883v975.5371" stroke="#181818" stroke-dasharray="5 5"/><path d="m711.7051 67.4883v975.5371" stroke="#181818" stroke-dasharray="5 5"/><path d="m885.1631 67.4883v975.5371" stroke="#181818" stroke-dasharray="5 5"/><path d="m1088.8184 67.4883v975.5371" stroke="#181818" stroke-dasharray="5 5"/><path d="m1255.5703 67.4883v975.5371" stroke="#181818" stroke-dasharray="5 5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" width="55.8428" x="40" y="36"/></g><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.8428" x="47" y="56.5352">Server</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="55.8428" x="40" y="1042.0254"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="41.8428" x="47" y="1062.5605">Server</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0859" x="242.0479" y="64.5352">Validator</text><ellipse cx="275.5908" cy="35" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m263.5908 49h24" stroke="#666" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0859" x="242.0479" y="1055.5605">Validator</text><ellipse cx="275.5908" cy="1074.5137" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m263.5908 1088.5137h24" stroke="#666" stroke-width=".5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="92.5244" x="398.2124" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.5244" x="405.2124" y="56.5352">TxValidator</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="92.5244" x="398.2124" y="1042.0254"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="78.5244" x="405.2124" y="1062.5605">TxValidator</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="559.1787" y="64.5352">UTXO Store</text><path d="m582.9419 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m582.9419 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="559.1787" y="1055.5605">UTXO Store</text><path d="m582.9419 1068.5137c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m582.9419 1068.5137c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="119.458" x="652.7051" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.458" x="659.7051" y="56.5352">Block Assembly</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="119.458" x="652.7051" y="1042.0254"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.458" x="659.7051" y="1062.5605">Block Assembly</text><path d="m787.1631 41h196.6553c5 0 5 13.2441 5 13.2441s0 13.2442-5 13.2442h-196.6553c-5 0-5-13.2442-5-13.2442s0-13.2441 5-13.2441" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m983.8184 41c-5 0-5 13.2441-5 13.2441 0 13.2442 5 13.2442 5 13.2442" fill="none" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186.6553" x="787.1631" y="59.5352">Rejected Tx Kafka Producer</text><path d="m787.1631 1042.0254h196.6553c5 0 5 13.2441 5 13.2441s0 13.2442-5 13.2442h-196.6553c-5 0-5-13.2442-5-13.2442s0-13.2441 5-13.2441" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m983.8184 1042.0254c-5 0-5 13.2441-5 13.2441 0 13.2442 5 13.2442 5 13.2442" fill="none" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="186.6553" x="787.1631" y="1060.5605">Rejected Tx Kafka Producer</text><path d="m1003.8184 41h171.7519c5 0 5 13.2441 5 13.2441s0 13.2442-5 13.2442h-171.7519c-5 0-5-13.2442-5-13.2442s0-13.2441 5-13.2441" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m1175.5703 41c-5 0-5 13.2441-5 13.2441 0 13.2442 5 13.2442 5 13.2442" fill="none" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161.752" x="1003.8184" y="59.5352">Tx Meta Kafka Producer</text><path d="m1003.8184 1042.0254h171.7519c5 0 5 13.2441 5 13.2441s0 13.2442-5 13.2442h-171.7519c-5 0-5-13.2442-5-13.2442s0-13.2441 5-13.2441" fill="#e2e2f0" stroke="#181818" stroke-width=".5"/><path d="m1175.5703 1042.0254c-5 0-5 13.2441-5 13.2441 0 13.2442 5 13.2442 5 13.2442" fill="none" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="161.752" x="1003.8184" y="1060.5605">Tx Meta Kafka Producer</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="130.3135" x="1190.5703" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.3135" x="1197.5703" y="56.5352">Blockchain Client</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="130.3135" x="1190.5703" y="1042.0254"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="116.3135" x="1197.5703" y="1062.5605">Blockchain Client</text><path d="m270.5908 141.1094h10v810.2949h-10z" fill="#fff" stroke="#181818"/><path d="m275.5908 207.7305h10v722.3633h-10z" fill="#fff" stroke="#181818"/><path d="m67.9214 98.7988h42" stroke="#666"/><path d="m109.9214 98.7988v13" stroke="#666"/><path d="m68.9214 111.7988h41" stroke="#666"/><path d="m78.9214 107.7988-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="133.0405" x="74.9214" y="94.0566">ValidateTransaction()</text><path d="m258.5908 137.1094 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m67.9214 141.1094h196.6694" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="183.6694" x="74.9214" y="136.3672">Validate(ctx, tx, blockHeight)</text><path d="m1243.7271 166.4199 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m280.5908 170.4199h969.1363" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="134.145" x="287.5908" y="165.6777">GetFSMCurrentState()</text><path d="m280.5908 194.7305h47" stroke="#666"/><path d="m327.5908 194.7305v13" stroke="#666"/><path d="m286.5908 207.7305h41" stroke="#666"/><path d="m296.5908 203.7305-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="105.5869" x="292.5908" y="189.9883">validateInternal()</text><path d="m432.4746 238.041 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 242.041h152.8838" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="131.2695" x="292.5908" y="237.2988">validateTransaction()</text><path d="m296.5908 267.3516-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m290.5908 271.3516h152.8838" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="81.7705" x="302.5908" y="266.6094">Return result</text><path d="m10 286.3516h62.1387v7.3105l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 286.3516h1190.5703v636.7422h-1190.5703z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="25" y="299.9199">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.3257" x="87.1387" y="298.9863">[if TX is valid]</text><path d="m285.5908 324.9727h42" stroke="#666"/><path d="m327.5908 324.9727v13" stroke="#666"/><path d="m286.5908 337.9727h41" stroke="#666"/><path d="m296.5908 333.9727-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="83.2114" x="292.5908" y="320.2305">spendUtxos()</text><path d="m588.9419 363.2832 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 367.2832h309.3511" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255.6138" x="292.5908" y="362.541">Spend() # Mark TX input UTXOs as spent</text><path d="m285.5908 396.5938h42" stroke="#666"/><path d="m327.5908 396.5938v13" stroke="#666"/><path d="m286.5908 409.5938h41" stroke="#666"/><path d="m296.5908 405.5938-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.8838" x="292.5908" y="391.8516">storeTxInUtxoMap()</text><path d="m588.9419 450.2148 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 454.2148h309.3511" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.9214" x="292.5908" y="434.1621">Create(locked=true)</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="12.3335" x="292.5908" y="449.4727">1.</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="274.9043" x="309.0376" y="449.4727">Persist new UTXOs from TX as locked</text><path d="m605 467.2148v40h290v-30l-10-10z" fill="#feffdd" stroke="#181818" stroke-width=".5"/><path d="m885 467.2148v10h10z" fill="#feffdd" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="269.3818" x="611" y="484.7832">UTXOs are initially created as locked</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.541" x="611" y="500.0938">(first phase of two-phase commit)</text><path d="m232.0479 519.8359h62.1386v7.3106l-10 10h-52.1386z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m232.0479 519.8359h958.5225v46.6211h-958.5225z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="247.0479" y="533.4043">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="192.1294" x="309.1865" y="532.4707">[if Tx Meta Kafka Producer exists]</text><path d="m1077.6943 554.457 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 558.457h798.1035" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="98.1284" x="292.5908" y="553.7148">Publish tx meta</text><path d="m20 580.457h62.1387v7.3106l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m20 580.457h860.5967v291.3711h-860.5967z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="35" y="594.0254">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158.5869" x="97.1387" y="593.0918">[if !blockAssemblyDisabled]</text><path d="m700.4341 615.0781 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 619.0781h420.8433" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.8662" x="292.5908" y="614.3359">Store()</text><path d="m30 634.0781h62.1387v7.3106l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m30 634.0781h840.5967v230.75h-840.5967z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="45" y="647.6465">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="191.877" x="107.1387" y="646.7129">[if error in block assembler store]</text><path d="m588.9419 668.6992 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 672.6992h309.3511" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.7949" x="292.5908" y="667.957">Delete() # reverseTxMetaStore</text><path d="m588.9419 698.0098 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 702.0098h309.3511" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="171.3042" x="292.5908" y="697.2676">Unspend() # reverseSpends</text><path d="m78.9214 727.3203-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m72.9214 731.3203h201.6694" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="77.0796" x="84.9214" y="726.5781">Return error</text><path d="m30 740.3203h840.5967" stroke="#000" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="79.3149" x="35" y="750.9551">[if successful]</text><path d="m588.9419 802.207 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 806.207h309.3511" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.3755" x="292.5908" y="770.8438">SetLocked(txHash, false)</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="188.627" x="296.7041" y="786.1543"># Set the UTXOs as spendable</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="284.9463" x="296.7041" y="801.4648"># after successful addition to block assembly</text><path d="m605 819.207v40h255v-30l-10-10z" fill="#feffdd" stroke="#181818" stroke-width=".5"/><path d="m850 819.207v10h10z" fill="#feffdd" stroke="#181818" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="230.9912" x="611" y="836.7754">Second phase of two-phase commit:</text><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="234.5967" x="611" y="852.0859">UTXOs are now marked as spendable</text><path d="m10 879.8281h1190.5703" stroke="#000" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90.127" x="15" y="890.4629">[if TX is invalid]</text><path d="m873.4907 911.0938 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m285.5908 915.0938h593.8999" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="120.9355" x="292.5908" y="910.3516">Publish rejected TX</text><path d="m78.9214 947.4043-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m72.9214 951.4043h201.6694" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.3418" x="84.9214" y="946.6621">Return validation result</text><path d="m30 966.4043h62.1387v7.3105l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m30 966.4043h195.4082v59.6211h-195.4082z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="45" y="979.9727">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="90.127" x="107.1387" y="979.0391">[if TX is invalid]</text><path d="m67.9214 1005.0254h42" stroke="#666"/><path d="m109.9214 1005.0254v13" stroke="#666"/><path d="m68.9214 1018.0254h41" stroke="#666"/><path d="m78.9214 1014.0254-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="138.4868" x="74.9214" y="1000.2832">Return error response</text><text fill="#333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155.4932" y="1115.1816">Last Modified On: 12-Apr-2025</text></svg>
