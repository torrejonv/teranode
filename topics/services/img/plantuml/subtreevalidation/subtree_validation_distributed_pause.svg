<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="2574px" preserveAspectRatio="none" style="width:1438px;height:2574px;background:#F0F8FF;" version="1.1" viewBox="0 0 1438 2574" width="1438px" zoomAndPan="magnify"><title>Distributed Pause Mechanism for Subtree Validation</title><defs/><g><rect fill="#F0F8FF" height="2574" style="stroke:none;stroke-width:1.0;" width="1438" x="0" y="0"/><text fill="#333333" font-family="sans-serif" font-size="14" font-weight="bold" lengthAdjust="spacing" textLength="377.0225" x="526.5984" y="28.5352">Distributed Pause Mechanism for Subtree Validation</text><rect fill="#FFFFFF" height="1301.1113" style="stroke:#181818;stroke-width:1.0;" width="10" x="128.8403" y="204.0859"/><rect fill="#FFFFFF" height="346.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="133.8403" y="246.3965"/><rect fill="#ADD8E6" height="129.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="138.8403" y="463.5703"/><rect fill="#FFFFFF" height="215.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="133.8403" y="1290.0234"/><rect fill="#FFFFFF" height="242.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="373.7817" y="673.7441"/><rect fill="#FFFFFF" height="199.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="378.7817" y="716.0547"/><rect fill="#FFFFFF" height="199.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="373.7817" y="1592.8184"/><rect fill="#FFFFFF" height="208.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="373.7817" y="2243.0527"/><rect fill="#FFFFFF" height="199.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="683.2661" y="960.2285"/><rect fill="#FFFFFF" height="157.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="688.2661" y="1002.5391"/><rect fill="#FFFFFF" height="199.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="683.2661" y="1836.9922"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="280.707"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="792.6758"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="1036.8496"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="1366.6445"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="1669.4395"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="1913.6133"/><rect fill="#FFFFFF" height="138.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="2277.3633"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="133" x2="133" y1="121.4648" y2="2172.7871"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="133" x2="133" y1="2172.7871" y2="2213.7422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="133" x2="133" y1="2213.7422" y2="2476.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="377.8242" x2="377.8242" y1="121.4648" y2="2172.7871"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="377.8242" x2="377.8242" y1="2172.7871" y2="2213.7422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="377.8242" x2="377.8242" y1="2213.7422" y2="2476.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="687.3086" x2="687.3086" y1="121.4648" y2="2172.7871"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="687.3086" x2="687.3086" y1="2172.7871" y2="2213.7422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="687.3086" x2="687.3086" y1="2213.7422" y2="2476.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="997.7031" x2="997.7031" y1="121.4648" y2="2172.7871"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="997.7031" x2="997.7031" y1="2172.7871" y2="2213.7422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="997.7031" x2="997.7031" y1="2213.7422" y2="2476.2266"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1226.5552" x2="1226.5552" y1="121.4648" y2="2172.7871"/><line style="stroke:#A80036;stroke-width:1.0;stroke-dasharray:1.0,4.0;" x1="1226.5552" x2="1226.5552" y1="2172.7871" y2="2213.7422"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="1226.5552" x2="1226.5552" y1="2213.7422" y2="2476.2266"/><rect fill="#DDDDDD" height="46.9766" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="131.6807" x="68" y="73.4883"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.2383" x="114.2212" y="94.0234">Pod A</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6807" x="75" y="110.5117">(Block Validation)</text><rect fill="#DDDDDD" height="46.9766" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="131.6807" x="68" y="2475.2266"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.2383" x="114.2212" y="2495.7617">Pod A</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="117.6807" x="75" y="2512.25">(Block Validation)</text><rect fill="#DDDDDD" height="46.9766" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="151.915" x="302.8242" y="73.4883"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37.6318" x="359.9658" y="94.0234">Pod B</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.915" x="309.8242" y="110.5117">(Subtree Processing)</text><rect fill="#DDDDDD" height="46.9766" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="151.915" x="302.8242" y="2475.2266"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="37.6318" x="359.9658" y="2495.7617">Pod B</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.915" x="309.8242" y="2512.25">(Subtree Processing)</text><rect fill="#DDDDDD" height="46.9766" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="151.915" x="612.3086" y="73.4883"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.2656" x="668.6333" y="94.0234">Pod C</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.915" x="619.3086" y="110.5117">(Subtree Processing)</text><rect fill="#DDDDDD" height="46.9766" rx="2.5" ry="2.5" style="stroke:#666666;stroke-width:0.5;" width="151.915" x="612.3086" y="2475.2266"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.2656" x="668.6333" y="2495.7617">Pod C</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="137.915" x="619.3086" y="2512.25">(Subtree Processing)</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.0947" x="943.7031" y="102.0234">Shared Storage</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.7568" x="962.3721" y="118.5117">(Quorum)</text><path d="M979.7505,52.4883 C979.7505,42.4883 997.7505,42.4883 997.7505,42.4883 C997.7505,42.4883 1015.7505,42.4883 1015.7505,52.4883 L1015.7505,78.4883 C1015.7505,88.4883 997.7505,88.4883 997.7505,88.4883 C997.7505,88.4883 979.7505,88.4883 979.7505,78.4883 L979.7505,52.4883 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M979.7505,52.4883 C979.7505,62.4883 997.7505,62.4883 997.7505,62.4883 C997.7505,62.4883 1015.7505,62.4883 1015.7505,52.4883 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="102.0947" x="943.7031" y="2488.7617">Shared Storage</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="64.7568" x="962.3721" y="2505.25">(Quorum)</text><path d="M979.7505,2518.2031 C979.7505,2508.2031 997.7505,2508.2031 997.7505,2508.2031 C997.7505,2508.2031 1015.7505,2508.2031 1015.7505,2518.2031 L1015.7505,2544.2031 C1015.7505,2554.2031 997.7505,2554.2031 997.7505,2554.2031 C997.7505,2554.2031 979.7505,2554.2031 979.7505,2544.2031 L979.7505,2518.2031 " fill="#E2E2F0" style="stroke:#181818;stroke-width:1.5;"/><path d="M979.7505,2518.2031 C979.7505,2528.2031 997.7505,2528.2031 997.7505,2528.2031 C997.7505,2528.2031 1015.7505,2528.2031 1015.7505,2518.2031 " fill="none" style="stroke:#181818;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="107.3994" x="1154.5552" y="118.5117">SUBTREE_PAUSE</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.4297" x="1261.9546" y="118.5117">.lock</text><ellipse cx="1227.4697" cy="88.9766" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="1215.4697" x2="1239.4697" y1="102.9766" y2="102.9766"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" text-decoration="underline" textLength="107.3994" x="1154.5552" y="2488.7617">SUBTREE_PAUSE</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="32.4297" x="1261.9546" y="2488.7617">.lock</text><ellipse cx="1227.4697" cy="2507.7148" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="1215.4697" x2="1239.4697" y1="2521.7148" y2="2521.7148"/><rect fill="#FFFFFF" height="1301.1113" style="stroke:#181818;stroke-width:1.0;" width="10" x="128.8403" y="204.0859"/><rect fill="#FFFFFF" height="346.7266" style="stroke:#181818;stroke-width:1.0;" width="10" x="133.8403" y="246.3965"/><rect fill="#ADD8E6" height="129.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="138.8403" y="463.5703"/><rect fill="#FFFFFF" height="215.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="133.8403" y="1290.0234"/><rect fill="#FFFFFF" height="242.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="373.7817" y="673.7441"/><rect fill="#FFFFFF" height="199.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="378.7817" y="716.0547"/><rect fill="#FFFFFF" height="199.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="373.7817" y="1592.8184"/><rect fill="#FFFFFF" height="208.1738" style="stroke:#181818;stroke-width:1.0;" width="10" x="373.7817" y="2243.0527"/><rect fill="#FFFFFF" height="199.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="683.2661" y="960.2285"/><rect fill="#FFFFFF" height="157.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="688.2661" y="1002.5391"/><rect fill="#FFFFFF" height="199.8633" style="stroke:#181818;stroke-width:1.0;" width="10" x="683.2661" y="1836.9922"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="280.707"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="792.6758"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="1036.8496"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="1366.6445"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="1669.4395"/><rect fill="#FFFFFF" height="87.9316" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="1913.6133"/><rect fill="#FFFFFF" height="138.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="992.7505" y="2277.3633"/><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1431.2192" x="0" y="152.1201"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="152.1201" y2="152.1201"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="155.1201" y2="155.1201"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="233.5146" x="598.8523" y="141.4648"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="215.23" x="604.8523" y="158.0332">Block Validation Starts on Pod A</text><line style="stroke:#666666;stroke-width:1.0;" x1="133.8403" x2="180.8403" y1="191.0859" y2="191.0859"/><line style="stroke:#666666;stroke-width:1.0;" x1="180.8403" x2="180.8403" y1="191.0859" y2="204.0859"/><line style="stroke:#666666;stroke-width:1.0;" x1="139.8403" x2="180.8403" y1="204.0859" y2="204.0859"/><polygon fill="#666666" points="149.8403,200.0859,139.8403,204.0859,149.8403,208.0859,145.8403,204.0859" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.9316" x="145.8403" y="186.3438">CheckBlockSubtrees() called</text><line style="stroke:#666666;stroke-width:1.0;" x1="138.8403" x2="185.8403" y1="233.3965" y2="233.3965"/><line style="stroke:#666666;stroke-width:1.0;" x1="185.8403" x2="185.8403" y1="233.3965" y2="246.3965"/><line style="stroke:#666666;stroke-width:1.0;" x1="144.8403" x2="185.8403" y1="246.3965" y2="246.3965"/><polygon fill="#666666" points="154.8403,242.3965,144.8403,246.3965,154.8403,250.3965,150.8403,246.3965" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="150.5601" x="150.8403" y="228.6543">setPauseProcessing(ctx)</text><polygon fill="#666666" points="980.7505,276.707,990.7505,280.707,980.7505,284.707,984.7505,280.707" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="143.8403" x2="986.7505" y1="280.707" y2="280.707"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="141.6226" x="150.8403" y="275.9648">AcquirePauseLock(ctx)</text><polygon fill="#666666" points="1215.4697,306.0176,1225.4697,310.0176,1215.4697,314.0176,1219.4697,310.0176" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="1002.7505" x2="1221.4697" y1="310.0176" y2="310.0176"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.5234" x="1009.7505" y="305.2754">Create lock file with timestamp</text><polygon fill="#666666" points="1013.7505,335.3281,1003.7505,339.3281,1013.7505,343.3281,1009.7505,339.3281" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1007.7505" x2="1226.4697" y1="339.3281" y2="339.3281"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.9741" x="1019.7505" y="334.5859">Lock created</text><polygon fill="#666666" points="154.8403,364.6387,144.8403,368.6387,154.8403,372.6387,150.8403,368.6387" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="148.8403" x2="996.7505" y1="368.6387" y2="368.6387"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="255.4932" x="160.8403" y="363.8965">Lock acquired, release function returned</text><line style="stroke:#666666;stroke-width:1.0;" x1="143.8403" x2="185.8403" y1="413.2598" y2="413.2598"/><line style="stroke:#666666;stroke-width:1.0;" x1="185.8403" x2="185.8403" y1="413.2598" y2="426.2598"/><line style="stroke:#666666;stroke-width:1.0;" x1="144.8403" x2="185.8403" y1="426.2598" y2="426.2598"/><polygon fill="#666666" points="154.8403,422.2598,144.8403,426.2598,154.8403,430.2598,150.8403,426.2598" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.188" x="150.8403" y="393.207">Set local atomic flag</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="196.8472" x="150.8403" y="408.5176">pauseSubtreeProcessing = true</text><line style="stroke:#666666;stroke-width:1.0;" x1="143.8403" x2="190.8403" y1="450.5703" y2="450.5703"/><line style="stroke:#666666;stroke-width:1.0;" x1="190.8403" x2="190.8403" y1="450.5703" y2="463.5703"/><line style="stroke:#666666;stroke-width:1.0;" x1="149.8403" x2="190.8403" y1="463.5703" y2="463.5703"/><polygon fill="#666666" points="159.8403,459.5703,149.8403,463.5703,159.8403,467.5703,155.8403,463.5703" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.9834" x="155.8403" y="445.8281">Start heartbeat goroutine</text><path d="M153,481.5703 L153,536.5703 L330,536.5703 L330,491.5703 L320,481.5703 L153,481.5703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M320,481.5703 L320,491.5703 L330,491.5703 L320,481.5703 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.1929" x="159" y="499.1387">Heartbeat updates lock</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156.895" x="159" y="514.4492">every timeout/2 seconds</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="124.4775" x="159" y="529.7598">(default: 5 seconds)</text><polygon fill="#666666" points="985.7505,559.8125,995.7505,563.8125,985.7505,567.8125,989.7505,563.8125" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="148.8403" x2="991.7505" y1="563.8125" y2="563.8125"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="145.8691" x="155.8403" y="559.0703">Update lock timestamp</text><polygon fill="#666666" points="1215.4697,589.123,1225.4697,593.123,1215.4697,597.123,1219.4697,593.123" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="997.7505" x2="1221.4697" y1="593.123" y2="593.123"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.9927" x="1004.7505" y="588.3809">Update modification time</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1431.2192" x="0" y="621.7783"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="621.7783" y2="621.7783"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="624.7783" y2="624.7783"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="226.875" x="602.1721" y="611.123"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="208.5903" x="608.1721" y="627.6914">Other Pods Check Pause Status</text><line style="stroke:#666666;stroke-width:1.0;" x1="378.7817" x2="425.7817" y1="660.7441" y2="660.7441"/><line style="stroke:#666666;stroke-width:1.0;" x1="425.7817" x2="425.7817" y1="660.7441" y2="673.7441"/><line style="stroke:#666666;stroke-width:1.0;" x1="384.7817" x2="425.7817" y1="673.7441" y2="673.7441"/><polygon fill="#666666" points="394.7817,669.7441,384.7817,673.7441,394.7817,677.7441,390.7817,673.7441" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.248" x="390.7817" y="656.002">Process subtree message from Kafka</text><line style="stroke:#666666;stroke-width:1.0;" x1="383.7817" x2="430.7817" y1="703.0547" y2="703.0547"/><line style="stroke:#666666;stroke-width:1.0;" x1="430.7817" x2="430.7817" y1="703.0547" y2="716.0547"/><line style="stroke:#666666;stroke-width:1.0;" x1="389.7817" x2="430.7817" y1="716.0547" y2="716.0547"/><polygon fill="#666666" points="399.7817,712.0547,389.7817,716.0547,399.7817,720.0547,395.7817,716.0547" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.0366" x="395.7817" y="698.3125">Check isPauseActive()</text><line style="stroke:#666666;stroke-width:1.0;" x1="388.7817" x2="430.7817" y1="750.3652" y2="750.3652"/><line style="stroke:#666666;stroke-width:1.0;" x1="430.7817" x2="430.7817" y1="750.3652" y2="763.3652"/><line style="stroke:#666666;stroke-width:1.0;" x1="389.7817" x2="430.7817" y1="763.3652" y2="763.3652"/><polygon fill="#666666" points="399.7817,759.3652,389.7817,763.3652,399.7817,767.3652,395.7817,763.3652" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.0649" x="395.7817" y="745.623">Check local atomic flag (fast path)</text><path d="M637.0649,737.5547 L637.0649,762.5547 L766.0649,762.5547 L766.0649,747.5547 L756.0649,737.5547 L637.0649,737.5547 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M756.0649,737.5547 L756.0649,747.5547 L766.0649,747.5547 L756.0649,737.5547 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="108.5957" x="643.0649" y="755.123">Local flag = false</text><polygon fill="#666666" points="980.7505,788.6758,990.7505,792.6758,980.7505,796.6758,984.7505,792.6758" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="388.7817" x2="986.7505" y1="792.6758" y2="792.6758"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.2998" x="395.7817" y="787.9336">IsPauseActive() (distributed check)</text><polygon fill="#666666" points="1215.4697,817.9863,1225.4697,821.9863,1215.4697,825.9863,1219.4697,821.9863" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="1002.7505" x2="1221.4697" y1="821.9863" y2="821.9863"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.7192" x="1009.7505" y="817.2441">Check if lock exists and is fresh</text><polygon fill="#666666" points="1013.7505,847.2969,1003.7505,851.2969,1013.7505,855.2969,1009.7505,851.2969" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1007.7505" x2="1226.4697" y1="851.2969" y2="851.2969"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.6064" x="1019.7505" y="846.5547">Lock exists, age &lt; timeout</text><polygon fill="#666666" points="399.7817,876.6074,389.7817,880.6074,399.7817,884.6074,395.7817,880.6074" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="393.7817" x2="996.7505" y1="880.6074" y2="880.6074"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.3955" x="405.7817" y="875.8652">Pause is active = true</text><line style="stroke:#666666;stroke-width:1.0;" x1="388.7817" x2="430.7817" y1="914.918" y2="914.918"/><line style="stroke:#666666;stroke-width:1.0;" x1="430.7817" x2="430.7817" y1="914.918" y2="927.918"/><line style="stroke:#666666;stroke-width:1.0;" x1="383.7817" x2="430.7817" y1="927.918" y2="927.918"/><polygon fill="#666666" points="393.7817,923.918,383.7817,927.918,393.7817,931.918,389.7817,927.918" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265.4844" x="395.7817" y="910.1758">Skip processing, return message to queue</text><line style="stroke:#666666;stroke-width:1.0;" x1="688.2661" x2="735.2661" y1="947.2285" y2="947.2285"/><line style="stroke:#666666;stroke-width:1.0;" x1="735.2661" x2="735.2661" y1="947.2285" y2="960.2285"/><line style="stroke:#666666;stroke-width:1.0;" x1="694.2661" x2="735.2661" y1="960.2285" y2="960.2285"/><polygon fill="#666666" points="704.2661,956.2285,694.2661,960.2285,704.2661,964.2285,700.2661,960.2285" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.248" x="700.2661" y="942.4863">Process subtree message from Kafka</text><line style="stroke:#666666;stroke-width:1.0;" x1="693.2661" x2="740.2661" y1="989.5391" y2="989.5391"/><line style="stroke:#666666;stroke-width:1.0;" x1="740.2661" x2="740.2661" y1="989.5391" y2="1002.5391"/><line style="stroke:#666666;stroke-width:1.0;" x1="699.2661" x2="740.2661" y1="1002.5391" y2="1002.5391"/><polygon fill="#666666" points="709.2661,998.5391,699.2661,1002.5391,709.2661,1006.5391,705.2661,1002.5391" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.0366" x="705.2661" y="984.7969">Check isPauseActive()</text><polygon fill="#666666" points="980.7505,1032.8496,990.7505,1036.8496,980.7505,1040.8496,984.7505,1036.8496" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="698.2661" x2="986.7505" y1="1036.8496" y2="1036.8496"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="215.2998" x="705.2661" y="1032.1074">IsPauseActive() (distributed check)</text><polygon fill="#666666" points="1215.4697,1062.1602,1225.4697,1066.1602,1215.4697,1070.1602,1219.4697,1066.1602" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="1002.7505" x2="1221.4697" y1="1066.1602" y2="1066.1602"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.7192" x="1009.7505" y="1061.418">Check if lock exists and is fresh</text><polygon fill="#666666" points="1013.7505,1091.4707,1003.7505,1095.4707,1013.7505,1099.4707,1009.7505,1095.4707" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1007.7505" x2="1226.4697" y1="1095.4707" y2="1095.4707"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="168.6064" x="1019.7505" y="1090.7285">Lock exists, age &lt; timeout</text><polygon fill="#666666" points="709.2661,1120.7813,699.2661,1124.7813,709.2661,1128.7813,705.2661,1124.7813" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="703.2661" x2="996.7505" y1="1124.7813" y2="1124.7813"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="135.3955" x="715.2661" y="1120.0391">Pause is active = true</text><line style="stroke:#666666;stroke-width:1.0;" x1="698.2661" x2="740.2661" y1="1159.0918" y2="1159.0918"/><line style="stroke:#666666;stroke-width:1.0;" x1="740.2661" x2="740.2661" y1="1159.0918" y2="1172.0918"/><line style="stroke:#666666;stroke-width:1.0;" x1="693.2661" x2="740.2661" y1="1172.0918" y2="1172.0918"/><polygon fill="#666666" points="703.2661,1168.0918,693.2661,1172.0918,703.2661,1176.0918,699.2661,1172.0918" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="265.4844" x="705.2661" y="1154.3496">Skip processing, return message to queue</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1431.2192" x="0" y="1195.7471"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="1195.7471" y2="1195.7471"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="1198.7471" y2="1198.7471"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="201.3574" x="614.9309" y="1185.0918"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="183.0728" x="620.9309" y="1201.6602">Block Validation Completes</text><line style="stroke:#666666;stroke-width:1.0;" x1="138.8403" x2="180.8403" y1="1239.7129" y2="1239.7129"/><line style="stroke:#666666;stroke-width:1.0;" x1="180.8403" x2="180.8403" y1="1239.7129" y2="1252.7129"/><line style="stroke:#666666;stroke-width:1.0;" x1="139.8403" x2="180.8403" y1="1252.7129" y2="1252.7129"/><polygon fill="#666666" points="149.8403,1248.7129,139.8403,1252.7129,149.8403,1256.7129,145.8403,1252.7129" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="161.2305" x="145.8403" y="1234.9707">Block validation complete</text><line style="stroke:#666666;stroke-width:1.0;" x1="138.8403" x2="185.8403" y1="1277.0234" y2="1277.0234"/><line style="stroke:#666666;stroke-width:1.0;" x1="185.8403" x2="185.8403" y1="1277.0234" y2="1290.0234"/><line style="stroke:#666666;stroke-width:1.0;" x1="144.8403" x2="185.8403" y1="1290.0234" y2="1290.0234"/><polygon fill="#666666" points="154.8403,1286.0234,144.8403,1290.0234,154.8403,1294.0234,150.8403,1290.0234" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="185.1167" x="150.8403" y="1272.2813">Release pause lock (deferred)</text><line style="stroke:#666666;stroke-width:1.0;" x1="143.8403" x2="185.8403" y1="1324.334" y2="1324.334"/><line style="stroke:#666666;stroke-width:1.0;" x1="185.8403" x2="185.8403" y1="1324.334" y2="1337.334"/><line style="stroke:#666666;stroke-width:1.0;" x1="144.8403" x2="185.8403" y1="1337.334" y2="1337.334"/><polygon fill="#666666" points="154.8403,1333.334,144.8403,1337.334,154.8403,1341.334,150.8403,1337.334" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="157.917" x="150.8403" y="1319.5918">Cancel heartbeat context</text><path d="M334.917,1311.5234 L334.917,1336.5234 L520.917,1336.5234 L520.917,1321.5234 L510.917,1311.5234 L334.917,1311.5234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M510.917,1311.5234 L510.917,1321.5234 L520.917,1321.5234 L510.917,1311.5234 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="165.5278" x="340.917" y="1329.0918">Heartbeat goroutine stops</text><polygon fill="#666666" points="980.7505,1362.6445,990.7505,1366.6445,980.7505,1370.6445,984.7505,1366.6445" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="143.8403" x2="986.7505" y1="1366.6445" y2="1366.6445"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.3208" x="150.8403" y="1361.9023">Remove lock file</text><polygon fill="#666666" points="1215.4697,1391.9551,1225.4697,1395.9551,1215.4697,1399.9551,1219.4697,1395.9551" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="1002.7505" x2="1221.4697" y1="1395.9551" y2="1395.9551"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.8501" x="1009.7505" y="1391.2129">Delete lock file</text><polygon fill="#666666" points="1013.7505,1421.2656,1003.7505,1425.2656,1013.7505,1429.2656,1009.7505,1425.2656" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1007.7505" x2="1226.4697" y1="1425.2656" y2="1425.2656"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="88.1245" x="1019.7505" y="1420.5234">Lock removed</text><polygon fill="#666666" points="154.8403,1450.5762,144.8403,1454.5762,154.8403,1458.5762,150.8403,1454.5762" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="148.8403" x2="996.7505" y1="1454.5762" y2="1454.5762"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="86.0806" x="160.8403" y="1449.834">Lock released</text><line style="stroke:#666666;stroke-width:1.0;" x1="143.8403" x2="185.8403" y1="1504.1973" y2="1504.1973"/><line style="stroke:#666666;stroke-width:1.0;" x1="185.8403" x2="185.8403" y1="1504.1973" y2="1517.1973"/><line style="stroke:#666666;stroke-width:1.0;" x1="138.8403" x2="185.8403" y1="1517.1973" y2="1517.1973"/><polygon fill="#666666" points="148.8403,1513.1973,138.8403,1517.1973,148.8403,1521.1973,144.8403,1517.1973" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.188" x="150.8403" y="1484.1445">Set local atomic flag</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="200.9414" x="150.8403" y="1499.4551">pauseSubtreeProcessing = false</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1431.2192" x="0" y="1540.8525"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="1540.8525" y2="1540.8525"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="1543.8525" y2="1543.8525"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="235.3428" x="597.9382" y="1530.1973"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="217.0581" x="603.9382" y="1546.7656">Processing Resumes on All Pods</text><line style="stroke:#666666;stroke-width:1.0;" x1="378.7817" x2="425.7817" y1="1579.8184" y2="1579.8184"/><line style="stroke:#666666;stroke-width:1.0;" x1="425.7817" x2="425.7817" y1="1579.8184" y2="1592.8184"/><line style="stroke:#666666;stroke-width:1.0;" x1="384.7817" x2="425.7817" y1="1592.8184" y2="1592.8184"/><polygon fill="#666666" points="394.7817,1588.8184,384.7817,1592.8184,394.7817,1596.8184,390.7817,1592.8184" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.2925" x="390.7817" y="1575.0762">Next Kafka message</text><line style="stroke:#666666;stroke-width:1.0;" x1="383.7817" x2="425.7817" y1="1627.1289" y2="1627.1289"/><line style="stroke:#666666;stroke-width:1.0;" x1="425.7817" x2="425.7817" y1="1627.1289" y2="1640.1289"/><line style="stroke:#666666;stroke-width:1.0;" x1="384.7817" x2="425.7817" y1="1640.1289" y2="1640.1289"/><polygon fill="#666666" points="394.7817,1636.1289,384.7817,1640.1289,394.7817,1644.1289,390.7817,1640.1289" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.0366" x="390.7817" y="1622.3867">Check isPauseActive()</text><polygon fill="#666666" points="980.7505,1665.4395,990.7505,1669.4395,980.7505,1673.4395,984.7505,1669.4395" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="383.7817" x2="986.7505" y1="1669.4395" y2="1669.4395"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.3486" x="390.7817" y="1664.6973">IsPauseActive()</text><polygon fill="#666666" points="1215.4697,1694.75,1225.4697,1698.75,1215.4697,1702.75,1219.4697,1698.75" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="1002.7505" x2="1221.4697" y1="1698.75" y2="1698.75"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.5288" x="1009.7505" y="1694.0078">Check if lock exists</text><polygon fill="#666666" points="1013.7505,1724.0605,1003.7505,1728.0605,1013.7505,1732.0605,1009.7505,1728.0605" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1007.7505" x2="1226.4697" y1="1728.0605" y2="1728.0605"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.9287" x="1019.7505" y="1723.3184">Lock does not exist</text><polygon fill="#666666" points="394.7817,1753.3711,384.7817,1757.3711,394.7817,1761.3711,390.7817,1757.3711" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.7817" x2="996.7505" y1="1757.3711" y2="1757.3711"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.4897" x="400.7817" y="1752.6289">Pause is active = false</text><line style="stroke:#666666;stroke-width:1.0;" x1="383.7817" x2="425.7817" y1="1791.6816" y2="1791.6816"/><line style="stroke:#666666;stroke-width:1.0;" x1="425.7817" x2="425.7817" y1="1791.6816" y2="1804.6816"/><line style="stroke:#666666;stroke-width:1.0;" x1="378.7817" x2="425.7817" y1="1804.6816" y2="1804.6816"/><polygon fill="#666666" points="388.7817,1800.6816,378.7817,1804.6816,388.7817,1808.6816,384.7817,1804.6816" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.3906" x="390.7817" y="1786.9395">Continue processing subtree</text><line style="stroke:#666666;stroke-width:1.0;" x1="688.2661" x2="735.2661" y1="1823.9922" y2="1823.9922"/><line style="stroke:#666666;stroke-width:1.0;" x1="735.2661" x2="735.2661" y1="1823.9922" y2="1836.9922"/><line style="stroke:#666666;stroke-width:1.0;" x1="694.2661" x2="735.2661" y1="1836.9922" y2="1836.9922"/><polygon fill="#666666" points="704.2661,1832.9922,694.2661,1836.9922,704.2661,1840.9922,700.2661,1836.9922" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.2925" x="700.2661" y="1819.25">Next Kafka message</text><line style="stroke:#666666;stroke-width:1.0;" x1="693.2661" x2="735.2661" y1="1871.3027" y2="1871.3027"/><line style="stroke:#666666;stroke-width:1.0;" x1="735.2661" x2="735.2661" y1="1871.3027" y2="1884.3027"/><line style="stroke:#666666;stroke-width:1.0;" x1="694.2661" x2="735.2661" y1="1884.3027" y2="1884.3027"/><polygon fill="#666666" points="704.2661,1880.3027,694.2661,1884.3027,704.2661,1888.3027,700.2661,1884.3027" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.0366" x="700.2661" y="1866.5605">Check isPauseActive()</text><polygon fill="#666666" points="980.7505,1909.6133,990.7505,1913.6133,980.7505,1917.6133,984.7505,1913.6133" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="693.2661" x2="986.7505" y1="1913.6133" y2="1913.6133"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.3486" x="700.2661" y="1908.8711">IsPauseActive()</text><polygon fill="#666666" points="1215.4697,1938.9238,1225.4697,1942.9238,1215.4697,1946.9238,1219.4697,1942.9238" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="1002.7505" x2="1221.4697" y1="1942.9238" y2="1942.9238"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.5288" x="1009.7505" y="1938.1816">Check if lock exists</text><polygon fill="#666666" points="1013.7505,1968.2344,1003.7505,1972.2344,1013.7505,1976.2344,1009.7505,1972.2344" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1007.7505" x2="1226.4697" y1="1972.2344" y2="1972.2344"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.9287" x="1019.7505" y="1967.4922">Lock does not exist</text><polygon fill="#666666" points="704.2661,1997.5449,694.2661,2001.5449,704.2661,2005.5449,700.2661,2001.5449" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="698.2661" x2="996.7505" y1="2001.5449" y2="2001.5449"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.4897" x="710.2661" y="1996.8027">Pause is active = false</text><line style="stroke:#666666;stroke-width:1.0;" x1="693.2661" x2="735.2661" y1="2035.8555" y2="2035.8555"/><line style="stroke:#666666;stroke-width:1.0;" x1="735.2661" x2="735.2661" y1="2035.8555" y2="2048.8555"/><line style="stroke:#666666;stroke-width:1.0;" x1="688.2661" x2="735.2661" y1="2048.8555" y2="2048.8555"/><polygon fill="#666666" points="698.2661,2044.8555,688.2661,2048.8555,698.2661,2052.8555,694.2661,2048.8555" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.3906" x="700.2661" y="2031.1133">Continue processing subtree</text><rect fill="#EEEEEE" height="3" style="stroke:#EEEEEE;stroke-width:1.0;" width="1431.2192" x="0" y="2072.5107"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="2072.5107" y2="2072.5107"/><line style="stroke:#000000;stroke-width:1.0;" x1="0" x2="1431.2192" y1="2075.5107" y2="2075.5107"/><rect fill="#EEEEEE" height="23.3105" style="stroke:#000000;stroke-width:2.0;" width="182.7651" x="624.2271" y="2061.8555"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="164.4805" x="630.2271" y="2078.4238">Crash Recovery Scenario</text><path d="M5,2100.166 L5,2125.166 L263,2125.166 L263,2110.166 L253,2100.166 L5,2100.166 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M253,2100.166 L253,2110.166 L263,2110.166 L253,2100.166 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237.7515" x="11" y="2117.7344">Pod A crashes during block validation</text><line style="stroke:#666666;stroke-width:1.0;" x1="133.8403" x2="175.8403" y1="2151.7871" y2="2151.7871"/><line style="stroke:#666666;stroke-width:1.0;" x1="175.8403" x2="175.8403" y1="2151.7871" y2="2164.7871"/><line style="stroke:#666666;stroke-width:1.0;" x1="146.8403" x2="175.8403" y1="2164.7871" y2="2164.7871"/><line style="stroke:#666666;stroke-width:2.0;" x1="139.8403" x2="149.8403" y1="2159.7871" y2="2169.7871"/><line style="stroke:#666666;stroke-width:2.0;" x1="139.8403" x2="149.8403" y1="2169.7871" y2="2159.7871"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.0342" x="140.8403" y="2147.0449">Crash/Terminate</text><path d="M259.0342,2138.9766 L259.0342,2163.9766 L470.0342,2163.9766 L470.0342,2148.9766 L460.0342,2138.9766 L259.0342,2138.9766 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M460.0342,2138.9766 L460.0342,2148.9766 L470.0342,2148.9766 L460.0342,2138.9766 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.6519" x="265.0342" y="2156.5449">Heartbeat stops updating lock</text><text fill="#333333" font-family="sans-serif" font-size="11" lengthAdjust="spacing" textLength="180.6514" x="590.3293" y="2197.4219">After timeout period (10 seconds)</text><line style="stroke:#666666;stroke-width:1.0;" x1="378.7817" x2="425.7817" y1="2230.0527" y2="2230.0527"/><line style="stroke:#666666;stroke-width:1.0;" x1="425.7817" x2="425.7817" y1="2230.0527" y2="2243.0527"/><line style="stroke:#666666;stroke-width:1.0;" x1="384.7817" x2="425.7817" y1="2243.0527" y2="2243.0527"/><polygon fill="#666666" points="394.7817,2239.0527,384.7817,2243.0527,394.7817,2247.0527,390.7817,2243.0527" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="158.5771" x="390.7817" y="2225.3105">Process subtree message</text><polygon fill="#666666" points="980.7505,2273.3633,990.7505,2277.3633,980.7505,2281.3633,984.7505,2277.3633" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="383.7817" x2="986.7505" y1="2277.3633" y2="2277.3633"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="93.3486" x="390.7817" y="2272.6211">IsPauseActive()</text><polygon fill="#666666" points="1215.4697,2313.3291,1225.4697,2317.3291,1215.4697,2321.3291,1219.4697,2317.3291" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="1002.7505" x2="1221.4697" y1="2317.3291" y2="2317.3291"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="95.3164" x="1009.7505" y="2312.5869">Check lock age</text><path d="M1232,2290.3633 L1232,2330.3633 L1420,2330.3633 L1420,2300.3633 L1410,2290.3633 L1232,2290.3633 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><path d="M1410,2290.3633 L1410,2300.3633 L1420,2300.3633 L1410,2290.3633 " fill="#FEFFDD" style="stroke:#181818;stroke-width:0.5;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.7495" x="1238" y="2307.9316">Lock timestamp &gt; timeout</text><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="126.8262" x="1238" y="2323.2422">(stale lock detected)</text><polygon fill="#666666" points="1215.4697,2353.2949,1225.4697,2357.2949,1215.4697,2361.2949,1219.4697,2357.2949" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="1002.7505" x2="1221.4697" y1="2357.2949" y2="2357.2949"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="113.4517" x="1009.7505" y="2352.5527">Remove stale lock</text><polygon fill="#666666" points="1013.7505,2382.6055,1003.7505,2386.6055,1013.7505,2390.6055,1009.7505,2386.6055" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="1007.7505" x2="1226.4697" y1="2386.6055" y2="2386.6055"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.9644" x="1019.7505" y="2381.8633">Stale lock cleaned up</text><polygon fill="#666666" points="394.7817,2411.916,384.7817,2415.916,394.7817,2419.916,390.7817,2415.916" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="388.7817" x2="996.7505" y1="2415.916" y2="2415.916"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="139.4897" x="400.7817" y="2411.1738">Pause is active = false</text><line style="stroke:#666666;stroke-width:1.0;" x1="383.7817" x2="425.7817" y1="2450.2266" y2="2450.2266"/><line style="stroke:#666666;stroke-width:1.0;" x1="425.7817" x2="425.7817" y1="2450.2266" y2="2463.2266"/><line style="stroke:#666666;stroke-width:1.0;" x1="378.7817" x2="425.7817" y1="2463.2266" y2="2463.2266"/><polygon fill="#666666" points="388.7817,2459.2266,378.7817,2463.2266,388.7817,2467.2266,384.7817,2463.2266" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.7334" x="390.7817" y="2445.4844">Continue processing</text><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="154.8389" x="0" y="2564.8711">Last Modified On: 03-Oct-2025</text><!--SRC=[rLTjRzis4FwkNt5mCSm6ahJRi64mvWAM4gF3uZMBctqAOD3KoIOiYIv9fGc6_VSTAKgMfVWbxOfX-c2RrDtnxhcxXsUz5lc6APR1Wl7rKiaYZoEPIWMl9cycFqycWQubOanOaPg9p8qN-S4z3H6cbFpaN_xadY3u5Yun4Jd2GgeObOQ4th8q1KmnmzpeXZujXNc2lmA0q4dlsgBTjfUNxWd-3XfME7cePFgbPkZJ22usB3UVPufYIH4kXJPAB0g3CTomGYDCaQzOBdJce9WL2wCGuK-MYfWP8VCWQ1xTkv4nZE_pVfXAlcw83Nh0DD3RSLS-9FdAy8sI7BKM-RBM2BiQqM6DAA13sOAH-xtPYYaAPcQaOaialJyAgOgibFMxWKzbRpwVtOKVRg-kvZVZkzdLV7vXmoZDMZIkQHK4en6qmoDBvAC6-kKGWD4e26oqSFxMHJs4Q8LyxVIyvxe_04wrXN70k14Fp609K4jHet67RmFjS_CusAVaOnh2c7yiXCBQyPPM5Rl_TkTLekIjGYlamam4LSOdOLPWH8RQi6mJrA9mtZpJxN2d6syjrw6urwpqApu3HLrbavGKENSeAZI5oaarnewVBLHcQAntB0LcP2Ou92bRtbCta5yUu2rWC0AZYguDcpHO8Nqko6LOIkeDG-s_YosykXRBbGbJif1BsbHs2JBnPjxL1eeDbGDg1zjzZW-edXncPFNrzvH8QlPOKmrwTXh2ZzNce9k_EsUiJC4M-EVJvMKp6Oj4yB8ahKuJoB9CEXjKpU_D2fLTwh9AVUiJFARGLIc77hTmMBKSQD-2v9ksFYLAPl0RIzPi1y2mhLyU8hGxPcmbiJyuHQMJSEWdJ1jYFxCQD7BZAeqadSW84fPgt5gi4VvrrmFenmtwu_R4q_kb32afquMFP4W3osEAac11lJhOCQNy6LYxlrGLq-uV2xpB2vbqNc5LrdkwfG7VR2qsiAdxuSntMfqv8-5ZWKMxNiBEsjgDlDtenPKGjVMFLq93vN-Qj-YbUMlWyvbvYphhPo-jI6QR52rXTQ-hKlXXAyozS4lkrdEu8zuIHKjlg8ZX1uSljeZb7DC6_zfP21_DJYE_wx8pQ2Ct-faRxnOp-T2uj4ujWakqWJNq3kLSkKFstcx-JliQLrX9OoSnUaFl5dL1vM97ap4DiexbkvJ-E-5UDcnLMoq-FeN1Zn7ibpJbmPp4aWAagYbbJoBE3fYLIwr0gIH5Nc2Z2IkoEyQDHo2DJgB2Ozpt7q4QlHJIPg0dGrhILgIONb4PS-dcgHd7d2aXNH4xfh3xlgNAuPjR3N8_BfGrlcXHMTs7ZnKHMVdN7r1b8gUZz_2FOvronBDMK_TVuEBY0iQ98GSy-yC6oRaO-j-zgMSx8AaJPwWzNVVlfD_XO8LQar9ZleItLI0qfj9Ewcan9eBanbBwymTuwjrgx2kksTOc9wQaOPyW_SeTs-tK51D3VsYbJTordI2dRd8cPzxdG_Z63jFzNXoVJwVJyoTwUeFW7m00]--></g></svg>
