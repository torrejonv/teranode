<svg contentStyleType="text/css" height="942" preserveAspectRatio="none" viewBox="0 0 1740 942" width="1740" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m0 0h1740v942h-1740z" fill="#f0f8ff"/><path d="m89.5049 106.7988h10v743.7871h-10z" fill="#fff" stroke="#181818"/><path d="m605.4717 165.4199h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m870.5601 194.7305h10v656.8555h-10z" fill="#fff" stroke="#181818"/><path d="m875.5601 232.041h10v552.9238h-10z" fill="#fff" stroke="#181818"/><path d="m1178.2837 391.5938h10v321.1055h-10z" fill="#fff" stroke="#181818"/><path d="m10 126.7988h1724.4546v716.7871h-1724.4546z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m773.3604 294.3516h951.0942v483.6133h-951.0942z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m1135.7407 465.2148h578.7139v118.2422h-578.7139z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke-width=".5"><path d="m94 67.4883v793.0976" stroke="#181818" stroke-dasharray="5 5"/><path d="m610.4409 67.4883v793.0976" stroke="#181818" stroke-dasharray="5 5"/><path d="m875.3604 67.4883v793.0976" stroke="#181818" stroke-dasharray="5 5"/><path d="m1182.7407 67.4883v793.0976" stroke="#181818" stroke-dasharray="5 5"/><path d="m1398.9604 67.4883v793.0976" stroke="#181818" stroke-dasharray="5 5"/><path d="m1498.8989 67.4883v793.0976" stroke="#181818" stroke-dasharray="5 5"/><path d="m1627.4253 67.4883v793.0976" stroke="#181818" stroke-dasharray="5 5"/><rect fill="#ddd" height="46.9766" rx="2.5" stroke="#666" width="149.0098" x="20" y="19.5117"/></g><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.5752" x="40.2173" y="40.0469">Block Validation</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.0098" x="27" y="56.5352">(BlockValidation.go)</text><rect fill="#ddd" height="46.9766" rx="2.5" stroke="#666" stroke-width=".5" width="149.0098" x="20" y="859.5859"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="108.5752" x="40.2173" y="880.1211">Block Validation</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="135.0098" x="27" y="896.6094">(BlockValidation.go)</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="182.0615" x="519.4409" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168.0615" x="526.4409" y="56.5352">Subtree Validation Client</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="182.0615" x="519.4409" y="859.5859"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="168.0615" x="526.4409" y="880.1211">Subtree Validation Client</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="184.3994" x="783.3604" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170.3994" x="790.3604" y="56.5352">Subtree Validation Server</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="184.3994" x="783.3604" y="859.5859"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="170.3994" x="790.3604" y="880.1211">Subtree Validation Server</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="75.0859" x="1145.7407" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0859" x="1152.7407" y="56.5352">Validator</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="75.0859" x="1145.7407" y="859.5859"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0859" x="1152.7407" y="880.1211">Validator</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.9385" x="1350.9604" y="64.5352">Subtree Store</text><path d="m1381.4297 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1381.4297 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.9385" x="1350.9604" y="873.1211">Subtree Store</text><path d="m1381.4297 886.0742c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1381.4297 886.0742c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="1457.8989" y="64.5352">UTXO Store</text><path d="m1481.6621 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1481.6621 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="1457.8989" y="873.1211">UTXO Store</text><path d="m1481.6621 886.0742c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1481.6621 886.0742c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="153.0293" x="1551.4253" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.0293" x="1558.4253" y="56.5352">Remote Asset Server</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="153.0293" x="1551.4253" y="859.5859"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="139.0293" x="1558.4253" y="880.1211">Remote Asset Server</text><path d="m89.5049 106.7988h10v743.7871h-10z" fill="#fff" stroke="#181818"/><path d="m605.4717 165.4199h10v29.3105h-10z" fill="#fff" stroke="#181818"/><path d="m870.5601 194.7305h10v656.8555h-10z" fill="#fff" stroke="#181818"/><path d="m875.5601 232.041h10v552.9238h-10z" fill="#fff" stroke="#181818"/><path d="m1178.2837 391.5938h10v321.1055h-10z" fill="#fff" stroke="#181818"/><path d="m94.5049 93.7988h47" stroke="#666"/><path d="m141.5049 93.7988v13" stroke="#666"/><path d="m100.5049 106.7988h41" stroke="#666"/><path d="m110.5049 102.7988-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="262.812" x="106.5049" y="89.0566">validateBlockSubtrees(ctx, block, baseUrl)</text><path d="m10 126.7988h74.4468v7.3106l-10 10h-64.4468z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 126.7988h1724.4546v716.7871h-1724.4546z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="25" y="140.3672">loop</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="171.5742" x="99.4468" y="139.4336">[for each subtree in the block]</text><path d="m593.4717 161.4199 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m99.5049 165.4199h499.9668" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="486.9668" x="106.5049" y="160.6777">CheckSubtreeFromBlock(ctx, subtreeHash, baseURL, blockHeight, blockHash)</text><path d="m858.5601 190.7305 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m610.4717 194.7305h254.0884" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="236.0884" x="617.4717" y="189.9883">CheckSubtreeFromBlock(ctx, request)</text><path d="m880.5601 219.041h47" stroke="#666"/><path d="m927.5601 219.041v13" stroke="#666"/><path d="m886.5601 232.041h41" stroke="#666"/><path d="m896.5601 228.041-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="167.8638" x="892.5601" y="214.2988">checkSubtree(ctx, request)</text><path d="m885.5601 266.3516h42" stroke="#666"/><path d="m927.5601 266.3516v13" stroke="#666"/><path d="m886.5601 279.3516h41" stroke="#666"/><path d="m896.5601 275.3516-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="216.5693" x="892.5601" y="261.6094">Attempt to obtain lock for Subtree</text><path d="m773.3604 294.3516h62.1386v7.3105l-10 10h-52.1386z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m773.3604 294.3516h951.0942v483.6133h-951.0942z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="788.3604" y="307.9199">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="243.8745" x="850.499" y="306.9863">[if lock obtained and subtree doesn't exist]</text><path d="m1615.9399 328.9727 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m885.5601 332.9727h736.3798" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="194.6572" x="892.5601" y="328.2305">Get subtree data (if not legacy)</text><path d="m896.5601 358.2832-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m890.5601 362.2832h736.3798" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.4346" x="902.5601" y="357.541">Subtree data</text><path d="m1166.2837 387.5938 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m885.5601 391.5938h286.7236" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="273.7236" x="892.5601" y="386.8516">ValidateSubtreeInternal(ctx, v, blockHeight)</text><path d="m1487.6621 416.9043 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m1188.2837 420.9043h305.3784" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="127.5308" x="1195.2837" y="416.1621">Process tx metadata</text><path d="m1199.2837 446.2148-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m1193.2837 450.2148h305.3784" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="79.1299" x="1205.2837" y="445.4727">Tx metadata</text><path d="m1135.7407 465.2148h62.1387v7.3106l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m1135.7407 465.2148h578.7139v118.2422h-578.7139z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="1150.7407" y="478.7832">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="138.4775" x="1212.8794" y="477.8496">[if missing transactions]</text><path d="m1615.9399 499.8359 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m1188.2837 503.8359h433.6562" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="156" x="1195.2837" y="499.0938">Get missing transactions</text><path d="m1199.2837 529.1465-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m1193.2837 533.1465h433.6562" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="129.4478" x="1205.2837" y="528.4043">Missing transactions</text><path d="m1188.2837 562.457h42" stroke="#666"/><path d="m1230.2837 562.457v13" stroke="#666"/><path d="m1189.2837 575.457h41" stroke="#666"/><path d="m1199.2837 571.457-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.146" x="1195.2837" y="557.7148">Process missing transactions</text><path d="m1188.2837 611.7676h42" stroke="#666"/><path d="m1230.2837 611.7676v13" stroke="#666"/><path d="m1189.2837 624.7676h41" stroke="#666"/><path d="m1199.2837 620.7676-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="179.6133" x="1195.2837" y="607.0254">Create and populate subtree</text><path d="m1387.4297 650.0781 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m1188.2837 654.0781h205.146" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="174.5479" x="1195.2837" y="649.3359">Store subtree and metadata</text><path d="m1199.2837 679.3887-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m1193.2837 683.3887h205.146" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="132.3677" x="1205.2837" y="678.6465">Storage confirmation</text><path d="m896.5601 708.6992-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m890.5601 712.6992h291.7236" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.2192" x="902.5601" y="707.957">Validation result</text><path d="m773.3604 721.6992h951.0942" stroke="#000" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="145.3257" x="778.3604" y="732.334">[if subtree already exists]</text><path d="m885.5601 756.9648h42" stroke="#666"/><path d="m927.5601 756.9648v13" stroke="#666"/><path d="m886.5601 769.9648h41" stroke="#666"/><path d="m896.5601 765.9648-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="190.2837" x="892.5601" y="752.2227">Return existing subtree status</text><path d="m621.4717 802.2754-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m615.4717 806.2754h254.0884" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="212.564" x="627.4717" y="801.5332">CheckSubtreeFromBlockResponse</text><path d="m110.5049 831.5859-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m104.5049 835.5859h504.9668" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="103.2192" x="116.5049" y="830.8438">Validation result</text><text fill="#333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155.4932" y="932.7422">Last Modified On: 07-Apr-2025</text></svg>
