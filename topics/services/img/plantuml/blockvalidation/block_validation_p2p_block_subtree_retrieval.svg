<svg contentStyleType="text/css" height="931" preserveAspectRatio="none" viewBox="0 0 1466 931" width="1466" xmlns="http://www.w3.org/2000/svg" zoomAndPan="magnify"><path d="m0 0h1466v931h-1466z" fill="#f0f8ff"/><path d="m82.543 106.7988h10v724.832h-10z" fill="#fff" stroke="#181818"/><path d="m10 185.4199h1427.0771v575.5898h-1427.0771z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m20 209.7305h1407.0771v353.416h-1407.0771z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m30 377.2832h1387.0771v178.8633h-1387.0771z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m40 502.5254h1367.0771v46.6211h-1367.0771z" fill="none" stroke="#000" stroke-width="1.5"/><path d="m40 577.1465h775.0068v75.9316h-775.0068z" fill="none" stroke="#000" stroke-width="1.5"/><g stroke-width=".5"><path d="m87 67.4883v782.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m757.7871 67.4883v782.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m882.0068 67.4883v782.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1008.9531 67.4883v782.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1120.8916 67.4883v782.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1225.0928 67.4883v782.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1336.6191 67.4883v782.1426" stroke="#181818" stroke-dasharray="5 5"/><path d="m1433.0771 67.4883v782.1426" stroke="#181818" stroke-dasharray="5 5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" width="75.0859" x="50" y="36"/></g><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0859" x="57" y="56.5352">Validator</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="75.0859" x="50" y="848.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="61.0859" x="57" y="869.166">Validator</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.2197" x="711.7871" y="64.5352">Subtree Data</text><ellipse cx="758.397" cy="35" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m746.397 49h24" stroke="#666" stroke-width=".5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="87.2197" x="711.7871" y="862.166">Subtree Data</text><ellipse cx="758.397" cy="881.1191" fill="#ddd" rx="12" ry="12" stroke="#666" stroke-width=".5"/><path d="m746.397 895.1191h24" stroke="#666" stroke-width=".5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="135.9463" x="815.0068" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.9463" x="822.0068" y="56.5352">Util HTTP Request</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="135.9463" x="815.0068" y="848.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="121.9463" x="822.0068" y="869.166">Util HTTP Request</text><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.9385" x="960.9531" y="64.5352">Subtree Store</text><path d="m991.4224 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m991.4224 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.9385" x="960.9531" y="862.166">Subtree Store</text><path d="m991.4224 875.1191c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m991.4224 875.1191c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2012" x="1067.8916" y="64.5352">Tx Meta Cache</text><path d="m1102.9922 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1102.9922 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="100.2012" x="1067.8916" y="862.166">Tx Meta Cache</text><path d="m1102.9922 875.1191c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1102.9922 875.1191c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="1184.0928" y="64.5352">UTXO Store</text><path d="m1207.856 15c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1207.856 15c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="1184.0928" y="862.166">UTXO Store</text><path d="m1207.856 875.1191c0-10 18-10 18-10s18 0 18 10v26c0 10-18 10-18 10s-18 0-18-10z" fill="#e2e2f0" stroke="#181818" stroke-width="1.5"/><path d="m1207.856 875.1191c0 10 18 10 18 10s18 0 18-10" fill="none" stroke="#181818" stroke-width="1.5"/><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="119.458" x="1277.6191" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.458" x="1284.6191" y="56.5352">Block Assembly</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="119.458" x="1277.6191" y="848.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="105.458" x="1284.6191" y="869.166">Block Assembly</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="53.04" x="1407.0771" y="36"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.04" x="1414.0771" y="56.5352">Caller</text><rect fill="#ddd" height="30.4883" rx="2.5" stroke="#666" stroke-width=".5" width="53.04" x="1407.0771" y="848.6309"/><text fill="#333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="39.04" x="1414.0771" y="869.166">Caller</text><path d="m82.543 106.7988h10v724.832h-10z" fill="#fff" stroke="#181818"/><path d="m87.543 93.7988h47" stroke="#666"/><path d="m134.543 93.7988v13" stroke="#666"/><path d="m93.543 106.7988h41" stroke="#666"/><path d="m103.543 102.7988-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="421.7256" x="99.543" y="89.0566">ValidateSubtreeInternal(ctx, v ValidateSubtree, blockHeight uint32)</text><path d="m997.4224 137.1094 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 141.1094h910.8794" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="164.6074" x="99.543" y="136.3672">Exists(ctx, subtreeHash[:])</text><path d="m103.543 166.4199-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m97.543 170.4199h910.8794" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="117.3618" x="109.543" y="165.6777">subtreeExists / err</text><path d="m10 185.4199h62.1387v7.3106l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m10 185.4199h1427.0771v575.5898h-1427.0771z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="25" y="198.9883">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="129.1318" x="87.1387" y="198.0547">[subtreeExists is false]</text><path d="m20 209.7305h74.4468v7.3105l-10 10h-64.4468z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m20 209.7305h1407.0771v353.416h-1407.0771z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="35" y="223.2988">loop</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="103.4419" x="109.4468" y="222.3652">[retry mechanism]</text><path d="m870.98 244.3516 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 248.3516h784.437" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="306.3823" x="99.543" y="243.6094">getSubtreeTxHashes(ctx, subtreeHash, baseURL)</text><path d="m103.543 273.6621-10 4 10 4-4-4z" fill="#666" stroke="#666"/><path d="m97.543 277.6621h784.437" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="91.0571" x="109.543" y="272.9199">txHashes / err</text><path d="m92.543 306.9727h42" stroke="#666"/><path d="m134.543 306.9727v13" stroke="#666"/><path d="m93.543 319.9727h41" stroke="#666"/><path d="m103.543 315.9727-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="396.6333" x="99.543" y="302.2305">processTxMetaUsingCache(ctx, txHashes, txMetaSlice, failFast)</text><path d="m92.543 349.2832h42" stroke="#666"/><path d="m134.543 349.2832v13" stroke="#666"/><path d="m93.543 362.2832h41" stroke="#666"/><path d="m103.543 358.2832-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="449.5029" x="99.543" y="344.541">processTxMetaUsingStore(ctx, txHashes, txMetaSlice, batched, failFast)</text><path d="m30 377.2832h62.1387v7.3106l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m30 377.2832h1387.0771v178.8633h-1387.0771z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="45" y="390.8516">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126.7148" x="107.1387" y="389.918">[missing transactions]</text><path d="m92.543 415.9043h42" stroke="#666"/><path d="m134.543 415.9043v13" stroke="#666"/><path d="m93.543 428.9043h41" stroke="#666"/><path d="m103.543 424.9043-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="636.854" x="99.543" y="411.1621">processMissingTransactions(ctx, subtreeHash, missingTxHashes, baseURL, txMetaSlice, blockHeight)</text><path d="m1213.856 454.2148 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 458.2148h1127.313" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.7651" x="99.543" y="453.4727">spendUtxos(ctx, tx, blockHeight)</text><path d="m1213.856 483.5254 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 487.5254h1127.313" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="249.4375" x="99.543" y="482.7832">storeTxInUtxoMap(ctx, tx, blockHeight)</text><path d="m40 502.5254h62.1387v7.3105l-10 10h-52.1387z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m40 502.5254h1367.0771v46.6211h-1367.0771z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="55" y="516.0938">alt</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="158.5869" x="117.1387" y="515.1602">[if !blockAssemblyDisabled]</text><path d="m1325.3481 537.1465 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 541.1465h1238.8051" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.3794" x="99.543" y="536.4043">Store(ctx, txData)</text><path d="m40 577.1465h74.4468v7.3105l-10 10h-64.4468z" fill="#eee" stroke="#000" stroke-width="1.5"/><path d="m40 577.1465h775.0068v75.9316h-775.0068z" fill="none" stroke="#000" stroke-width="1.5"/><text fill="#333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="55" y="590.7148">loop</text><text fill="#333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="121.9561" x="129.4468" y="589.7813">[for each transaction]</text><path d="m746.397 611.7676 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 615.7676h659.854" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="314.1011" x="99.543" y="611.0254">AddNode(txHash, txMeta.Fee, txMeta.SizeInBytes)</text><path d="m746.397 641.0781 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 645.0781h659.854" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="353.355" x="99.543" y="640.3359">SetParentTxHashes(subtreeIdx, txMeta.ParentTxHashes)</text><path d="m92.543 681.3887h42" stroke="#666"/><path d="m134.543 681.3887v13" stroke="#666"/><path d="m93.543 694.3887h41" stroke="#666"/><path d="m103.543 690.3887-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="268.8613" x="99.543" y="676.6465">Check if merkle root matches subtreeHash</text><path d="m997.4224 719.6992 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 723.6992h910.8794" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="317.897" x="99.543" y="718.957">Set(ctx, merkleRoot[:], completeSubtreeMetaBytes)</text><path d="m997.4224 749.0098 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m92.543 753.0098h910.8794" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="287.4155" x="99.543" y="748.2676">Set(ctx, merkleRoot[:], completeSubtreeBytes)</text><path d="m92.543 789.3203h42" stroke="#666"/><path d="m134.543 789.3203v13" stroke="#666"/><path d="m93.543 802.3203h41" stroke="#666"/><path d="m103.543 798.3203-10 4 10 4-4-4z" fill="#666" stroke="#666"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="191.3438" x="99.543" y="784.5781">SetSubtreeExists(subtreeHash)</text><path d="m1421.5972 827.6309 10 4-10 4 4-4z" fill="#666" stroke="#666"/><path d="m87.543 831.6309h1340.0542" stroke="#666" stroke-dasharray="2 2"/><text fill="#333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="17.8813" x="94.543" y="826.8887">err</text><text fill="#333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="155.4346" y="921.7871">Last Modified On: 24-Feb-2025</text></svg>
