<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" contentStyleType="text/css" height="1814px" preserveAspectRatio="none" style="width:1058px;height:1814px;background:#F0F8FF;" version="1.1" viewBox="0 0 1058 1814" width="1058px" zoomAndPan="magnify"><defs/><g><rect fill="#F0F8FF" height="1814" style="stroke:none;stroke-width:1.0;" width="1058" x="0" y="0"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="73.4692" y="277.6621"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="73.4692" y="1677.9492"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="173.7017" y="680.3438"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="173.7017" y="1114.9805"/><rect fill="#FFFFFF" height="218.8184" style="stroke:#181818;stroke-width:1.0;" width="10" x="298.856" y="224.041"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="298.856" y="597.4121"/><rect fill="#FFFFFF" height="148.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="298.856" y="1457.7754"/><rect fill="#FFFFFF" height="1231.7344" style="stroke:#181818;stroke-width:1.0;" width="10" x="565.4297" y="131.1094"/><rect fill="#FFFFFF" height="283.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="565.4297" y="1423.4648"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="852.2188" y="538.791"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="852.2188" y="876.8516"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="852.2188" y="1511.3965"/><rect fill="none" height="1278.3555" style="stroke:#000000;stroke-width:1.5;" width="1042.3799" x="10" y="84.4883"/><rect fill="none" height="175.5078" style="stroke:#000000;stroke-width:1.5;" width="466.1309" x="20" y="239.041"/><rect fill="none" height="855.6738" style="stroke:#000000;stroke-width:1.5;" width="803.0859" x="106.9385" y="500.1699"/><rect fill="none" height="206.8184" style="stroke:#000000;stroke-width:1.5;" width="757.2061" x="126.9385" y="641.7227"/><rect fill="none" height="116.8867" style="stroke:#000000;stroke-width:1.5;" width="334.7412" x="539.4033" y="724.6543"/><rect fill="none" height="311.75" style="stroke:#000000;stroke-width:1.5;" width="716.9956" x="116.9385" y="921.1621"/><rect fill="none" height="280.4395" style="stroke:#000000;stroke-width:1.5;" width="696.9956" x="126.9385" y="945.4727"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="274.5308" x="539.4033" y="1012.0938"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="246.0869" x="539.4033" y="1159.291"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="217.1353" x="539.4033" y="1289.2227"/><rect fill="none" height="338.416" style="stroke:#000000;stroke-width:1.5;" width="900.0244" x="20" y="1376.8438"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="689.5596" x="220.4648" y="1472.7754"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="78" x2="78" y1="67.4883" y2="1732.2598"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="177.9385" x2="177.9385" y1="67.4883" y2="1732.2598"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="303.4648" x2="303.4648" y1="67.4883" y2="1732.2598"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="570.4033" x2="570.4033" y1="67.4883" y2="1732.2598"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="856.4131" x2="856.4131" y1="67.4883" y2="1732.2598"/><line style="stroke:#181818;stroke-width:0.5;stroke-dasharray:5.0,5.0;" x1="976.0244" x2="976.0244" y1="67.4883" y2="1732.2598"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.9385" x="30" y="64.5352">Subtree Store</text><path d="M60.4692,15 C60.4692,5 78.4692,5 78.4692,5 C78.4692,5 96.4692,5 96.4692,15 L96.4692,41 C96.4692,51 78.4692,51 78.4692,51 C78.4692,51 60.4692,51 60.4692,41 L60.4692,15 " fill="#DDDDDD" style="stroke:#666666;stroke-width:1.5;"/><path d="M60.4692,15 C60.4692,25 78.4692,25 78.4692,25 C78.4692,25 96.4692,25 96.4692,15 " fill="none" style="stroke:#666666;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="90.9385" x="30" y="1744.7949">Subtree Store</text><path d="M60.4692,1757.748 C60.4692,1747.748 78.4692,1747.748 78.4692,1747.748 C78.4692,1747.748 96.4692,1747.748 96.4692,1757.748 L96.4692,1783.748 C96.4692,1793.748 78.4692,1793.748 78.4692,1793.748 C78.4692,1793.748 60.4692,1793.748 60.4692,1783.748 L60.4692,1757.748 " fill="#DDDDDD" style="stroke:#666666;stroke-width:1.5;"/><path d="M60.4692,1757.748 C60.4692,1767.748 78.4692,1767.748 78.4692,1767.748 C78.4692,1767.748 96.4692,1767.748 96.4692,1757.748 " fill="none" style="stroke:#666666;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="136.9385" y="64.5352">UTXO Store</text><path d="M160.7017,15 C160.7017,5 178.7017,5 178.7017,5 C178.7017,5 196.7017,5 196.7017,15 L196.7017,41 C196.7017,51 178.7017,51 178.7017,51 C178.7017,51 160.7017,51 160.7017,41 L160.7017,15 " fill="#DDDDDD" style="stroke:#666666;stroke-width:1.5;"/><path d="M160.7017,15 C160.7017,25 178.7017,25 178.7017,25 C178.7017,25 196.7017,25 196.7017,15 " fill="none" style="stroke:#666666;stroke-width:1.5;"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="77.5264" x="136.9385" y="1744.7949">UTXO Store</text><path d="M160.7017,1757.748 C160.7017,1747.748 178.7017,1747.748 178.7017,1747.748 C178.7017,1747.748 196.7017,1747.748 196.7017,1757.748 L196.7017,1783.748 C196.7017,1793.748 178.7017,1793.748 178.7017,1793.748 C178.7017,1793.748 160.7017,1793.748 160.7017,1783.748 L160.7017,1757.748 " fill="#DDDDDD" style="stroke:#666666;stroke-width:1.5;"/><path d="M160.7017,1757.748 C160.7017,1767.748 178.7017,1767.748 178.7017,1767.748 C178.7017,1767.748 196.7017,1767.748 196.7017,1757.748 " fill="none" style="stroke:#666666;stroke-width:1.5;"/><rect fill="#DDDDDD" height="30.4883" style="stroke:#666666;stroke-width:0.5;" width="142.7822" x="234.4648" y="32"/><rect fill="#DDDDDD" height="30.4883" style="stroke:#666666;stroke-width:0.5;" width="142.7822" x="230.4648" y="36"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.7822" x="237.4648" y="56.5352">Block Bloom Filters</text><rect fill="#DDDDDD" height="30.4883" style="stroke:#666666;stroke-width:0.5;" width="142.7822" x="234.4648" y="1731.2598"/><rect fill="#DDDDDD" height="30.4883" style="stroke:#666666;stroke-width:0.5;" width="142.7822" x="230.4648" y="1735.2598"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="128.7822" x="237.4648" y="1755.7949">Block Bloom Filters</text><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0527" x="549.4033" y="64.5352">Block</text><ellipse cx="570.4297" cy="35" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="558.4297" x2="582.4297" y1="49" y2="49"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="36.0527" x="549.4033" y="1744.7949">Block</text><ellipse cx="570.4297" cy="1763.748" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="558.4297" x2="582.4297" y1="1777.748" y2="1777.748"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.6113" x="814.4131" y="64.5352">Transaction</text><ellipse cx="857.2188" cy="35" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="845.2188" x2="869.2188" y1="49" y2="49"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="79.6113" x="814.4131" y="1744.7949">Transaction</text><ellipse cx="857.2188" cy="1763.748" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="845.2188" x2="869.2188" y1="1777.748" y2="1777.748"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.3555" x="910.0244" y="64.5352">Validation Context</text><ellipse cx="976.2021" cy="35" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="964.2021" x2="988.2021" y1="49" y2="49"/><text fill="#333333" font-family="sans-serif" font-size="14" lengthAdjust="spacing" textLength="126.3555" x="910.0244" y="1744.7949">Validation Context</text><ellipse cx="976.2021" cy="1763.748" fill="#DDDDDD" rx="12" ry="12" style="stroke:#666666;stroke-width:0.5;"/><line style="stroke:#666666;stroke-width:0.5;" x1="964.2021" x2="988.2021" y1="1777.748" y2="1777.748"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="73.4692" y="277.6621"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="73.4692" y="1677.9492"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="173.7017" y="680.3438"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="173.7017" y="1114.9805"/><rect fill="#FFFFFF" height="218.8184" style="stroke:#181818;stroke-width:1.0;" width="10" x="298.856" y="224.041"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="298.856" y="597.4121"/><rect fill="#FFFFFF" height="148.5527" style="stroke:#181818;stroke-width:1.0;" width="10" x="298.856" y="1457.7754"/><rect fill="#FFFFFF" height="1231.7344" style="stroke:#181818;stroke-width:1.0;" width="10" x="565.4297" y="131.1094"/><rect fill="#FFFFFF" height="283.7949" style="stroke:#181818;stroke-width:1.0;" width="10" x="565.4297" y="1423.4648"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="852.2188" y="538.791"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="852.2188" y="876.8516"/><rect fill="#FFFFFF" height="29.3105" style="stroke:#181818;stroke-width:1.0;" width="10" x="852.2188" y="1511.3965"/><path d="M10,84.4883 L162.9229,84.4883 L162.9229,91.7988 L152.9229,101.7988 L10,101.7988 L10,84.4883 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="1278.3555" style="stroke:#000000;stroke-width:1.5;" width="1042.3799" x="10" y="84.4883"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="107.9229" x="25" y="98.0566">Block Validation</text><line style="stroke:#666666;stroke-width:1.0;" x1="570.4297" x2="617.4297" y1="118.1094" y2="118.1094"/><line style="stroke:#666666;stroke-width:1.0;" x1="617.4297" x2="617.4297" y1="118.1094" y2="131.1094"/><line style="stroke:#666666;stroke-width:1.0;" x1="576.4297" x2="617.4297" y1="131.1094" y2="131.1094"/><polygon fill="#666666" points="586.4297,127.1094,576.4297,131.1094,586.4297,135.1094,582.4297,131.1094" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="146.5991" x="582.4297" y="113.3672">validOrderAndBlessed()</text><polygon fill="#666666" points="964.2021,161.4199,974.2021,165.4199,964.2021,169.4199,968.2021,165.4199" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="970.2021" y1="165.4199" y2="165.4199"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="159.8721" x="582.4297" y="160.6777">Initialize transaction map</text><polygon fill="#666666" points="964.2021,190.7305,974.2021,194.7305,964.2021,198.7305,968.2021,194.7305" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="970.2021" y1="194.7305" y2="194.7305"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="210.0439" x="582.4297" y="189.9883">Load current chain block headers</text><polygon fill="#666666" points="319.856,220.041,309.856,224.041,319.856,228.041,315.856,224.041" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="313.856" x2="564.4297" y1="224.041" y2="224.041"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="237.5737" x="325.856" y="219.2988">Collect bloom filters for current chain</text><path d="M20,239.041 L82.1387,239.041 L82.1387,246.3516 L72.1387,256.3516 L20,256.3516 L20,239.041 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="175.5078" style="stroke:#000000;stroke-width:1.5;" width="466.1309" x="20" y="239.041"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="35" y="252.6094">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="161.2241" x="97.1387" y="251.6758">[Bloom filter not in memory]</text><polygon fill="#666666" points="94.4692,273.6621,84.4692,277.6621,94.4692,281.6621,90.4692,277.6621" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="88.4692" x2="297.856" y1="277.6621" y2="277.6621"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="128.6099" x="100.4692" y="272.9199">Retrieve bloom filter</text><polygon fill="#666666" points="286.856,302.9727,296.856,306.9727,286.856,310.9727,290.856,306.9727" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78.4692" x2="292.856" y1="306.9727" y2="306.9727"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.9951" x="85.4692" y="302.2305">Bloom filter bytes</text><line style="stroke:#666666;stroke-width:1.0;" x1="308.856" x2="350.856" y1="336.2832" y2="336.2832"/><line style="stroke:#666666;stroke-width:1.0;" x1="350.856" x2="350.856" y1="336.2832" y2="349.2832"/><line style="stroke:#666666;stroke-width:1.0;" x1="309.856" x2="350.856" y1="349.2832" y2="349.2832"/><polygon fill="#666666" points="319.856,345.2832,309.856,349.2832,319.856,353.2832,315.856,349.2832" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.3101" x="315.856" y="331.541">Deserialize bloom filter</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="20" x2="486.1309" y1="358.2832" y2="358.2832"/><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="122.9873" x="25" y="368.918">[Bloom filter missing]</text><line style="stroke:#666666;stroke-width:1.0;" x1="308.856" x2="350.856" y1="393.5488" y2="393.5488"/><line style="stroke:#666666;stroke-width:1.0;" x1="350.856" x2="350.856" y1="393.5488" y2="406.5488"/><line style="stroke:#666666;stroke-width:1.0;" x1="309.856" x2="350.856" y1="406.5488" y2="406.5488"/><polygon fill="#666666" points="319.856,402.5488,309.856,406.5488,319.856,410.5488,315.856,406.5488" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="148.2749" x="315.856" y="388.8066">Create new bloom filter</text><polygon fill="#666666" points="553.4297,438.8594,563.4297,442.8594,553.4297,446.8594,557.4297,442.8594" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="303.856" x2="559.4297" y1="442.8594" y2="442.8594"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="143.3047" x="310.856" y="438.1172">Collected bloom filters</text><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="617.4297" y1="472.1699" y2="472.1699"/><line style="stroke:#666666;stroke-width:1.0;" x1="617.4297" x2="617.4297" y1="472.1699" y2="485.1699"/><line style="stroke:#666666;stroke-width:1.0;" x1="576.4297" x2="617.4297" y1="485.1699" y2="485.1699"/><polygon fill="#666666" points="586.4297,481.1699,576.4297,485.1699,586.4297,489.1699,582.4297,485.1699" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="207.416" x="582.4297" y="467.4277">For each subtree and transaction</text><path d="M106.9385,500.1699 L181.3853,500.1699 L181.3853,507.4805 L171.3853,517.4805 L106.9385,517.4805 L106.9385,500.1699 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="855.6738" style="stroke:#000000;stroke-width:1.5;" width="803.0859" x="106.9385" y="500.1699"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="121.9385" y="513.7383">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="172.4712" x="196.3853" y="512.8047">[For each transaction in block]</text><polygon fill="#666666" points="840.2188,534.791,850.2188,538.791,840.2188,542.791,844.2188,538.791" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="846.2188" y1="538.791" y2="538.791"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.2349" x="582.4297" y="534.0488">Get transaction hash</text><polygon fill="#666666" points="586.4297,564.1016,576.4297,568.1016,586.4297,572.1016,582.4297,568.1016" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580.4297" x2="856.2188" y1="568.1016" y2="568.1016"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.98" x="592.4297" y="563.3594">Transaction hash</text><polygon fill="#666666" points="319.856,593.4121,309.856,597.4121,319.856,601.4121,315.856,597.4121" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="313.856" x2="564.4297" y1="597.4121" y2="597.4121"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="202.395" x="325.856" y="592.6699">Check if hash exists in any filter</text><polygon fill="#666666" points="553.4297,622.7227,563.4297,626.7227,553.4297,630.7227,557.4297,626.7227" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="303.856" x2="559.4297" y1="626.7227" y2="626.7227"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.3833" x="310.856" y="621.9805">Potential match (true/false)</text><path d="M126.9385,641.7227 L189.0771,641.7227 L189.0771,649.0332 L179.0771,659.0332 L126.9385,659.0332 L126.9385,641.7227 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="206.8184" style="stroke:#000000;stroke-width:1.5;" width="757.2061" x="126.9385" y="641.7227"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="141.9385" y="655.291">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="286.7251" x="204.0771" y="654.3574">[Potential match found (possible re-presentation)]</text><polygon fill="#666666" points="194.7017,676.3438,184.7017,680.3438,194.7017,684.3438,190.7017,680.3438" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="188.7017" x2="564.4297" y1="680.3438" y2="680.3438"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="147.0498" x="200.7017" y="675.6016">Verify with txMetaStore</text><polygon fill="#666666" points="553.4297,705.6543,563.4297,709.6543,553.4297,713.6543,557.4297,709.6543" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="178.7017" x2="559.4297" y1="709.6543" y2="709.6543"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="136.8618" x="185.7017" y="704.9121">Transaction metadata</text><path d="M539.4033,724.6543 L601.542,724.6543 L601.542,731.9648 L591.542,741.9648 L539.4033,741.9648 L539.4033,724.6543 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="116.8867" style="stroke:#000000;stroke-width:1.5;" width="334.7412" x="539.4033" y="724.6543"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="554.4033" y="738.2227">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="252.6025" x="616.542" y="737.2891">[Transaction already mined in current chain]</text><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="575.4297" x2="617.4297" y1="763.2754" y2="763.2754"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617.4297" x2="617.4297" y1="763.2754" y2="776.2754"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="576.4297" x2="617.4297" y1="776.2754" y2="776.2754"/><polygon fill="#666666" points="586.4297,772.2754,576.4297,776.2754,586.4297,780.2754,582.4297,776.2754" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="221" x="582.4297" y="758.5332">Invalid - transaction already mined</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="539.4033" x2="874.1445" y1="785.2754" y2="785.2754"/><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="85.9214" x="544.4033" y="795.9102">[False positive]</text><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="575.4297" x2="617.4297" y1="820.541" y2="820.541"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617.4297" x2="617.4297" y1="820.541" y2="833.541"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="576.4297" x2="617.4297" y1="833.541" y2="833.541"/><polygon fill="#666666" points="586.4297,829.541,576.4297,833.541,586.4297,837.541,582.4297,833.541" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="122.6177" x="582.4297" y="815.7988">Continue validation</text><polygon fill="#666666" points="840.2188,872.8516,850.2188,876.8516,840.2188,880.8516,844.2188,876.8516" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="846.2188" y1="876.8516" y2="876.8516"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="189.0713" x="582.4297" y="872.1094">Get parent transaction hashes</text><polygon fill="#666666" points="586.4297,902.1621,576.4297,906.1621,586.4297,910.1621,582.4297,906.1621" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580.4297" x2="856.2188" y1="906.1621" y2="906.1621"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.73" x="592.4297" y="901.4199">Parent tx hashes</text><path d="M116.9385,921.1621 L191.3853,921.1621 L191.3853,928.4727 L181.3853,938.4727 L116.9385,938.4727 L116.9385,921.1621 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="311.75" style="stroke:#000000;stroke-width:1.5;" width="716.9956" x="116.9385" y="921.1621"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="131.9385" y="934.7305">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="164.2212" x="206.3853" y="933.7969">[For each parent transaction]</text><path d="M126.9385,945.4727 L189.0771,945.4727 L189.0771,952.7832 L179.0771,962.7832 L126.9385,962.7832 L126.9385,945.4727 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="280.4395" style="stroke:#000000;stroke-width:1.5;" width="696.9956" x="126.9385" y="945.4727"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="141.9385" y="959.041">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="126.6772" x="204.0771" y="958.1074">[Parent in same block]</text><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="617.4297" y1="984.0938" y2="984.0938"/><line style="stroke:#666666;stroke-width:1.0;" x1="617.4297" x2="617.4297" y1="984.0938" y2="997.0938"/><line style="stroke:#666666;stroke-width:1.0;" x1="576.4297" x2="617.4297" y1="997.0938" y2="997.0938"/><polygon fill="#666666" points="586.4297,993.0938,576.4297,997.0938,586.4297,1001.0938,582.4297,997.0938" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="205.5244" x="582.4297" y="979.3516">Verify parent comes before child</text><path d="M539.4033,1012.0938 L601.542,1012.0938 L601.542,1019.4043 L591.542,1029.4043 L539.4033,1029.4043 L539.4033,1012.0938 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="274.5308" x="539.4033" y="1012.0938"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="554.4033" y="1025.6621">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="106.1973" x="616.542" y="1024.7285">[Parent after child]</text><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="575.4297" x2="617.4297" y1="1050.7148" y2="1050.7148"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617.4297" x2="617.4297" y1="1050.7148" y2="1063.7148"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="576.4297" x2="617.4297" y1="1063.7148" y2="1063.7148"/><polygon fill="#666666" points="586.4297,1059.7148,576.4297,1063.7148,586.4297,1067.7148,582.4297,1063.7148" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="209.5044" x="582.4297" y="1045.9727">Invalid - wrong transaction order</text><line style="stroke:#000000;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="126.9385" x2="823.9341" y1="1079.7148" y2="1079.7148"/><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="146.1851" x="131.9385" y="1090.3496">[Parent in previous block]</text><polygon fill="#666666" points="194.7017,1110.9805,184.7017,1114.9805,194.7017,1118.9805,190.7017,1114.9805" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="188.7017" x2="564.4297" y1="1114.9805" y2="1114.9805"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="182.7427" x="200.7017" y="1110.2383">Check parent exists on chain</text><polygon fill="#666666" points="553.4297,1140.291,563.4297,1144.291,553.4297,1148.291,557.4297,1144.291" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="178.7017" x2="559.4297" y1="1144.291" y2="1144.291"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="82.1958" x="185.7017" y="1139.5488">Parent status</text><path d="M539.4033,1159.291 L601.542,1159.291 L601.542,1166.6016 L591.542,1176.6016 L539.4033,1176.6016 L539.4033,1159.291 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="246.0869" x="539.4033" y="1159.291"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="554.4033" y="1172.8594">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="118.6743" x="616.542" y="1171.9258">[Parent not on chain]</text><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="575.4297" x2="617.4297" y1="1197.9121" y2="1197.9121"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617.4297" x2="617.4297" y1="1197.9121" y2="1210.9121"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="576.4297" x2="617.4297" y1="1210.9121" y2="1210.9121"/><polygon fill="#666666" points="586.4297,1206.9121,576.4297,1210.9121,586.4297,1214.9121,582.4297,1210.9121" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="181.0605" x="582.4297" y="1193.1699">Invalid - parent not on chain</text><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="617.4297" y1="1261.2227" y2="1261.2227"/><line style="stroke:#666666;stroke-width:1.0;" x1="617.4297" x2="617.4297" y1="1261.2227" y2="1274.2227"/><line style="stroke:#666666;stroke-width:1.0;" x1="576.4297" x2="617.4297" y1="1274.2227" y2="1274.2227"/><polygon fill="#666666" points="586.4297,1270.2227,576.4297,1274.2227,586.4297,1278.2227,582.4297,1274.2227" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="121.0688" x="582.4297" y="1256.4805">Track input spends</text><path d="M539.4033,1289.2227 L601.542,1289.2227 L601.542,1296.5332 L591.542,1306.5332 L539.4033,1306.5332 L539.4033,1289.2227 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="59.6211" style="stroke:#000000;stroke-width:1.5;" width="217.1353" x="539.4033" y="1289.2227"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="17.1387" x="554.4033" y="1302.791">alt</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="132.1128" x="616.542" y="1301.8574">[Duplicate input found]</text><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="575.4297" x2="617.4297" y1="1327.8438" y2="1327.8438"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="617.4297" x2="617.4297" y1="1327.8438" y2="1340.8438"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="576.4297" x2="617.4297" y1="1340.8438" y2="1340.8438"/><polygon fill="#666666" points="586.4297,1336.8438,576.4297,1340.8438,586.4297,1344.8438,582.4297,1340.8438" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="152.1089" x="582.4297" y="1323.1016">Invalid - duplicate input</text><path d="M20,1376.8438 L324.3906,1376.8438 L324.3906,1384.1543 L314.3906,1394.1543 L20,1394.1543 L20,1376.8438 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="338.416" style="stroke:#000000;stroke-width:1.5;" width="900.0244" x="20" y="1376.8438"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="259.3906" x="35" y="1390.4121">Bloom Filter Creation and Maintenance</text><line style="stroke:#666666;stroke-width:1.0;" x1="570.4297" x2="617.4297" y1="1410.4648" y2="1410.4648"/><line style="stroke:#666666;stroke-width:1.0;" x1="617.4297" x2="617.4297" y1="1410.4648" y2="1423.4648"/><line style="stroke:#666666;stroke-width:1.0;" x1="576.4297" x2="617.4297" y1="1423.4648" y2="1423.4648"/><polygon fill="#666666" points="586.4297,1419.4648,576.4297,1423.4648,586.4297,1427.4648,582.4297,1423.4648" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="172.2437" x="582.4297" y="1405.7227">NewOptimizedBloomFilter()</text><polygon fill="#666666" points="319.856,1453.7754,309.856,1457.7754,319.856,1461.7754,315.856,1457.7754" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="313.856" x2="564.4297" y1="1457.7754" y2="1457.7754"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="232.8701" x="325.856" y="1453.0332">Create filter with optimal parameters</text><path d="M220.4648,1472.7754 L294.9116,1472.7754 L294.9116,1480.0859 L284.9116,1490.0859 L220.4648,1490.0859 L220.4648,1472.7754 " fill="#EEEEEE" style="stroke:#000000;stroke-width:1.5;"/><rect fill="none" height="105.2422" style="stroke:#000000;stroke-width:1.5;" width="689.5596" x="220.4648" y="1472.7754"/><text fill="#333333" font-family="sans-serif" font-size="13" font-weight="bold" lengthAdjust="spacing" textLength="29.4468" x="235.4648" y="1486.3438">loop</text><text fill="#333333" font-family="sans-serif" font-size="11" font-weight="bold" lengthAdjust="spacing" textLength="172.4712" x="309.9116" y="1485.4102">[For each transaction in block]</text><polygon fill="#666666" points="840.2188,1507.3965,850.2188,1511.3965,840.2188,1515.3965,844.2188,1511.3965" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="846.2188" y1="1511.3965" y2="1511.3965"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="130.2349" x="582.4297" y="1506.6543">Get transaction hash</text><polygon fill="#666666" points="586.4297,1536.707,576.4297,1540.707,586.4297,1544.707,582.4297,1540.707" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="580.4297" x2="856.2188" y1="1540.707" y2="1540.707"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="107.98" x="592.4297" y="1535.9648">Transaction hash</text><polygon fill="#666666" points="319.856,1566.0176,309.856,1570.0176,319.856,1574.0176,315.856,1570.0176" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="313.856" x2="564.4297" y1="1570.0176" y2="1570.0176"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="110.1826" x="325.856" y="1565.2754">Add hash to filter</text><polygon fill="#666666" points="553.4297,1602.3281,563.4297,1606.3281,553.4297,1610.3281,557.4297,1606.3281" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="303.856" x2="559.4297" y1="1606.3281" y2="1606.3281"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="104.8569" x="310.856" y="1601.5859">New bloom filter</text><line style="stroke:#666666;stroke-width:1.0;" x1="575.4297" x2="617.4297" y1="1635.6387" y2="1635.6387"/><line style="stroke:#666666;stroke-width:1.0;" x1="617.4297" x2="617.4297" y1="1635.6387" y2="1648.6387"/><line style="stroke:#666666;stroke-width:1.0;" x1="576.4297" x2="617.4297" y1="1648.6387" y2="1648.6387"/><polygon fill="#666666" points="586.4297,1644.6387,576.4297,1648.6387,586.4297,1652.6387,582.4297,1648.6387" style="stroke:#666666;stroke-width:1.0;"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="252.7891" x="582.4297" y="1630.8965">Prune old filters based on retention size</text><polygon fill="#666666" points="94.4692,1673.9492,84.4692,1677.9492,94.4692,1681.9492,90.4692,1677.9492" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;" x1="88.4692" x2="564.4297" y1="1677.9492" y2="1677.9492"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="175.0366" x="100.4692" y="1673.207">Store serialized bloom filter</text><polygon fill="#666666" points="558.4297,1703.2598,568.4297,1707.2598,558.4297,1711.2598,562.4297,1707.2598" style="stroke:#666666;stroke-width:1.0;"/><line style="stroke:#666666;stroke-width:1.0;stroke-dasharray:2.0,2.0;" x1="78.4692" x2="564.4297" y1="1707.2598" y2="1707.2598"/><text fill="#333333" font-family="sans-serif" font-size="13" lengthAdjust="spacing" textLength="40.5933" x="85.4692" y="1702.5176">Stored</text><text fill="#333333" font-family="sans-serif" font-size="10" lengthAdjust="spacing" textLength="153.7305" x="0" y="1804.416">Last Modified On: 02-Jun-2025</text><!--SRC=[lLVRRkCs47tNLmnI54aUZDw0el13WKq25mkiDqRNBVfAYwEOY4GA9ELBY_vxXnGbaPBbtJP0ZM0t9cSEvtBc4lCgPCqqgs37yjSNhHh97rMfD7or-dRrqsgLcLw2Oy6QqgwKj47a1_-9H9ZMwXWkV_IVBBk59oo4HDWfpL4RAEYMbILWYHLAQo9z-Yhi6VxA01wyT8f5fsChd_md-pkBK7AoKAlohJ3qhnMvg9cqRuNYpB8TC_XspyeISokKDFyDgZVavbEpineHFbcbyGQOWN3Y3oB1txP_F4TIxcih4Xjpyr2g_1NeNrN1IfIM4kt5_Kauo49wM-7kEd_jpxUQISCyfB_Tdlghtrafo2QwWKTABvwibnYEmwdZs_QeeDwJyGOMa6jirPZaq1ZsWfcBJTq-7G6umFcZnS_jBqiukCjd5-9taZ-KQ0poktiIT3OUcCLWFm3ztCB6lGdVBM6ZaVA5hNxxUXxCYnwPsBw4zr9OGST_8jWX5b2n-ZEA7nJZa3TQKxmWtpCXOUV5zyXSqOsSwrEof6ZwB3fnIbtH7liQJU16JWyvzRwpqeRSjm0WbGMoeS9AwJC9GABah8ZPjeHVqMg11qpCy7hzgmaztKry08k9OuazkxD5uxKupYEERKm1dz2W3jaPcOcbmVJ1IXWZvCiNm3uwWY98F4vG9M_3cm8C_0ovGvvcBqkyd6QhO-htouvA22I_ZpbteHfMn0alPaBhS1MLgj0FlLOFeZ6BEqxwcDp2unu9NXH47ee0FrF89BeIfR1D_8cisPwMy0lQ19hSsQTieTRXlczFSRosbrIYK0MbzBrHjZghdJxWIHXhd6TCdY-oTXJz-Lnkb7MzZfLKxPOYTsTrWzyKZ9XrFxPp0jg-IKKuHYdS582xMX4RToM2naMjYSVI-lxH8aVEzjsTg45aByvm59RIU5gZPKEXH0uEyw2zwB_F1RuY93TTWdparXYgUuhyYW5Ilb3inuqgyMamuhtq_PXcWfr32yg-d5Skz42HevPym7bOruE5RE9kty785h3xFo6-6n3IBlAzA3duCHwrYvJfhUY4yA6XNQVy9kYUOfKPogUbEtqroaU0fU0RLc5Kr-FISJO49WN0N5Kqc7TOE8vuztl529aLhekcrrTpUjIA-aOS8n_KNhbBGiZku03Lmq6enimv4PL4dBckzjriJtWtI-UPsWYM6Ah8nlIYLyeYYPCRj1CJhWQglg8O1UaQTzrsm9kw5BcpZvRJnfhiKkQfR5stT09WQi8oVQTwIlNRJfLzrlhHiv6D_RHC6wLVBtasB7tzWjfEtcurN5CSg7SocUE5sVSHZy-r5HNDVXvrtzbbS6vwjBC-x0Y-jIe7I_tQB_WOElgLuVs5y_L_79SplhxZl1sILlsBbURZT0swkikC4xNH3VsfgQYdTgki-ok6EwfhzBEHVZEKnbWttKNR2krtFJwsPsv_lBIFEfFy0S-khPwph2snSAMX75q-C6DXhRWe11drB9VmjLlTxcuuNwpNwyMPFZVtsJy0]--></g></svg>