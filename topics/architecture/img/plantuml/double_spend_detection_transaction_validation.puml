@startuml double_spend_detection_validation
skinparam backgroundColor #F0F8FF
skinparam defaultFontColor #333333
skinparam arrowColor #666666

' Define borders for all elements
skinparam entity {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

skinparam control {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

skinparam participant {
  BorderColor #666666
  BackgroundColor #DDDDDD
}



title Double Spend Detection During Transaction Validation

participant "Validator Service" as VS
database "UTXO Store" as UTXO
participant "SubtreeValidation" as SV

VS -> UTXO: Check if UTXO is spendable
activate UTXO

alt UTXO already spent
UTXO --> VS: UTXO spent error
VS -> VS: Reject transaction
else UTXO available
UTXO --> VS: UTXO available
VS -> VS: Process transaction normally
VS -> SV: Forward to subtree validation
end

deactivate UTXO

left footer Last Modified On: %date("dd-MMM-yyyy")
@enduml
