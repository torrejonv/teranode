
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../blob/">
      
      
        <link rel="next" href="../../datamodel/block_data_model/">
      
      
      <link rel="icon" href="../../architecture/img/bsvblockchain_blue_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>UTXO Store - Teranode</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../overrides/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#utxo-store" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Teranode" class="md-header__button md-logo" aria-label="Teranode" data-md-component="logo">
      
  <img src="../../architecture/img/bsvblockchain_logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Teranode
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              UTXO Store
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tutorials/developers/forkAndPullRequestGuidelines/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../howto/locallyRunningServices/" class="md-tabs__link">
          
  
  
  How-To Guides

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../teranodeIntro/" class="md-tabs__link">
          
  
  
  Key Topics

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../references/projectStructure/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Teranode" class="md-nav__button md-logo" aria-label="Teranode" data-md-component="logo">
      
  <img src="../../architecture/img/bsvblockchain_logo.svg" alt="logo">

    </a>
    Teranode
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/developers/forkAndPullRequestGuidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fork and Pull Request Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/developers/developerSetup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/miners/minersGettingStarted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Miners Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-To Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-To Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/locallyRunningServices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running Services Locally
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/howToRemoteDebugTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging Teranode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/generatingProtobuf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generating Protobuf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/addingNewProtobufServices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding Protobuf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/configuringGrpcLogging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring gRPC Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/runningTests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running Tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/automatedTestingHowTo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automated Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/chain-integrity-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chain Integrity Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/makefile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Makefile Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/bugReporting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bug Reporting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/developersHowToTeranodeCLI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer's Guide to Teranode-CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Miners
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            Miners
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_1" >
        
          
          <label class="md-nav__link" for="__nav_3_12_1" id="__nav_3_12_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_1">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToInstallation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToInstallation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToInstallationDeprecated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deprecated
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_2" >
        
          
          <label class="md-nav__link" for="__nav_3_12_2" id="__nav_3_12_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_2">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToConfigureTheNode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToConfigureTheNode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToAerospikeTuning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aerospike Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToInteractWithAssetServer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asset Server Interaction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToInteractWithFSM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FSM Interaction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToInteractWithRPCServer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RPC Server Interaction
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_3" >
        
          
          <label class="md-nav__link" for="__nav_3_12_3" id="__nav_3_12_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Start/Stop
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_3">
            <span class="md-nav__icon md-icon"></span>
            Start/Stop
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToStopStartDockerTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToStopStartKubernetesTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_4" >
        
          
          <label class="md-nav__link" for="__nav_3_12_4" id="__nav_3_12_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Updating Teranode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_4">
            <span class="md-nav__icon md-icon"></span>
            Updating Teranode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersUpdatingTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersUpdatingTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_5" >
        
          
          <label class="md-nav__link" for="__nav_3_12_5" id="__nav_3_12_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Security Best Practices
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_5">
            <span class="md-nav__icon md-icon"></span>
            Security Best Practices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersSecurityBestPractices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersSecurityBestPractices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_6" >
        
          
          <label class="md-nav__link" for="__nav_3_12_6" id="__nav_3_12_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_6">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToTroubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToTroubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_7" >
        
          
          <label class="md-nav__link" for="__nav_3_12_7" id="__nav_3_12_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reset Teranode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_7">
            <span class="md-nav__icon md-icon"></span>
            Reset Teranode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToResetTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToResetTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_8" >
        
          
          <label class="md-nav__link" for="__nav_3_12_8" id="__nav_3_12_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sync the Node
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_8">
            <span class="md-nav__icon md-icon"></span>
            Sync the Node
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToSyncTheNode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToSyncTheNode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_9" >
        
          
          <label class="md-nav__link" for="__nav_3_12_9" id="__nav_3_12_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Additional
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_9">
            <span class="md-nav__icon md-icon"></span>
            Additional
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToBackup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup Teranode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToCPUMiner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CPU Mining Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToTeranodeCLI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teranode CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersManagingDiskSpace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing Disk Space
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToUseListenMode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Listen Mode
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" checked>
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Key Topics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Key Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teranodeIntro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teranode Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/teranode-overall-system-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/teranode-architecture-brief/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Brief
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/teranode-microservices-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Microservices Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../transactionLifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transaction Lifecycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/stateManagement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    State Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../state-machine.diagram/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    State Machine Diagram
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../architecture/understandingDoubleSpends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding Double Spends
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../technologyStack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technology Stack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../understandingTheTestingFramework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding the Testing Framework
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../functionalRequirementTests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functional Requirement Tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_12" >
        
          
          <label class="md-nav__link" for="__nav_4_12" id="__nav_4_12_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_12">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../features/two_phase_commit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Two Phase Commit
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_13" >
        
          
          <label class="md-nav__link" for="__nav_4_13" id="__nav_4_13_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Core Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_13">
            <span class="md-nav__icon md-icon"></span>
            Core Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/alert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alert Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/assetServer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asset Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/blockAssembly/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Assembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/blockValidation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/blockchain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blockchain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/propagation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Propagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/subtreeValidation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/validator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_14" >
        
          
          <label class="md-nav__link" for="__nav_4_14" id="__nav_4_14_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Overlay Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_14">
            <span class="md-nav__icon md-icon"></span>
            Overlay Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/blockPersister/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Persister
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/p2p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../P2P_NAT_TRAVERSAL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P NAT Traversal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/legacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Legacy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/rpc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RPC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../services/utxoPersister/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Persister
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_15" checked>
        
          
          <label class="md-nav__link" for="__nav_4_15" id="__nav_4_15_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Stores
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_15_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_4_15">
            <span class="md-nav__icon md-icon"></span>
            Stores
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blob/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blob Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    UTXO Store
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    UTXO Store
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      Index
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-description" class="md-nav__link">
    <span class="md-ellipsis">
      1. Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      2. Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utxo-store-operations-flow" class="md-nav__link">
    <span class="md-ellipsis">
      UTXO Store Operations Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-utxo-data-model" class="md-nav__link">
    <span class="md-ellipsis">
      3. UTXO: Data Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. UTXO: Data Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-what-is-an-utxo" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. What is an UTXO?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-how-are-utxos-stored" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. How are UTXOs stored?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-utxo-meta-data" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. UTXO Meta Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      4. Use Cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-asset-server" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Asset Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-block-persister" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Block Persister
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-block-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. Block Assembly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-block-validation" class="md-nav__link">
    <span class="md-ellipsis">
      4.4. Block Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-subtree-validation" class="md-nav__link">
    <span class="md-ellipsis">
      4.5. Subtree Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46-transaction-validator" class="md-nav__link">
    <span class="md-ellipsis">
      4.6. Transaction Validator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#47-utxo-batch-processing-and-external-storage-mode" class="md-nav__link">
    <span class="md-ellipsis">
      4.7. UTXO Batch Processing and External Storage mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#48-alert-system-and-utxo-management" class="md-nav__link">
    <span class="md-ellipsis">
      4.8. Alert System and UTXO Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#49-unmined-transaction-management" class="md-nav__link">
    <span class="md-ellipsis">
      4.9. Unmined Transaction Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-technology" class="md-nav__link">
    <span class="md-ellipsis">
      5. Technology
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Technology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-language-and-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      5.1. Language and Libraries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-data-stores" class="md-nav__link">
    <span class="md-ellipsis">
      5.2. Data Stores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-data-purging" class="md-nav__link">
    <span class="md-ellipsis">
      5.3. Data Purging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-performance-optimizations" class="md-nav__link">
    <span class="md-ellipsis">
      6. Performance Optimizations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Performance Optimizations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-shared-buffer-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      6.1. Shared Buffer Optimization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1. Shared Buffer Optimization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How It Works
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Benefits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-details" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Details
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-directory-structure-and-main-files" class="md-nav__link">
    <span class="md-ellipsis">
      7. Directory Structure and Main Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-running-the-store-locally" class="md-nav__link">
    <span class="md-ellipsis">
      8. Running the Store Locally
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Running the Store Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-run" class="md-nav__link">
    <span class="md-ellipsis">
      How to run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-configuration-and-settings" class="md-nav__link">
    <span class="md-ellipsis">
      9. Configuration and Settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-other-resources" class="md-nav__link">
    <span class="md-ellipsis">
      10. Other Resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_16" >
        
          
          <label class="md-nav__link" for="__nav_4_16" id="__nav_4_16_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Data Model
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_16">
            <span class="md-nav__icon md-icon"></span>
            Data Model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datamodel/block_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datamodel/block_header_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Header Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datamodel/subtree_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datamodel/transaction_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transaction Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../datamodel/utxo_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_17" >
        
          
          <label class="md-nav__link" for="__nav_4_17" id="__nav_4_17_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Kafka
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_17">
            <span class="md-nav__icon md-icon"></span>
            Kafka
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kafka/kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_18" >
        
          
          <label class="md-nav__link" for="__nav_4_18" id="__nav_4_18_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_18">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../commands/seeder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seeder
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/projectStructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    API & Protobuf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            API & Protobuf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/errorHandling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Handling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/codingConventions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coding Conventions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/kafkaMessageFormat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka Message Format
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/networkConsensusRules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Consensus Rules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_6" >
        
          
          <label class="md-nav__link" for="__nav_5_2_6" id="__nav_5_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Protobuf API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_6">
            <span class="md-nav__icon md-icon"></span>
            Protobuf API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/protobuf_docs/alertProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alert Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/protobuf_docs/blockassemblyProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Assembly Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/protobuf_docs/blockchainProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blockchain Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/protobuf_docs/blockvalidationProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Validation Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/protobuf_docs/propagationProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Propagation Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/protobuf_docs/subtreevalidationProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Validation Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/protobuf_docs/validatorProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validator Proto
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_3" >
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Core Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/alert_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alert Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/asset_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asset Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/blockassembly_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Assembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/blockvalidation_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/blockchain_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blockchain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/propagation_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Propagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/subtreevalidation_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/validator_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overlay Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Overlay Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/blockpersister_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Persister
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/p2p_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/legacy_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P Legacy Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/rpc_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RPC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/services/utxopersister_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Persister
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Stores
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            Stores
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/stores/blob_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blob Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/stores/utxo_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Store
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/kafka_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6_4" >
        
          
          <label class="md-nav__link" for="__nav_5_6_4" id="__nav_5_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Service Settings
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_4">
            <span class="md-nav__icon md-icon"></span>
            Service Settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/alert_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alert
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/asset_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asset Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/blockassembly_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Assembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/blockchain_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blockchain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/blockpersister_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Persister
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/blockvalidation_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/legacy_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Legacy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/p2p_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/propagation_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Propagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/rpc_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RPC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/subtreevalidation_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/utxopersister_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Persister
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/services/validator_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6_5" >
        
          
          <label class="md-nav__link" for="__nav_5_6_5" id="__nav_5_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Store Settings
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_5">
            <span class="md-nav__icon md-icon"></span>
            Store Settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/stores/blob_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blob Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/settings/stores/utxo_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Store
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            Miscellaneous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../misc/BIP-239/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BIP-239 (Transaction Extended Format)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/gitCommitSigningSetupGuide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Commit Signing Setup Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/licenseInformation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Licensing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/prometheusMetrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/teranodeDaemonReference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teranode Daemon Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/testingTechnicalReference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing Technical Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../references/thirdPartySoftwareRequirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Third-Party Software Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#index" class="md-nav__link">
    <span class="md-ellipsis">
      Index
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#1-description" class="md-nav__link">
    <span class="md-ellipsis">
      1. Description
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#2-architecture" class="md-nav__link">
    <span class="md-ellipsis">
      2. Architecture
    </span>
  </a>
  
    <nav class="md-nav" aria-label="2. Architecture">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#utxo-store-operations-flow" class="md-nav__link">
    <span class="md-ellipsis">
      UTXO Store Operations Flow
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#3-utxo-data-model" class="md-nav__link">
    <span class="md-ellipsis">
      3. UTXO: Data Model
    </span>
  </a>
  
    <nav class="md-nav" aria-label="3. UTXO: Data Model">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#31-what-is-an-utxo" class="md-nav__link">
    <span class="md-ellipsis">
      3.1. What is an UTXO?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#32-how-are-utxos-stored" class="md-nav__link">
    <span class="md-ellipsis">
      3.2. How are UTXOs stored?
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#33-utxo-meta-data" class="md-nav__link">
    <span class="md-ellipsis">
      3.3. UTXO Meta Data
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#4-use-cases" class="md-nav__link">
    <span class="md-ellipsis">
      4. Use Cases
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Use Cases">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#41-asset-server" class="md-nav__link">
    <span class="md-ellipsis">
      4.1. Asset Server
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#42-block-persister" class="md-nav__link">
    <span class="md-ellipsis">
      4.2. Block Persister
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#43-block-assembly" class="md-nav__link">
    <span class="md-ellipsis">
      4.3. Block Assembly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#44-block-validation" class="md-nav__link">
    <span class="md-ellipsis">
      4.4. Block Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#45-subtree-validation" class="md-nav__link">
    <span class="md-ellipsis">
      4.5. Subtree Validation
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#46-transaction-validator" class="md-nav__link">
    <span class="md-ellipsis">
      4.6. Transaction Validator
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#47-utxo-batch-processing-and-external-storage-mode" class="md-nav__link">
    <span class="md-ellipsis">
      4.7. UTXO Batch Processing and External Storage mode
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#48-alert-system-and-utxo-management" class="md-nav__link">
    <span class="md-ellipsis">
      4.8. Alert System and UTXO Management
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#49-unmined-transaction-management" class="md-nav__link">
    <span class="md-ellipsis">
      4.9. Unmined Transaction Management
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#5-technology" class="md-nav__link">
    <span class="md-ellipsis">
      5. Technology
    </span>
  </a>
  
    <nav class="md-nav" aria-label="5. Technology">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#51-language-and-libraries" class="md-nav__link">
    <span class="md-ellipsis">
      5.1. Language and Libraries
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#52-data-stores" class="md-nav__link">
    <span class="md-ellipsis">
      5.2. Data Stores
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#53-data-purging" class="md-nav__link">
    <span class="md-ellipsis">
      5.3. Data Purging
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#6-performance-optimizations" class="md-nav__link">
    <span class="md-ellipsis">
      6. Performance Optimizations
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6. Performance Optimizations">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#61-shared-buffer-optimization" class="md-nav__link">
    <span class="md-ellipsis">
      6.1. Shared Buffer Optimization
    </span>
  </a>
  
    <nav class="md-nav" aria-label="6.1. Shared Buffer Optimization">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-it-works" class="md-nav__link">
    <span class="md-ellipsis">
      How It Works
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#performance-benefits" class="md-nav__link">
    <span class="md-ellipsis">
      Performance Benefits
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#implementation-details" class="md-nav__link">
    <span class="md-ellipsis">
      Implementation Details
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#7-directory-structure-and-main-files" class="md-nav__link">
    <span class="md-ellipsis">
      7. Directory Structure and Main Files
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#8-running-the-store-locally" class="md-nav__link">
    <span class="md-ellipsis">
      8. Running the Store Locally
    </span>
  </a>
  
    <nav class="md-nav" aria-label="8. Running the Store Locally">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#how-to-run" class="md-nav__link">
    <span class="md-ellipsis">
      How to run
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#9-configuration-and-settings" class="md-nav__link">
    <span class="md-ellipsis">
      9. Configuration and Settings
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#10-other-resources" class="md-nav__link">
    <span class="md-ellipsis">
      10. Other Resources
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="utxo-store"> UTXO Store</h1>
<h2 id="index">Index</h2>
<ol>
<li><a href="#1-description">Description</a></li>
<li><a href="#2-architecture">Architecture</a></li>
<li><a href="#3-utxo-data-model">UTXO: Data Model</a><ul>
<li><a href="#31-what-is-an-utxo">3.1. What is an UTXO?</a></li>
<li><a href="#32-how-are-utxos-stored">3.2. How are UTXOs stored?</a></li>
<li><a href="#33-utxo-meta-data">3.3. UTXO Meta Data</a></li>
</ul>
</li>
<li><a href="#4-use-cases">Use Cases</a><ul>
<li><a href="#41-asset-server">4.1. Asset Server</a></li>
<li><a href="#42-block-persister">4.2. Block Persister</a></li>
<li><a href="#43-block-assembly">4.3. Block Assembly</a></li>
<li><a href="#44-block-validation">4.4. Block Validation</a></li>
<li><a href="#45-subtree-validation">4.5. Subtree Validation</a></li>
<li><a href="#46-transaction-validator">4.6. Transaction Validator</a></li>
<li><a href="#47-utxo-batch-processing-and-external-storage-mode">4.7. UTXO Batch Processing and External Storage mode</a></li>
<li><a href="#48-alert-system-and-utxo-management">4.8. Alert System and UTXO Management</a></li>
<li><a href="#49-unmined-transaction-management">4.9. Unmined Transaction Management</a></li>
</ul>
</li>
<li><a href="#5-technology">Technology</a><ul>
<li><a href="#51-language-and-libraries">5.1. Language and Libraries</a></li>
<li><a href="#52-data-stores">5.2. Data Stores</a></li>
<li><a href="#53-data-purging">5.3. Data Purging</a></li>
</ul>
</li>
<li><a href="#6-performance-optimizations">Performance Optimizations</a><ul>
<li><a href="#61-shared-buffer-optimization">6.1. Shared Buffer Optimization</a></li>
</ul>
</li>
<li><a href="#7-directory-structure-and-main-files">Directory Structure and Main Files</a></li>
<li><a href="#8-running-the-store-locally">Running the Store Locally</a><ul>
<li><a href="#how-to-run">How to run</a></li>
</ul>
</li>
<li><a href="#9-configuration-and-settings">Configuration and Settings</a></li>
<li><a href="#10-other-resources">Other Resources</a></li>
</ol>
<h2 id="1-description">1. Description</h2>
<p>The UTXO set represents the current state of ownership of all Satoshi tokens in existence. Except for Coinbase transactions, every other valid transaction spends at least one UTXO and creates zero or more new UTXOs, plus zero or more locked outputs. The UTXOs that are being spent come from previously successful transactions, and these may be recorded in the current or a previous block. An unspent output may be created and spent in a few milliseconds, or it may remain unspent for decades, meaning that the unspent outputs must persist for as long as they remain unspent.</p>
<p>The UTXO Store is responsible for tracking spendable UTXOs (the UTXO set), based on the longest <em>honest</em> chain-tip in the network. These are UTXOs that can be used as inputs in new transactions. The UTXO Store is an internal datastore used by some of the services, such as the Asset Server, the TX Validator and the Block Assembly. The main purpose of this store is to maintain the UTXO data on behalf of other micro-services.</p>
<p>It handles the core functionalities of the UTXO Store:</p>
<ul>
<li><strong>Health</strong>: Check the health status of the UTXO store service.</li>
<li><strong>Get</strong>: Retrieve a specific UTXO.</li>
<li><strong>GetMeta</strong>: Retrieve a specific UTXO meta data.</li>
<li><strong>Create</strong>: Add new UTXOs to the store.</li>
<li><strong>Spend/Unspend</strong>: Mark UTXOs as spent or reverse such markings, respectively.</li>
<li><strong>Delete</strong>: Remove UTXOs from the store.</li>
<li><strong>Block Height Management</strong>: Set and retrieve the current blockchain height, which can be crucial for determining the spendability of certain UTXOs based on locktime conditions.</li>
<li><strong>FreezeUTXOs / UnFreezeUTXOs</strong>: Mark UTXOs as frozen or unfrozen, in scenarios involving alert systems or temporary holds on specific UTXOs.</li>
<li><strong>ReAssignUTXO</strong>: Reassign a UTXO to a different owner.</li>
</ul>
<p><strong>Principles</strong>:</p>
<ul>
<li>All operations are atomic.</li>
<li>All data is shared across servers with standard sharing algorithms.</li>
<li>In production, the data is stored in a Master and Replica configuration.</li>
<li>No centralised broker - all clients know where each hash is stored.</li>
<li>No cross-transaction state is stored.</li>
</ul>
<p>The UTXO Store includes functionality to <strong>freeze</strong> and <strong>unfreeze</strong> UTXOs, as well as <strong>re-assign</strong> them.</p>
<ul>
<li>BSV is the only blockchain that allows legal recourse for lost asset (token) recovery to legally rightful owners by design. The Alert System can also freeze assets based on court injunctions and legal notices.</li>
<li>Teranode must be able to re-assign (a set of) UTXO(s) to another (specified) address at a specified block height.</li>
</ul>
<h2 id="2-architecture">2. Architecture</h2>
<p>The UTXO Store is a micro-service that is used by other micro-services to retrieve or store / modify UTXOs.</p>
<p><img alt="UTXO_Store_Container_Context_Diagram.png" src="../../services/img/UTXO_Store_Container_Context_Diagram.png" /></p>
<p>The UTXO Store uses a number of different datastores, either in-memory or persistent, to store the UTXOs.</p>
<p><img alt="UTXO_Store_Component_Context_Diagram.png" src="../../services/img/UTXO_Store_Component_Context_Diagram.png" /></p>
<h3 id="utxo-store-operations-flow">UTXO Store Operations Flow</h3>
<p>The following diagram illustrates the complete flow of UTXO operations across all services, including transaction validation, conflict resolution, block mining, reorganization handling, alert system operations, and subtree validation:</p>
<p><img alt="utxo_operations_flow.svg" src="../../services/img/plantuml/utxo/utxo_operations_flow.svg" /></p>
<p>The UTXO store implementation is consistent within a Teranode node (every service connects to the same specific implementation), and it is defined via settings (<code>utxostore</code>), as it can be seen in the following code fragment (<code>main.go</code>):</p>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">getUtxoStore</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">logger</span><span class="w"> </span><span class="nx">ulogger</span><span class="p">.</span><span class="nx">Logger</span><span class="p">)</span><span class="w"> </span><span class="nx">utxostore</span><span class="p">.</span><span class="nx">Interface</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">utxoStore</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="nx">utxoStore</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="nx">utxoStoreURL</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="p">,</span><span class="w"> </span><span class="nx">found</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">gocore</span><span class="p">.</span><span class="nx">Config</span><span class="p">().</span><span class="nx">GetURL</span><span class="p">(</span><span class="s">&quot;utxostore&quot;</span><span class="p">)</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="p">!</span><span class="nx">found</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">panic</span><span class="p">(</span><span class="s">&quot;no utxostore setting found&quot;</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>
<span class="w"> </span><span class="nx">utxoStore</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nx">utxo_factory</span><span class="p">.</span><span class="nx">NewStore</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span><span class="w"> </span><span class="nx">logger</span><span class="p">,</span><span class="w"> </span><span class="nx">utxoStoreURL</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;main&quot;</span><span class="p">)</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="nb">panic</span><span class="p">(</span><span class="nx">err</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">utxoStore</span>
<span class="p">}</span>
</code></pre></div>
<p>The following diagram provides a deeper level of detail into the UTXO Store's internal components and their interactions:</p>
<p><img alt="utxo_store_detailed_component.svg" src="../../services/img/plantuml/utxo/utxo_store_detailed_component.svg" /></p>
<p>The following datastores are supported (either in development / experimental or production mode):</p>
<ol>
<li>
<p><strong>Aerospike</strong>.</p>
</li>
<li>
<p><strong>Memory (In-Memory Store)</strong>.</p>
</li>
<li>
<p><strong>Sql</strong> (Postgres and SQLLite).</p>
</li>
<li>
<p><strong>Nullstore</strong>.</p>
</li>
</ol>
<p>Notice how SqlLite and the In-Memory store are in-memory, while Aerospike and Postgres are persistent (and shared with other services).</p>
<p>More details about the specific stores can be found in the <a href="#5-technology">Technology</a> section.</p>
<h2 id="3-utxo-data-model">3. UTXO: Data Model</h2>
<h3 id="31-what-is-an-utxo">3.1. What is an UTXO?</h3>
<p>The Teranode UTXO is no different from Bitcoin UTXO. The following is a description of the Bitcoin UTXO model, focusing on the BSV implementation:</p>
<ul>
<li><strong>Transaction Outputs</strong>: When a transaction occurs on the blockchain, it creates "transaction outputs," which are essentially chunks of cryptocurrency value. Each output specifies an amount and a condition under which it can be spent (a cryptographic script key that the receiver owns).</li>
</ul>
<p>Under the external library <code>github.com/ordishs/go-bt/output.go</code>, we can see the structure of a transaction output.</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">Output</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="nx">Satoshis</span><span class="w">      </span><span class="kt">uint64</span><span class="w">          </span><span class="s">`json:&quot;satoshis&quot;`</span>
<span class="w"> </span><span class="nx">LockingScript</span><span class="w"> </span><span class="o">*</span><span class="nx">bscript</span><span class="p">.</span><span class="nx">Script</span><span class="w"> </span><span class="s">`json:&quot;locking_script&quot;`</span>
<span class="p">}</span>
</code></pre></div>
<p>Components of the <code>Output</code> struct:</p>
<ol>
<li>
<p><strong>Satoshis (<code>uint64</code>)</strong>:</p>
<ul>
<li>The amount of BSV cryptocurrency associated with this output.</li>
<li>The unit "Satoshis" refers to the smallest unit of Bitcoin (1 Bitcoin = 100 million Satoshis).</li>
</ul>
</li>
<li>
<p><strong>LockingScript (<code>*bscript.Script</code>)</strong>:</p>
<ul>
<li>This field represents the conditions that must be met to spend the Satoshis in this output.</li>
<li>The <code>LockingScript</code>, often referred to as the "scriptPubKey" in Bitcoin's technical documentation, is a script written in Bitcoin's scripting language.</li>
<li>This script contains cryptographic conditions to unlock the funds.</li>
</ul>
</li>
</ol>
<p>Equally, we can see how a list of outputs is part of a transaction (<code>github.com/ordishs/go-bt/tx.go</code>):</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">Tx</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="nx">Inputs</span><span class="w">   </span><span class="p">[]</span><span class="o">*</span><span class="nx">Input</span><span class="w">  </span><span class="s">`json:&quot;inputs&quot;`</span>
<span class="w"> </span><span class="nx">Outputs</span><span class="w">  </span><span class="p">[]</span><span class="o">*</span><span class="nx">Output</span><span class="w"> </span><span class="s">`json:&quot;outputs&quot;`</span>
<span class="w"> </span><span class="nx">Version</span><span class="w">  </span><span class="kt">uint32</span><span class="w">    </span><span class="s">`json:&quot;version&quot;`</span>
<span class="w"> </span><span class="nx">LockTime</span><span class="w"> </span><span class="kt">uint32</span><span class="w">    </span><span class="s">`json:&quot;locktime&quot;`</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li><strong>Unspent Transaction Outputs (UTXOs)</strong>: A UTXO is a transaction output that hasn't been used as an input in a new transaction.</li>
</ul>
<p>When a transaction occurs, it consumes one or more UTXOs as inputs and creates new UTXOs as outputs. The sum of the input UTXOs represents the total amount of Bitcoin being transferred, and the outputs represent the distribution of this amount after the transaction.</p>
<p>To "own" bitcoins means to control UTXOs on the blockchain that can be spent by the user (i.e., the user has the private key to unlock these UTXOs).</p>
<p>When a user creates a new transaction, the transaction references these UTXOs as inputs, proving his ownership by fulfilling the spending conditions set in these UTXOs (signing the transaction with the user's private key).</p>
<p>Independent UTXOs can be processed in parallel, potentially improving the efficiency of transaction validation.</p>
<p>UTXOs now have an additional state: frozen. A frozen UTXO cannot be spent until it is unfrozen.</p>
<p>To know more about UTXOs, please check <a href="https://protocol.bsvblockchain.org/transaction-lifecycle/transaction-inputs-and-outputs">https://protocol.bsvblockchain.org/transaction-lifecycle/transaction-inputs-and-outputs</a>.</p>
<h3 id="32-how-are-utxos-stored">3.2. How are UTXOs stored?</h3>
<p>When storing the UTXOs (Unspent Transaction Outputs) associated to a given Tx in Aerospike (see <code>stores/utxo/aerospike/aerospike.go</code>, our primary persisted datastore, the following information is kept:</p>
<ol>
<li>
<p><strong>Inputs</strong>: The transaction inputs, represented as a slice of byte arrays (<code>inputs</code> bin). Each input includes the previous transaction output it spends from, as well as additional data such as the script and satoshis amount.</p>
</li>
<li>
<p><strong>Outputs</strong>: The transaction outputs, represented as a slice of byte arrays (<code>outputs</code> bin). Each output contains the value in satoshis and the locking script.</p>
</li>
<li>
<p><strong>Version</strong>: The version number of the transaction (<code>version</code> bin).</p>
</li>
<li>
<p><strong>Fee</strong>: The fee associated with the transaction (<code>fee</code> bin).</p>
</li>
<li>
<p><strong>Size in Bytes</strong>: The size of the transaction in bytes (<code>sizeInBytes</code> bin).</p>
</li>
<li>
<p><strong>UTXOs</strong>: A map representing the UTXOs associated with this transaction (<code>utxos</code> bin). The keys are the UTXO hashes, and the values are empty strings initially. The values will be populated, once the UTXO is spent, with the spending Tx Id.</p>
</li>
<li>
<p><strong>Number of UTXOs</strong>: The number of UTXOs in the <code>utxos</code> map (<code>recordUtxos</code> bin).</p>
</li>
<li>
<p><strong>Spent UTXOs</strong>: A counter for the number of UTXOs that have been spent (<code>spentUtxos</code> bin).</p>
</li>
<li>
<p><strong>Block IDs</strong>: The IDs of the blocks that include this transaction (<code>blockIDs</code> bin).</p>
</li>
<li>
<p><strong>Coinbase Flag</strong>: A boolean indicating whether this transaction is a coinbase transaction (<code>isCoinbase</code> bin).</p>
</li>
</ol>
<p>These bins collectively store the necessary data to track the transaction's inputs, outputs, and its state within the blockchain.</p>
<p>Once the UTXO is spent, the spending tx_id will be saved.</p>
<ul>
<li>
<p>To compute the hash of the key, the caller must know the complete data and calculate the hash before calling the API.</p>
</li>
<li>
<p>The hashing logic can be found in <code>UTXOHash.go</code>:</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">UTXOHash</span><span class="p">(</span><span class="nx">previousTxid</span><span class="w"> </span><span class="o">*</span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span><span class="p">,</span><span class="w"> </span><span class="nx">index</span><span class="w"> </span><span class="kt">uint32</span><span class="p">,</span><span class="w"> </span><span class="nx">lockingScript</span><span class="w"> </span><span class="p">[]</span><span class="kt">byte</span><span class="p">,</span><span class="w"> </span><span class="nx">satoshis</span><span class="w"> </span><span class="kt">uint64</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nb">len</span><span class="p">(</span><span class="nx">lockingScript</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;locking script is nil&quot;</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">satoshis</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">0</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;satoshis is 0&quot;</span><span class="p">)</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="nx">utxoHash</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nb">make</span><span class="p">([]</span><span class="kt">byte</span><span class="p">,</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="mi">256</span><span class="p">)</span>
<span class="w"> </span><span class="nx">utxoHash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">utxoHash</span><span class="p">,</span><span class="w"> </span><span class="nx">previousTxid</span><span class="p">.</span><span class="nx">CloneBytes</span><span class="p">()</span><span class="o">...</span><span class="p">)</span>
<span class="w"> </span><span class="nx">utxoHash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">utxoHash</span><span class="p">,</span><span class="w"> </span><span class="nx">bt</span><span class="p">.</span><span class="nx">VarInt</span><span class="p">(</span><span class="nx">index</span><span class="p">).</span><span class="nx">Bytes</span><span class="p">()</span><span class="o">...</span><span class="p">)</span>
<span class="w"> </span><span class="nx">utxoHash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">utxoHash</span><span class="p">,</span><span class="w"> </span><span class="nx">lockingScript</span><span class="o">...</span><span class="p">)</span>
<span class="w"> </span><span class="nx">utxoHash</span><span class="w"> </span><span class="p">=</span><span class="w"> </span><span class="nb">append</span><span class="p">(</span><span class="nx">utxoHash</span><span class="p">,</span><span class="w"> </span><span class="nx">bt</span><span class="p">.</span><span class="nx">VarInt</span><span class="p">(</span><span class="nx">satoshis</span><span class="p">).</span><span class="nx">Bytes</span><span class="p">()</span><span class="o">...</span><span class="p">)</span>

<span class="w"> </span><span class="nx">hash</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">crypto</span><span class="p">.</span><span class="nx">Sha256</span><span class="p">(</span><span class="nx">utxoHash</span><span class="p">)</span>
<span class="w"> </span><span class="nx">chHash</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">:=</span><span class="w"> </span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">NewHash</span><span class="p">(</span><span class="nx">hash</span><span class="p">)</span>
<span class="w"> </span><span class="k">if</span><span class="w"> </span><span class="nx">err</span><span class="w"> </span><span class="o">!=</span><span class="w"> </span><span class="kc">nil</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="kc">nil</span><span class="p">,</span><span class="w"> </span><span class="nx">err</span>
<span class="w"> </span><span class="p">}</span>

<span class="w"> </span><span class="k">return</span><span class="w"> </span><span class="nx">chHash</span><span class="p">,</span><span class="w"> </span><span class="kc">nil</span>
<span class="p">}</span>
</code></pre></div>
<ul>
<li>The existence of the key confirms the details of the UTXO are the same as what the caller has.</li>
</ul>
<h3 id="33-utxo-meta-data">3.3. UTXO Meta Data</h3>
<p>The <code>Data</code> struct (<code>stores/utxo/meta/data.go</code>), referred moving forward as <code>UTXO Meta Data</code>, provides a convenience structure to retrieve meta data associated to a transaction out of the UTXO Store.</p>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">Data</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w"> </span><span class="nx">Tx</span><span class="w">             </span><span class="o">*</span><span class="nx">bt</span><span class="p">.</span><span class="nx">Tx</span><span class="w">           </span><span class="s">`json:&quot;tx&quot;`</span>
<span class="w"> </span><span class="nx">ParentTxHashes</span><span class="w"> </span><span class="p">[]</span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span><span class="w"> </span><span class="s">`json:&quot;parentTxHashes&quot;`</span>
<span class="w"> </span><span class="nx">BlockIDs</span><span class="w">       </span><span class="p">[]</span><span class="kt">uint32</span><span class="w">         </span><span class="s">`json:&quot;blockIDs&quot;`</span>
<span class="w"> </span><span class="nx">Fee</span><span class="w">            </span><span class="kt">uint64</span><span class="w">           </span><span class="s">`json:&quot;fee&quot;`</span>
<span class="w"> </span><span class="nx">SizeInBytes</span><span class="w">    </span><span class="kt">uint64</span><span class="w">           </span><span class="s">`json:&quot;sizeInBytes&quot;`</span>
<span class="w"> </span><span class="nx">IsCoinbase</span><span class="w">     </span><span class="kt">bool</span><span class="w">             </span><span class="s">`json:&quot;isCoinbase&quot;`</span>
<span class="w"> </span><span class="nx">LockTime</span><span class="w">       </span><span class="kt">uint32</span><span class="w">           </span><span class="s">`json:&quot;lockTime&quot;`</span><span class="w"> </span><span class="c1">// lock time can be different from the transaction lock time, for instance in coinbase transactions</span>
<span class="p">}</span>
</code></pre></div>
<p>This is widely used by all services, given it is a comprehensive set of data going well beyond the extended Tx data set.</p>
<p>To know more about the UTXO data model, please refer to the <a href="../../datamodel/utxo_data_model/">UTXO Data Model documentation</a>.</p>
<h2 id="4-use-cases">4. Use Cases</h2>
<h3 id="41-asset-server">4.1. Asset Server</h3>
<p><img alt="utxo_asset_service_diagram.svg" src="../../services/img/plantuml/utxo/utxo_asset_service_diagram.svg" /></p>
<ol>
<li>The <strong>UI Dashboard</strong> sends a request to the AssetService for UTXO data.</li>
<li>The <strong>AssetService</strong> forwards this request to the <strong>UTXO Store</strong>.</li>
<li>The <strong>UTXO Store</strong> interacts with the underlying <strong>Datastore</strong> implementation to fetch the requested UTXO data and check the health status of the store.</li>
<li>The <strong>Datastore</strong> implementation returns the UTXO data and health status to the UTXO Store.</li>
<li>The UTXO Store sends this information back to the AssetService.</li>
<li>Finally, the AssetService responds back to the UI Dashboard.</li>
</ol>
<p>To know more about the AssetService, please check its specific service documentation.</p>
<h3 id="42-block-persister">4.2. Block Persister</h3>
<p><img alt="utxo_block_persister_service_diagram.svg" src="../../services/img/plantuml/utxo/utxo_block_persister_service_diagram.svg" /></p>
<ol>
<li>
<p>The Block Persister service persists the block data to disk. As part of this job, it retrieves the utxo meta data for each Tx in each subtree in each block, and dumps it to the storage.</p>
</li>
<li>
<p>Depending on the settings Block Persister operates under, the persister will request the utxo meta data in batches or one by one. In general, and depending on the specific UTXO store implementation, the batched processing is more efficient.</p>
</li>
</ol>
<h3 id="43-block-assembly">4.3. Block Assembly</h3>
<p><img alt="utxo_block_assembly.svg" src="../../services/img/plantuml/utxo/utxo_block_assembly.svg" /></p>
<p>Coinbase Transaction creation (UTXO step):</p>
<ol>
<li>The <strong>Block Assembly</strong> service (see <code>SubtreeProcessor.go</code>, <code>processCoinbaseUtxos</code> method) creates a new Coinbase transaction.</li>
<li>The <strong>Block Assembly</strong> service sends a request to the <strong>UTXO Store</strong> to store the Coinbase UTXO.</li>
<li>The <strong>UTXO Store</strong> interacts with the underlying <strong>Datastore</strong> implementation to store the Coinbase UTXO.</li>
</ol>
<p>Coinbase Transaction deletion (UTXO step):</p>
<ol>
<li>The <strong>Block Assembly</strong> service (see <code>SubtreeProcessor.go</code>, `` method)  deletes the Coinbase transaction. This is done when blocks are reorganised and previously tracked coinbase transactions lose validity.</li>
<li>The <strong>Block Assembly</strong> service sends a request to the <strong>UTXO Store</strong> to delete the Coinbase UTXO.</li>
<li>The <strong>UTXO Store</strong> interacts with the underlying <strong>Datastore</strong> implementation to delete the Coinbase UTXO.</li>
</ol>
<p>To know more about the Block Assembly, please check its specific service documentation.</p>
<h3 id="44-block-validation">4.4. Block Validation</h3>
<p><img alt="utxo_block_validation.svg" src="../../services/img/plantuml/utxo/utxo_block_validation.svg" /></p>
<ol>
<li>The <strong>Block Validator</strong> service validates the block by checking the integrity of the transactions and UTXOs.</li>
<li>Once a block is validated, the <strong>Block Validator</strong> service stores the coinbase tx and their associated UTXO data in the <strong>UTXO Store</strong>.</li>
<li>The <strong>UTXO Store</strong> interacts with the underlying <strong>Datastore</strong> implementation to store the coinbase tx and UTXO data.</li>
</ol>
<h3 id="45-subtree-validation">4.5. Subtree Validation</h3>
<p><img alt="utxo_subtree_validation_service_diagram.svg" src="../../services/img/plantuml/utxo/utxo_subtree_validation_service_diagram.svg" /></p>
<p>In order to validate subtrees, the Subtree Validation service will retrieve the UTXO meta data for each tx in the subtree. This is done by sending a request to the UTXO Store, either in batches or one by one, depending on the settings.</p>
<h3 id="46-transaction-validator">4.6. Transaction Validator</h3>
<p><img alt="utxo_transaction_validator.svg" src="../../services/img/plantuml/utxo/utxo_transaction_validator.svg" /></p>
<p>The Transaction Validator uses the UTXO Store to perform a number of UTXO related operations:</p>
<ol>
<li>Obtain the current block height from the <strong>UTXO Store</strong>.</li>
<li>Mark a UTXO as spent. If needed, it can also request to unspend (revert) a UTXO.</li>
<li>Store and delete new UTXOs.</li>
<li>Retrieve previous outputs UTXO data.</li>
</ol>
<p>When marking a UTXO as spent, the store will check if the UTXO is known (by its hash), and whether it is spent or not. If it is spent, we will return one response message or another depending on whether the spending tx_id matches. See here:</p>
<p><img alt="utxo_spend_process.svg" src="../../services/img/plantuml/utxo/utxo_spend_process.svg" /></p>
<p>Also notice how no transaction can be spent if frozen.</p>
<p>On the other hand, we can see the process for unspending an UTXO here:</p>
<p><img alt="utxo_unspend_process.svg" src="../../services/img/plantuml/utxo/utxo_unspend_process.svg" /></p>
<p>To know more about the Transaction Validator, please check its specific service documentation.</p>
<h3 id="47-utxo-batch-processing-and-external-storage-mode">4.7. UTXO Batch Processing and External Storage mode</h3>
<p>Aerospike is the primary datastore for the UTXO store. However, to overcome Aerospike's record size limitation of 1MB, the system implements an external storage mechanism for large transactions.</p>
<p>If a transaction is too large to fit in a single Aerospike record (indicated by a <code>RECORD_TOO_BIG</code> error), or if the system is configured to externalize all transactions, the UTXO store will store the full transaction data in an external storage (typically AWS S3, but any external storage can be used).</p>
<p>In such cases, the full transaction data is stored externally, while metadata and UTXOs are still stored in Aerospike, potentially across multiple records. The Aerospike record will have an <code>external</code> flag set to true, indicating that the full transaction data is stored externally.</p>
<p>When the UTXO data is needed, the system will first check the Aerospike record. If the `external flag is true, it will then retrieve the full transaction data from the external storage using the transaction hash as a key.</p>
<h3 id="48-alert-system-and-utxo-management">4.8. Alert System and UTXO Management</h3>
<p>The UTXO Store supports advanced UTXO management features, which can be utilized by an alert system.</p>
<p><img alt="utxo_freeze_reassign.svg" src="../../services/img/plantuml/utxo/utxo_freeze_reassign.svg" /></p>
<ol>
<li>
<p><strong>Freezing UTXOs</strong>: The alert system can request to freeze specific UTXOs, preventing them from being spent.</p>
<ul>
<li>Checks if the UTXO exists</li>
<li>If the UTXO is already spent, it returns "SPENT"</li>
<li>If the UTXO is already frozen, it returns "FROZEN"</li>
<li>Otherwise, it marks the UTXO as frozen by setting its spending TxID to 32 'FF' bytes</li>
</ul>
</li>
<li>
<p><strong>Unfreezing UTXOs</strong>: Previously frozen UTXOs can be unfrozen, allowing them to be spent again.</p>
<ul>
<li>Checks if the UTXO exists and is frozen</li>
<li>If frozen, it removes the freeze mark</li>
<li>If not frozen, it returns an error</li>
</ul>
</li>
<li>
<p><strong>Reassigning UTXOs</strong>: UTXOs can be reassigned to a new transaction output, but only if they are frozen first.</p>
<ul>
<li>Verifies the UTXO exists and is frozen</li>
<li>Updates the UTXO hash to the new value</li>
<li>Sets spendable block height to current + ReAssignedUtxoSpendableAfterBlocks</li>
<li>Logs the reassignment for audit purposes</li>
</ul>
</li>
</ol>
<h3 id="49-unmined-transaction-management">4.9. Unmined Transaction Management</h3>
<p>The UTXO Store tracks unmined transactions to support transaction recovery and continuity across service restarts. This functionality is crucial for maintaining a reliable transaction processing pipeline.</p>
<p><img alt="unmined_transaction_lifecycle.svg" src="../../services/img/plantuml/utxo/unmined_transaction_lifecycle.svg" /></p>
<p><strong>Key Components:</strong></p>
<ul>
<li><strong><code>unminedSince</code> Field</strong>: A block height field in the UTXO store that, when set, indicates the transaction is unmined and tracks when it was first stored</li>
<li><strong><code>createdAt</code> Field</strong>: Timestamp tracking when the unmined transaction was added, used for ordering during recovery</li>
<li><strong><code>preserveUntil</code> Field</strong>: Protects parent transactions from deletion when they have unmined children</li>
</ul>
<p><strong>Functionality:</strong></p>
<ol>
<li><strong>Transaction Tracking</strong>: When a transaction is validated but not yet mined, it's marked with the <code>unminedSince</code> field containing the current block height</li>
<li><strong>Recovery Interface</strong>: The <code>UnminedTxIterator</code> provides efficient iteration over all unmined transactions, enabling the Block Assembly service to reload them on startup</li>
<li><strong>Automatic Cleanup</strong>: Old unmined transactions are periodically cleaned up based on retention settings through <code>QueryOldUnminedTransactions</code></li>
<li><strong>Parent Protection</strong>: During cleanup, parent transactions of younger unmined transactions are protected using <code>PreserveTransactions</code></li>
</ol>
<p><strong>Benefits:</strong></p>
<ul>
<li><strong>Service Resilience</strong>: Transactions persist across service restarts without requiring resubmission</li>
<li><strong>State Management</strong>: Clear separation between mined and unmined transactions</li>
<li><strong>Resource Management</strong>: Automatic cleanup prevents unbounded growth while preserving transaction dependencies</li>
<li><strong>Conflict Detection</strong>: Helps identify transactions that conflict with mined blocks</li>
</ul>
<h2 id="5-technology">5. Technology</h2>
<h3 id="51-language-and-libraries">5.1. Language and Libraries</h3>
<ol>
<li>
<p><strong>Go Programming Language (Golang)</strong>:
A statically typed, compiled language known for its simplicity and efficiency, especially in concurrent operations and networked services.
The primary language used for implementing the service's logic.</p>
</li>
<li>
<p><strong>Bitcoin Transaction (BT) GoLang library</strong>: <code>github.com/ordishs/go-bt/</code> - a full featured Bitcoin transactions and transaction manipulation/functionality Go Library.</p>
</li>
</ol>
<h3 id="52-data-stores">5.2. Data Stores</h3>
<p>The following datastores are supported (either in development / experimental or production mode):</p>
<ol>
<li>
<p><strong>Aerospike</strong>:</p>
<ul>
<li>A high-performance, NoSQL distributed database.</li>
<li>Suitable for environments requiring high throughput and low latency.</li>
<li>Handles large volumes of UTXO data with fast read/write capabilities.</li>
<li>Aerospike is the reference datastore. Teranode has been guaranteed to process 1 million tps with Aerospike.</li>
<li>Aerospike records can contain up to 1024 bytes.
   <img alt="AerospikeRecord.png" src="../../services/img/AerospikeRecord.png" /></li>
<li>For more information, please refer to the official Aerospike documentation: <a href="https://aerospike.com">https://aerospike.com</a>.</li>
</ul>
</li>
<li>
<p><strong>Memory (In-Memory Store)</strong>:</p>
<ul>
<li>Stores UTXOs directly in the application's memory.</li>
<li>Offers the fastest access times but lacks persistence; data is lost if the service restarts.</li>
<li>Useful for development or testing purposes.</li>
</ul>
</li>
<li>
<p><strong>Sql</strong>:</p>
<ul>
<li>A SQL database, currently Postgresql and SqlLite are in scope, can be used to store UTXOs.</li>
<li>Provides a balance of performance and persistence, suitable for medium to large-scale applications.</li>
<li>Offers the ability to query and analyze UTXO data using SQL.</li>
</ul>
</li>
<li>
<p><strong>Nullstore</strong>:</p>
<ul>
<li>A dummy or placeholder implementation, used for testing (when no actual storage is needed).</li>
<li>Can be used to mock UTXO store functionality in a development or test environment.</li>
</ul>
</li>
</ol>
<p><strong>Implementation Choice Considerations:</strong></p>
<ul>
<li>The choice of implementation depends on the specific requirements of the BSV node, such as speed, data volume, persistence, and the operational environment.</li>
<li>Memory-based stores are typically faster but may require additional persistence mechanisms.</li>
<li>Databases like Aerospike provide a balance of speed and persistence, suitable for larger, more complex systems.</li>
<li>Nullstore is more appropriate for testing, development, or lightweight applications.</li>
</ul>
<h3 id="53-data-purging">5.3. Data Purging</h3>
<p>Stored data is automatically purged a certain TTL (Time To Live) period after it is spent. This is done to prevent the datastore from growing indefinitely and to ensure that only relevant data (i.e. data that is spendable or recently spent) is kept in the store.</p>
<h2 id="6-performance-optimizations">6. Performance Optimizations</h2>
<h3 id="61-shared-buffer-optimization">6.1. Shared Buffer Optimization</h3>
<p>To improve performance when reading large batches of UTXOs, Teranode implements a shared buffer optimization that significantly reduces memory allocations and garbage collection pressure.</p>
<h4 id="how-it-works">How It Works</h4>
<p>The shared buffer optimization is implemented in the Aerospike UTXO store's batch operations:</p>
<ol>
<li><strong>Single Buffer Allocation</strong>: Instead of allocating individual buffers for each UTXO read operation, the system allocates a single large shared buffer</li>
<li><strong>Buffer Reuse</strong>: This buffer is reused across multiple UTXO reads within the same batch operation</li>
<li><strong>Slice References</strong>: Each UTXO's data is referenced as a slice of the shared buffer, avoiding data copying</li>
</ol>
<h4 id="performance-benefits">Performance Benefits</h4>
<ul>
<li><strong>Reduced Memory Allocations</strong>: Decreases the number of memory allocations from O(n) to O(1) for batch operations</li>
<li><strong>Lower GC Pressure</strong>: Fewer allocations mean less work for the garbage collector</li>
<li><strong>Improved Throughput</strong>: Particularly beneficial when reading UTXO sets for block validation or subtree processing</li>
<li><strong>Better Cache Locality</strong>: Contiguous memory access patterns improve CPU cache utilization</li>
</ul>
<h4 id="implementation-details">Implementation Details</h4>
<p>The optimization is automatically applied when:</p>
<ul>
<li>Batch reading operations are performed through <code>GetMetaBatch</code> or similar methods</li>
<li>Multiple UTXOs are requested in a single operation</li>
<li>The Aerospike store implementation is being used</li>
</ul>
<p>Example of the optimization in action:</p>
<ul>
<li>Without optimization: Reading 10,000 UTXOs requires 10,000 separate buffer allocations</li>
<li>With optimization: Reading 10,000 UTXOs requires 1 shared buffer allocation plus slice operations</li>
</ul>
<p>This optimization is particularly effective for:</p>
<ul>
<li>Block validation (reading all UTXOs referenced in a block)</li>
<li>Subtree validation (processing millions of transactions)</li>
<li>UTXO set snapshots and exports</li>
<li>High-throughput transaction validation</li>
</ul>
<h2 id="7-directory-structure-and-main-files">7. Directory Structure and Main Files</h2>
<div class="highlight"><pre><span></span><code>UTXO Store Package Structure (stores/utxo)
 Interface.go                    # Defines the interface for the UTXO Store
 _factory                        # Contains different store implementations
    aerospike.go                # Factory setup for Aerospike UTXO Store
    memory.go                   # Factory setup for in-memory UTXO Store
    utxo.go                     # Common UTXO store setup
 aerospike                       # Aerospike-specific UTXO Store implementation
    aerospike.go                # Main Aerospike UTXO store implementation
       Store                   # Struct representing the Aerospike UTXO store
           url                 # The Aerospike URL
           client              # The Aerospike client instance
           namespace           # The Aerospike namespace used
           setName             # The set name for storing UTXOs
           expiration          # The expiration time for UTXO records
           blockHeight         # The current blockchain height
           logger              # The logger instance
           storeBatcher        # Batcher for store operations
           getBatcher          # Batcher for get operations
           spendBatcher        # Batcher for spend operations
           lastSpendBatcher    # Batcher for last spend operations
           New                 # Initializes a new Aerospike UTXO Store
           sendStoreBatch      # Processes and stores a batch of transactions
           sendGetBatch        # Retrieves a batch of UTXO data
           sendSpendBatchLua   # Processes a batch of UTXO spend operations using Lua script
           SetBlockHeight      # Sets the current block height
           GetBlockHeight      # Retrieves the current block height
           Health              # Checks the health of the Aerospike UTXO store service
           GetSpend            # Retrieves the spend status of a UTXO
           GetMeta             # Retrieves metadata for a specific UTXO
           Get                 # Retrieves specific UTXO data
           Create              # Adds new UTXOs to the store
           Spend               # Marks UTXOs as spent
           Unspend             # Reverses the spent status of UTXOs
           SetMinedMulti       # Sets multiple transactions as mined
           SetMined            # Sets a transaction as mined
           Delete              # Removes UTXOs from the store
    aerospike_server_test.go    # Tests for the Aerospike UTXO store
    alert_system.go             # Aerospike alert system implementation
    alert_system_test.go        # Tests for the Aerospike alert system
    metrics.go                  # Metrics collection for Aerospike operations
    spend.lua                   # Lua script for batch spend operations
 memory                          # In-memory UTXO Store implementation
    memory.go                   # Main in-memory UTXO store implementation
 meta                            # Metadata handling for UTXOs
    data.go                     # Defines metadata structures for UTXOs
    data_test.go                # Tests for UTXO metadata
 nullstore                       # Null UTXO Store implementation for testing
    nullstore.go                # Main nullstore implementation
 sql                             # SQL UTXO Store implementation
    sql.go                      # Main sql implementation (provides support for SqlLite and Postgres)
 status.pb.go                    # Generated protocol buffer code for UTXO status
 status.proto                    # Protocol buffer definition for UTXO status
 utils.go                        # Utility functions for the UTXO Store
 utils_test.go                   # Tests for utility functions
</code></pre></div>
<h2 id="8-running-the-store-locally">8. Running the Store Locally</h2>
<h3 id="how-to-run">How to run</h3>
<p>To run the UTXO Store locally, you can execute the following command:</p>
<div class="highlight"><pre><span></span><code><span class="nv">SETTINGS_CONTEXT</span><span class="o">=</span>dev.<span class="o">[</span>YOUR_USERNAME<span class="o">]</span><span class="w"> </span>go<span class="w"> </span>run<span class="w"> </span>-UtxoStore<span class="o">=</span><span class="m">1</span>
</code></pre></div>
<p>Please refer to the <a href="../../../howto/locallyRunningServices/">Locally Running Services Documentation</a> document for more information on running the Bootstrap Service locally.</p>
<h2 id="9-configuration-and-settings">9. Configuration and Settings</h2>
<p>For comprehensive configuration documentation including all settings, defaults, and interactions, see the <a href="../../../references/settings/stores/utxo_settings/">UTXO Store Settings Reference</a>.</p>
<h2 id="10-other-resources">10. Other Resources</h2>
<p><a href="../../../references/stores/utxo_reference/">UTXO Store Reference</a></p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright  2025 BSV Blockchain Org.
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/bsv-blockchain/teranode" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.instant", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../assets/external/unpkg.com/mermaid@11/dist/mermaid.min.js"></script>
      
    
  </body>
</html>