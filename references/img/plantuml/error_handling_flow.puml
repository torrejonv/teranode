@startuml
skinparam backgroundColor #F0F8FF
skinparam defaultFontColor #333333
skinparam arrowColor #666666

' Define borders for all elements
skinparam entity {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

skinparam control {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

skinparam participant {
  BorderColor #666666
  BackgroundColor #DDDDDD
}

title Teranode Error Handling Flowchart

start
if (Error Occurred?) then (yes)
  :Create Teranode Error;
  :Add Context;
  if (Crossing Service Boundary?) then (yes)
    :Wrap as gRPC Error;
    :Send gRPC Error;
    :Receive gRPC Error;
    :Unwrap gRPC Error;
    :Reconstruct Teranode Error;
    while (More Context Needed?) is (yes)
      :Add Context;
    endwhile (no)
  else (no)
  endif
  :Handle Error;
else (no)
endif
stop

left footer Last Modified On: %date("dd-MMM-yyyy")

@enduml
