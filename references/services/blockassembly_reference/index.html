
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../asset_reference/">
      
      
        <link rel="next" href="../blockvalidation_reference/">
      
      
      <link rel="icon" href="../../../topics/architecture/img/bsvblockchain_blue_logo.svg">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.22">
    
    
      
        <title>Block Assembly - Teranode</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.84d31ad4.min.css">
      
      


    
    
      
    
    
      
        
        
        
        <link rel="stylesheet" href="../../../assets/external/fonts.googleapis.com/css.49ea35f2.css">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../overrides/custom.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#block-assembly-reference-documentation" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Teranode" class="md-header__button md-logo" aria-label="Teranode" data-md-component="logo">
      
  <img src="../../../topics/architecture/img/bsvblockchain_logo.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Teranode
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Block Assembly
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
    
      
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    <li class="md-tabs__item">
      <a href="../../.." class="md-tabs__link">
        
  
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../tutorials/developers/forkAndPullRequestGuidelines/" class="md-tabs__link">
          
  
  
  Tutorials

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../howto/locallyRunningServices/" class="md-tabs__link">
          
  
  
  How-To Guides

        </a>
      </li>
    
  

      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../topics/teranodeIntro/" class="md-tabs__link">
          
  
  
  Key Topics

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="../../projectStructure/" class="md-tabs__link">
          
  
  
  Reference

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Teranode" class="md-nav__button md-logo" aria-label="Teranode" data-md-component="logo">
      
  <img src="../../../topics/architecture/img/bsvblockchain_logo.svg" alt="logo">

    </a>
    Teranode
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/developers/forkAndPullRequestGuidelines/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Fork and Pull Request Guidelines
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/developers/developerSetup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../tutorials/miners/minersGettingStarted/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Miners Getting Started
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-To Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-To Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/locallyRunningServices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running Services Locally
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/howToRemoteDebugTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Debugging Teranode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/generatingProtobuf/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Generating Protobuf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/addingNewProtobufServices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding Protobuf
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/configuringGrpcLogging/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuring gRPC Logging
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/runningTests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Running Tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/automatedTestingHowTo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Automated Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/chain-integrity-testing/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Chain Integrity Testing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/makefile/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Makefile Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/bugReporting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Bug Reporting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/developersHowToTeranodeCLI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Developer's Guide to Teranode-CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12" >
        
          
          <label class="md-nav__link" for="__nav_3_12" id="__nav_3_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Miners
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12">
            <span class="md-nav__icon md-icon"></span>
            Miners
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_1" >
        
          
          <label class="md-nav__link" for="__nav_3_12_1" id="__nav_3_12_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Installation
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_1">
            <span class="md-nav__icon md-icon"></span>
            Installation
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToInstallation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToInstallation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToInstallationDeprecated/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Deprecated
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_2" >
        
          
          <label class="md-nav__link" for="__nav_3_12_2" id="__nav_3_12_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_2">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToConfigureTheNode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToConfigureTheNode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToAerospikeTuning/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Aerospike Tuning
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToInteractWithAssetServer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asset Server Interaction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToInteractWithFSM/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FSM Interaction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToInteractWithRPCServer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RPC Server Interaction
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_3" >
        
          
          <label class="md-nav__link" for="__nav_3_12_3" id="__nav_3_12_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Start/Stop
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_3">
            <span class="md-nav__icon md-icon"></span>
            Start/Stop
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToStopStartDockerTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToStopStartKubernetesTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_4" >
        
          
          <label class="md-nav__link" for="__nav_3_12_4" id="__nav_3_12_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Updating Teranode
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_4">
            <span class="md-nav__icon md-icon"></span>
            Updating Teranode
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersUpdatingTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersUpdatingTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_5" >
        
          
          <label class="md-nav__link" for="__nav_3_12_5" id="__nav_3_12_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Security Best Practices
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_5">
            <span class="md-nav__icon md-icon"></span>
            Security Best Practices
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersSecurityBestPractices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersSecurityBestPractices/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_6" >
        
          
          <label class="md-nav__link" for="__nav_3_12_6" id="__nav_3_12_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Troubleshooting
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_6">
            <span class="md-nav__icon md-icon"></span>
            Troubleshooting
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/docker/minersHowToTroubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Docker
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToTroubleshooting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kubernetes
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_3_12_7" >
        
          
          <label class="md-nav__link" for="__nav_3_12_7" id="__nav_3_12_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Additional
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_3_12_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_12_7">
            <span class="md-nav__icon md-icon"></span>
            Additional
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToCPUMiner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    CPU Mining Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToResetTeranode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Reset Teranode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToSyncTheNode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sync the Node
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToTeranodeCLI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teranode CLI
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersManagingDiskSpace/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Managing Disk Space
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/minersHowToUseListenMode/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using Listen Mode
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../howto/miners/kubernetes/minersHowToBackup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Backup (Kubernetes)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Key Topics
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Key Topics
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/teranodeIntro/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teranode Introduction
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/architecture/teranode-overall-system-design/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/architecture/teranode-architecture-brief/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Architecture Brief
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/architecture/teranode-microservices-overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Microservices Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/transactionLifecycle/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transaction Lifecycle
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/architecture/stateManagement/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    State Management
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../state-machine.diagram/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    State Machine Diagram
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/architecture/understandingDoubleSpends/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding Double Spends
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/technologyStack/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Technology Stack
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/understandingTheTestingFramework/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Understanding the Testing Framework
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/functionalRequirementTests/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Functional Requirement Tests
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_12" >
        
          
          <label class="md-nav__link" for="__nav_4_12" id="__nav_4_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Features
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_12">
            <span class="md-nav__icon md-icon"></span>
            Features
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/features/two_phase_commit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Two Phase Commit
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_13" >
        
          
          <label class="md-nav__link" for="__nav_4_13" id="__nav_4_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Core Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_13_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_13">
            <span class="md-nav__icon md-icon"></span>
            Core Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/alert/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alert Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/assetServer/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asset Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/blockAssembly/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Assembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/blockValidation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/blockchain/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blockchain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/propagation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Propagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/subtreeValidation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/validator/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_14" >
        
          
          <label class="md-nav__link" for="__nav_4_14" id="__nav_4_14_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Overlay Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_14_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_14">
            <span class="md-nav__icon md-icon"></span>
            Overlay Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/blockPersister/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Persister
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/p2p/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../P2P_NAT_TRAVERSAL/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P NAT Traversal
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/legacy/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Legacy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/rpc/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RPC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/services/utxoPersister/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Persister
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_15" >
        
          
          <label class="md-nav__link" for="__nav_4_15" id="__nav_4_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Stores
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_15">
            <span class="md-nav__icon md-icon"></span>
            Stores
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/stores/blob/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blob Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/stores/utxo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Store
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_16" >
        
          
          <label class="md-nav__link" for="__nav_4_16" id="__nav_4_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Data Model
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_16">
            <span class="md-nav__icon md-icon"></span>
            Data Model
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/datamodel/block_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/datamodel/block_header_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Header Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/datamodel/subtree_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/datamodel/transaction_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Transaction Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/datamodel/utxo_data_model/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Data Model
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_17" >
        
          
          <label class="md-nav__link" for="__nav_4_17" id="__nav_4_17_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Kafka
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_17_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_17">
            <span class="md-nav__icon md-icon"></span>
            Kafka
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/kafka/kafka/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka Overview
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_4_18" >
        
          
          <label class="md-nav__link" for="__nav_4_18" id="__nav_4_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Commands
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4_18">
            <span class="md-nav__icon md-icon"></span>
            Commands
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../topics/commands/seeder/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Seeder
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../projectStructure/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Project Structure
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2" >
        
          
          <label class="md-nav__link" for="__nav_5_2" id="__nav_5_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    API & Protobuf
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2">
            <span class="md-nav__icon md-icon"></span>
            API & Protobuf
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../errorHandling/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Error Handling
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../glossary/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Glossary
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../codingConventions/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Coding Conventions
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../kafkaMessageFormat/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka Message Format
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../networkConsensusRules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Network Consensus Rules
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_2_6" >
        
          
          <label class="md-nav__link" for="__nav_5_2_6" id="__nav_5_2_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Protobuf API
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_2_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_2_6">
            <span class="md-nav__icon md-icon"></span>
            Protobuf API
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protobuf_docs/alertProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alert Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protobuf_docs/blockassemblyProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Assembly Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protobuf_docs/blockchainProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blockchain Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protobuf_docs/blockvalidationProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Validation Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protobuf_docs/propagationProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Propagation Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protobuf_docs/subtreevalidationProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Validation Proto
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../protobuf_docs/validatorProto/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validator Proto
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5_3" checked>
        
          
          <label class="md-nav__link" for="__nav_5_3" id="__nav_5_3_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Core Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5_3">
            <span class="md-nav__icon md-icon"></span>
            Core Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../alert_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alert Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../asset_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asset Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Block Assembly
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Block Assembly
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blockassembly" class="md-nav__link">
    <span class="md-ellipsis">
      BlockAssembly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blockassembler" class="md-nav__link">
    <span class="md-ellipsis">
      BlockAssembler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreeprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeProcessor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lockfreequeue" class="md-nav__link">
    <span class="md-ellipsis">
      LockFreeQueue
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blockassembly_1" class="md-nav__link">
    <span class="md-ellipsis">
      BlockAssembly
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockAssembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new" class="md-nav__link">
    <span class="md-ellipsis">
      New
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#health" class="md-nav__link">
    <span class="md-ellipsis">
      Health
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthgrpc" class="md-nav__link">
    <span class="md-ellipsis">
      HealthGRPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#init" class="md-nav__link">
    <span class="md-ellipsis">
      Init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start" class="md-nav__link">
    <span class="md-ellipsis">
      Start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop" class="md-nav__link">
    <span class="md-ellipsis">
      Stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addtx" class="md-nav__link">
    <span class="md-ellipsis">
      AddTx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removetx" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveTx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addtxbatch" class="md-nav__link">
    <span class="md-ellipsis">
      AddTxBatch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#txcount" class="md-nav__link">
    <span class="md-ellipsis">
      TxCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getminingcandidate" class="md-nav__link">
    <span class="md-ellipsis">
      GetMiningCandidate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submitminingsolution" class="md-nav__link">
    <span class="md-ellipsis">
      SubmitMiningSolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreecount" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetblockassembly" class="md-nav__link">
    <span class="md-ellipsis">
      ResetBlockAssembly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getblockassemblystate" class="md-nav__link">
    <span class="md-ellipsis">
      GetBlockAssemblyState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcurrentdifficulty" class="md-nav__link">
    <span class="md-ellipsis">
      GetCurrentDifficulty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generateblocks" class="md-nav__link">
    <span class="md-ellipsis">
      GenerateBlocks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkblockassembly" class="md-nav__link">
    <span class="md-ellipsis">
      CheckBlockAssembly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getblockassemblyblockcandidate" class="md-nav__link">
    <span class="md-ellipsis">
      GetBlockAssemblyBlockCandidate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getblockassemblytxs" class="md-nav__link">
    <span class="md-ellipsis">
      GetBlockAssemblyTxs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setskipwaitforpendingblocks" class="md-nav__link">
    <span class="md-ellipsis">
      SetSkipWaitForPendingBlocks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blockassembler_1" class="md-nav__link">
    <span class="md-ellipsis">
      BlockAssembler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockAssembler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#newblockassembler" class="md-nav__link">
    <span class="md-ellipsis">
      NewBlockAssembler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#txcount_1" class="md-nav__link">
    <span class="md-ellipsis">
      TxCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queuelength" class="md-nav__link">
    <span class="md-ellipsis">
      QueueLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreecount_1" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start_1" class="md-nav__link">
    <span class="md-ellipsis">
      Start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getstate" class="md-nav__link">
    <span class="md-ellipsis">
      GetState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setstate" class="md-nav__link">
    <span class="md-ellipsis">
      SetState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#currentblock" class="md-nav__link">
    <span class="md-ellipsis">
      CurrentBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addtx_1" class="md-nav__link">
    <span class="md-ellipsis">
      AddTx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removetx_1" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveTx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reset" class="md-nav__link">
    <span class="md-ellipsis">
      Reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getminingcandidate_1" class="md-nav__link">
    <span class="md-ellipsis">
      GetMiningCandidate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreeprocessor_1" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeProcessor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SubtreeProcessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#newsubtreeprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      NewSubtreeProcessor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#txcount_2" class="md-nav__link">
    <span class="md-ellipsis">
      TxCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queuelength_1" class="md-nav__link">
    <span class="md-ellipsis">
      QueueLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreecount_2" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcurrentrunningstate" class="md-nav__link">
    <span class="md-ellipsis">
      GetCurrentRunningState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcurrentlength" class="md-nav__link">
    <span class="md-ellipsis">
      GetCurrentLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add" class="md-nav__link">
    <span class="md-ellipsis">
      Add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove" class="md-nav__link">
    <span class="md-ellipsis">
      Remove
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcompletedsubtreesforminingcandidate" class="md-nav__link">
    <span class="md-ellipsis">
      GetCompletedSubtreesForMiningCandidate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moveforwardblock" class="md-nav__link">
    <span class="md-ellipsis">
      MoveForwardBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reorg" class="md-nav__link">
    <span class="md-ellipsis">
      Reorg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reset_1" class="md-nav__link">
    <span class="md-ellipsis">
      Reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checksubtreeprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      CheckSubtreeProcessor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lockfreequeue_1" class="md-nav__link">
    <span class="md-ellipsis">
      LockFreeQueue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LockFreeQueue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#newlockfreequeue" class="md-nav__link">
    <span class="md-ellipsis">
      NewLockFreeQueue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#len" class="md-nav__link">
    <span class="md-ellipsis">
      Len
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enqueue" class="md-nav__link">
    <span class="md-ellipsis">
      Enqueue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dequeue" class="md-nav__link">
    <span class="md-ellipsis">
      Dequeue
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blockvalidation_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blockchain_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blockchain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../propagation_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Propagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../subtreevalidation_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../validator_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_4" >
        
          
          <label class="md-nav__link" for="__nav_5_4" id="__nav_5_4_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Overlay Services
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_4">
            <span class="md-nav__icon md-icon"></span>
            Overlay Services
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../blockpersister_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Persister
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../p2p_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../legacy_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P Legacy Service
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../rpc_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RPC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utxopersister_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Persister
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_5" >
        
          
          <label class="md-nav__link" for="__nav_5_5" id="__nav_5_5_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Stores
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_5">
            <span class="md-nav__icon md-icon"></span>
            Stores
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stores/blob_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blob Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../stores/utxo_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Store
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6" >
        
          
          <label class="md-nav__link" for="__nav_5_6" id="__nav_5_6_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6">
            <span class="md-nav__icon md-icon"></span>
            Configuration
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings_reference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Settings Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/kafka_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Kafka Settings
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6_4" >
        
          
          <label class="md-nav__link" for="__nav_5_6_4" id="__nav_5_6_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Service Settings
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_4">
            <span class="md-nav__icon md-icon"></span>
            Service Settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/alert_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Alert
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/asset_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Asset Server
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/blockassembly_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Assembly
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/blockchain_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blockchain
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/blockpersister_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Persister
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/blockvalidation_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Block Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/legacy_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Legacy
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/p2p_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    P2P
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/propagation_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Propagation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/rpc_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    RPC
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/subtreevalidation_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Subtree Validation
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/utxopersister_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Persister
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/services/validator_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Validator
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_6_5" >
        
          
          <label class="md-nav__link" for="__nav_5_6_5" id="__nav_5_6_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Store Settings
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="3" aria-labelledby="__nav_5_6_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_6_5">
            <span class="md-nav__icon md-icon"></span>
            Store Settings
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/stores/blob_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Blob Store
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../settings/stores/utxo_settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    UTXO Store
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
      
      
        
          
          
        
      
    
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
          
        
        <input class="md-nav__toggle md-toggle md-toggle--indeterminate" type="checkbox" id="__nav_5_7" >
        
          
          <label class="md-nav__link" for="__nav_5_7" id="__nav_5_7_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    Miscellaneous
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_5_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5_7">
            <span class="md-nav__icon md-icon"></span>
            Miscellaneous
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../misc/BIP-239/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    BIP-239 (Transaction Extended Format)
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../gitCommitSigningSetupGuide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Git Commit Signing Setup Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../licenseInformation/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Licensing
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../prometheusMetrics/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Prometheus Metrics
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../teranodeDaemonReference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Teranode Daemon Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../testingTechnicalReference/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Testing Technical Reference
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thirdPartySoftwareRequirements/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Third-Party Software Requirements
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#types" class="md-nav__link">
    <span class="md-ellipsis">
      Types
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Types">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blockassembly" class="md-nav__link">
    <span class="md-ellipsis">
      BlockAssembly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blockassembler" class="md-nav__link">
    <span class="md-ellipsis">
      BlockAssembler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreeprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeProcessor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lockfreequeue" class="md-nav__link">
    <span class="md-ellipsis">
      LockFreeQueue
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#functions" class="md-nav__link">
    <span class="md-ellipsis">
      Functions
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Functions">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#blockassembly_1" class="md-nav__link">
    <span class="md-ellipsis">
      BlockAssembly
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockAssembly">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#new" class="md-nav__link">
    <span class="md-ellipsis">
      New
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#health" class="md-nav__link">
    <span class="md-ellipsis">
      Health
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#healthgrpc" class="md-nav__link">
    <span class="md-ellipsis">
      HealthGRPC
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#init" class="md-nav__link">
    <span class="md-ellipsis">
      Init
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start" class="md-nav__link">
    <span class="md-ellipsis">
      Start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#stop" class="md-nav__link">
    <span class="md-ellipsis">
      Stop
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addtx" class="md-nav__link">
    <span class="md-ellipsis">
      AddTx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removetx" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveTx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addtxbatch" class="md-nav__link">
    <span class="md-ellipsis">
      AddTxBatch
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#txcount" class="md-nav__link">
    <span class="md-ellipsis">
      TxCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getminingcandidate" class="md-nav__link">
    <span class="md-ellipsis">
      GetMiningCandidate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#submitminingsolution" class="md-nav__link">
    <span class="md-ellipsis">
      SubmitMiningSolution
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreecount" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resetblockassembly" class="md-nav__link">
    <span class="md-ellipsis">
      ResetBlockAssembly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getblockassemblystate" class="md-nav__link">
    <span class="md-ellipsis">
      GetBlockAssemblyState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcurrentdifficulty" class="md-nav__link">
    <span class="md-ellipsis">
      GetCurrentDifficulty
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#generateblocks" class="md-nav__link">
    <span class="md-ellipsis">
      GenerateBlocks
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checkblockassembly" class="md-nav__link">
    <span class="md-ellipsis">
      CheckBlockAssembly
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getblockassemblyblockcandidate" class="md-nav__link">
    <span class="md-ellipsis">
      GetBlockAssemblyBlockCandidate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getblockassemblytxs" class="md-nav__link">
    <span class="md-ellipsis">
      GetBlockAssemblyTxs
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setskipwaitforpendingblocks" class="md-nav__link">
    <span class="md-ellipsis">
      SetSkipWaitForPendingBlocks
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#blockassembler_1" class="md-nav__link">
    <span class="md-ellipsis">
      BlockAssembler
    </span>
  </a>
  
    <nav class="md-nav" aria-label="BlockAssembler">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#newblockassembler" class="md-nav__link">
    <span class="md-ellipsis">
      NewBlockAssembler
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#txcount_1" class="md-nav__link">
    <span class="md-ellipsis">
      TxCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queuelength" class="md-nav__link">
    <span class="md-ellipsis">
      QueueLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreecount_1" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#start_1" class="md-nav__link">
    <span class="md-ellipsis">
      Start
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getstate" class="md-nav__link">
    <span class="md-ellipsis">
      GetState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#setstate" class="md-nav__link">
    <span class="md-ellipsis">
      SetState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#currentblock" class="md-nav__link">
    <span class="md-ellipsis">
      CurrentBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#addtx_1" class="md-nav__link">
    <span class="md-ellipsis">
      AddTx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#removetx_1" class="md-nav__link">
    <span class="md-ellipsis">
      RemoveTx
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reset" class="md-nav__link">
    <span class="md-ellipsis">
      Reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getminingcandidate_1" class="md-nav__link">
    <span class="md-ellipsis">
      GetMiningCandidate
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreeprocessor_1" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeProcessor
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SubtreeProcessor">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#newsubtreeprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      NewSubtreeProcessor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#txcount_2" class="md-nav__link">
    <span class="md-ellipsis">
      TxCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#queuelength_1" class="md-nav__link">
    <span class="md-ellipsis">
      QueueLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#subtreecount_2" class="md-nav__link">
    <span class="md-ellipsis">
      SubtreeCount
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcurrentrunningstate" class="md-nav__link">
    <span class="md-ellipsis">
      GetCurrentRunningState
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcurrentlength" class="md-nav__link">
    <span class="md-ellipsis">
      GetCurrentLength
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#add" class="md-nav__link">
    <span class="md-ellipsis">
      Add
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#remove" class="md-nav__link">
    <span class="md-ellipsis">
      Remove
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#getcompletedsubtreesforminingcandidate" class="md-nav__link">
    <span class="md-ellipsis">
      GetCompletedSubtreesForMiningCandidate
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#moveforwardblock" class="md-nav__link">
    <span class="md-ellipsis">
      MoveForwardBlock
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reorg" class="md-nav__link">
    <span class="md-ellipsis">
      Reorg
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#reset_1" class="md-nav__link">
    <span class="md-ellipsis">
      Reset
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#checksubtreeprocessor" class="md-nav__link">
    <span class="md-ellipsis">
      CheckSubtreeProcessor
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
          <li class="md-nav__item">
  <a href="#lockfreequeue_1" class="md-nav__link">
    <span class="md-ellipsis">
      LockFreeQueue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="LockFreeQueue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#newlockfreequeue" class="md-nav__link">
    <span class="md-ellipsis">
      NewLockFreeQueue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#len" class="md-nav__link">
    <span class="md-ellipsis">
      Len
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#enqueue" class="md-nav__link">
    <span class="md-ellipsis">
      Enqueue
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#dequeue" class="md-nav__link">
    <span class="md-ellipsis">
      Dequeue
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="block-assembly-reference-documentation">Block Assembly Reference Documentation</h1>
<h2 id="types">Types</h2>
<h3 id="blockassembly">BlockAssembly</h3>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">BlockAssembly</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// UnimplementedBlockAssemblyAPIServer provides default implementations for gRPC methods</span>
<span class="w">    </span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">UnimplementedBlockAssemblyAPIServer</span>

<span class="w">    </span><span class="c1">// blockAssembler handles the core block assembly logic</span>
<span class="w">    </span><span class="nx">blockAssembler</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span>

<span class="w">    </span><span class="c1">// logger provides logging functionality</span>
<span class="w">    </span><span class="nx">logger</span><span class="w"> </span><span class="nx">ulogger</span><span class="p">.</span><span class="nx">Logger</span>

<span class="w">    </span><span class="c1">// stats tracks operational statistics</span>
<span class="w">    </span><span class="nx">stats</span><span class="w"> </span><span class="o">*</span><span class="nx">gocore</span><span class="p">.</span><span class="nx">Stat</span>

<span class="w">    </span><span class="c1">// settings contains configuration parameters</span>
<span class="w">    </span><span class="nx">settings</span><span class="w"> </span><span class="o">*</span><span class="nx">settings</span><span class="p">.</span><span class="nx">Settings</span>

<span class="w">    </span><span class="c1">// blockchainClient interfaces with the blockchain</span>
<span class="w">    </span><span class="nx">blockchainClient</span><span class="w"> </span><span class="nx">blockchain</span><span class="p">.</span><span class="nx">ClientI</span>

<span class="w">    </span><span class="c1">// txStore manages transaction storage</span>
<span class="w">    </span><span class="nx">txStore</span><span class="w"> </span><span class="nx">blob</span><span class="p">.</span><span class="nx">Store</span>

<span class="w">    </span><span class="c1">// utxoStore manages UTXO storage</span>
<span class="w">    </span><span class="nx">utxoStore</span><span class="w"> </span><span class="nx">utxostore</span><span class="p">.</span><span class="nx">Store</span>

<span class="w">    </span><span class="c1">// subtreeStore manages subtree storage</span>
<span class="w">    </span><span class="nx">subtreeStore</span><span class="w"> </span><span class="nx">blob</span><span class="p">.</span><span class="nx">Store</span>

<span class="w">    </span><span class="c1">// jobStore caches mining jobs with TTL</span>
<span class="w">    </span><span class="nx">jobStore</span><span class="w"> </span><span class="o">*</span><span class="nx">ttlcache</span><span class="p">.</span><span class="nx">Cache</span><span class="p">[</span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span><span class="p">,</span><span class="w"> </span><span class="o">*</span><span class="nx">subtreeprocessor</span><span class="p">.</span><span class="nx">Job</span><span class="p">]</span>

<span class="w">    </span><span class="c1">// blockSubmissionChan handles block submission requests</span>
<span class="w">    </span><span class="nx">blockSubmissionChan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockSubmissionRequest</span>

<span class="w">    </span><span class="c1">// skipWaitForPendingBlocks stores the flag value for tests</span>
<span class="w">    </span><span class="nx">skipWaitForPendingBlocks</span><span class="w"> </span><span class="kt">bool</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>BlockAssembly</code> type is the main structure for the block assembly service. It implements the <code>UnimplementedBlockAssemblyAPIServer</code> and contains various components for managing block assembly, storage, and communication with other services.</p>
<h3 id="blockassembler">BlockAssembler</h3>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">BlockAssembler</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// logger provides logging functionality for the assembler</span>
<span class="w">    </span><span class="nx">logger</span><span class="w"> </span><span class="nx">ulogger</span><span class="p">.</span><span class="nx">Logger</span>

<span class="w">    </span><span class="c1">// stats tracks operational statistics for monitoring and debugging</span>
<span class="w">    </span><span class="nx">stats</span><span class="w"> </span><span class="o">*</span><span class="nx">gocore</span><span class="p">.</span><span class="nx">Stat</span>

<span class="w">    </span><span class="c1">// settings contains configuration parameters for block assembly</span>
<span class="w">    </span><span class="nx">settings</span><span class="w"> </span><span class="o">*</span><span class="nx">settings</span><span class="p">.</span><span class="nx">Settings</span>

<span class="w">    </span><span class="c1">// utxoStore manages the UTXO set storage and retrieval</span>
<span class="w">    </span><span class="nx">utxoStore</span><span class="w"> </span><span class="nx">utxo</span><span class="p">.</span><span class="nx">Store</span>

<span class="w">    </span><span class="c1">// subtreeStore manages persistent storage of transaction subtrees</span>
<span class="w">    </span><span class="nx">subtreeStore</span><span class="w"> </span><span class="nx">blob</span><span class="p">.</span><span class="nx">Store</span>

<span class="w">    </span><span class="c1">// blockchainClient interfaces with the blockchain for network operations</span>
<span class="w">    </span><span class="nx">blockchainClient</span><span class="w"> </span><span class="nx">blockchain</span><span class="p">.</span><span class="nx">ClientI</span>

<span class="w">    </span><span class="c1">// subtreeProcessor handles the processing and organization of transaction subtrees</span>
<span class="w">    </span><span class="nx">subtreeProcessor</span><span class="w"> </span><span class="nx">subtreeprocessor</span><span class="p">.</span><span class="nx">Interface</span>

<span class="w">    </span><span class="c1">// miningCandidateCh coordinates requests for mining candidates</span>
<span class="w">    </span><span class="nx">miningCandidateCh</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="o">*</span><span class="nx">miningCandidateResponse</span>

<span class="w">    </span><span class="c1">// bestBlockHeader atomically stores the current best block header</span>
<span class="w">    </span><span class="nx">bestBlockHeader</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">[</span><span class="nx">model</span><span class="p">.</span><span class="nx">BlockHeader</span><span class="p">]</span>

<span class="w">    </span><span class="c1">// bestBlockHeight atomically stores the current best block height</span>
<span class="w">    </span><span class="nx">bestBlockHeight</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Uint32</span>

<span class="w">    </span><span class="c1">// currentChainMap maps block hashes to their heights</span>
<span class="w">    </span><span class="nx">currentChainMap</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span><span class="p">]</span><span class="kt">uint32</span>

<span class="w">    </span><span class="c1">// currentChainMapIDs tracks block IDs in the current chain</span>
<span class="w">    </span><span class="nx">currentChainMapIDs</span><span class="w"> </span><span class="kd">map</span><span class="p">[</span><span class="kt">uint32</span><span class="p">]</span><span class="kd">struct</span><span class="p">{}</span>

<span class="w">    </span><span class="c1">// currentChainMapMu protects access to chain maps</span>
<span class="w">    </span><span class="nx">currentChainMapMu</span><span class="w"> </span><span class="nx">sync</span><span class="p">.</span><span class="nx">RWMutex</span>

<span class="w">    </span><span class="c1">// blockchainSubscriptionCh receives blockchain notifications</span>
<span class="w">    </span><span class="nx">blockchainSubscriptionCh</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="o">*</span><span class="nx">blockchain</span><span class="p">.</span><span class="nx">Notification</span>

<span class="w">    </span><span class="c1">// currentDifficulty stores the current mining difficulty target</span>
<span class="w">    </span><span class="nx">currentDifficulty</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">[</span><span class="nx">model</span><span class="p">.</span><span class="nx">NBit</span><span class="p">]</span>

<span class="w">    </span><span class="c1">// defaultMiningNBits stores the default mining difficulty</span>
<span class="w">    </span><span class="nx">defaultMiningNBits</span><span class="w"> </span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">NBit</span>

<span class="w">    </span><span class="c1">// resetCh handles reset requests for the assembler</span>
<span class="w">    </span><span class="nx">resetCh</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="kd">struct</span><span class="p">{}</span>

<span class="w">    </span><span class="c1">// resetWaitCount tracks the number of blocks to wait after reset</span>
<span class="w">    </span><span class="nx">resetWaitCount</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Int32</span>

<span class="w">    </span><span class="c1">// resetWaitDuration tracks the time to wait after reset</span>
<span class="w">    </span><span class="nx">resetWaitDuration</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Int32</span>

<span class="w">    </span><span class="c1">// currentRunningState tracks the current operational state</span>
<span class="w">    </span><span class="nx">currentRunningState</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Value</span>

<span class="w">    </span><span class="c1">// cleanupService manages background cleanup tasks</span>
<span class="w">    </span><span class="nx">cleanupService</span><span class="w"> </span><span class="nx">cleanup</span><span class="p">.</span><span class="nx">Service</span>

<span class="w">    </span><span class="c1">// cleanupServiceLoaded indicates if the cleanup service has been loaded</span>
<span class="w">    </span><span class="nx">cleanupServiceLoaded</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Bool</span>

<span class="w">    </span><span class="c1">// unminedCleanupTicker manages periodic cleanup of old unmined transactions</span>
<span class="w">    </span><span class="nx">unminedCleanupTicker</span><span class="w"> </span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Ticker</span>

<span class="w">    </span><span class="c1">// cachedCandidate stores the cached mining candidate</span>
<span class="w">    </span><span class="nx">cachedCandidate</span><span class="w"> </span><span class="o">*</span><span class="nx">CachedMiningCandidate</span>

<span class="w">    </span><span class="c1">// skipWaitForPendingBlocks allows tests to skip waiting for pending blocks during startup</span>
<span class="w">    </span><span class="nx">skipWaitForPendingBlocks</span><span class="w"> </span><span class="kt">bool</span>

<span class="w">    </span><span class="c1">// unminedTransactionsLoading indicates if unmined transactions are currently being loaded</span>
<span class="w">    </span><span class="nx">unminedTransactionsLoading</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Bool</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>BlockAssembler</code> type is responsible for assembling blocks, managing the current chain state, and handling mining candidates.</p>
<h3 id="subtreeprocessor">SubtreeProcessor</h3>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">SubtreeProcessor</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="c1">// settings contains the configuration parameters for the processor</span>
<span class="w">    </span><span class="nx">settings</span><span class="w"> </span><span class="o">*</span><span class="nx">settings</span><span class="p">.</span><span class="nx">Settings</span>

<span class="w">    </span><span class="c1">// currentItemsPerFile specifies the maximum number of items per subtree file</span>
<span class="w">    </span><span class="nx">currentItemsPerFile</span><span class="w"> </span><span class="kt">int</span>

<span class="w">    </span><span class="c1">// blockStartTime tracks when the current block started</span>
<span class="w">    </span><span class="nx">blockStartTime</span><span class="w"> </span><span class="nx">time</span><span class="p">.</span><span class="nx">Time</span>

<span class="w">    </span><span class="c1">// subtreesInBlock tracks number of subtrees created in current block</span>
<span class="w">    </span><span class="nx">subtreesInBlock</span><span class="w"> </span><span class="kt">int</span>

<span class="w">    </span><span class="c1">// blockIntervals tracks recent intervals per subtree in previous blocks</span>
<span class="w">    </span><span class="nx">blockIntervals</span><span class="w"> </span><span class="p">[]</span><span class="nx">time</span><span class="p">.</span><span class="nx">Duration</span>

<span class="w">    </span><span class="c1">// maxBlockSamples is the number of block samples to keep for averaging</span>
<span class="w">    </span><span class="nx">maxBlockSamples</span><span class="w"> </span><span class="kt">int</span>

<span class="w">    </span><span class="c1">// txChan receives transaction batches for processing</span>
<span class="w">    </span><span class="nx">txChan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="o">*</span><span class="p">[]</span><span class="nx">TxIDAndFee</span>

<span class="w">    </span><span class="c1">// getSubtreesChan handles requests to retrieve current subtrees</span>
<span class="w">    </span><span class="nx">getSubtreesChan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">util</span><span class="p">.</span><span class="nx">Subtree</span>

<span class="w">    </span><span class="c1">// moveForwardBlockChan receives requests to process new blocks</span>
<span class="w">    </span><span class="nx">moveForwardBlockChan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="nx">moveBlockRequest</span>

<span class="w">    </span><span class="c1">// reorgBlockChan handles blockchain reorganization requests</span>
<span class="w">    </span><span class="nx">reorgBlockChan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="nx">reorgBlocksRequest</span>

<span class="w">    </span><span class="c1">// resetCh handles requests to reset the processor state</span>
<span class="w">    </span><span class="nx">resetCh</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="o">*</span><span class="nx">resetBlocks</span>

<span class="w">    </span><span class="c1">// removeTxCh receives transactions to be removed</span>
<span class="w">    </span><span class="nx">removeTxCh</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span>

<span class="w">    </span><span class="c1">// lengthCh receives requests for the current length of the processor</span>
<span class="w">    </span><span class="nx">lengthCh</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="kt">int</span>

<span class="w">    </span><span class="c1">// checkSubtreeProcessorCh is used to check the subtree processor state</span>
<span class="w">    </span><span class="nx">checkSubtreeProcessorCh</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="kt">error</span>

<span class="w">    </span><span class="c1">// newSubtreeChan receives notifications about new subtrees</span>
<span class="w">    </span><span class="nx">newSubtreeChan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="nx">NewSubtreeRequest</span>

<span class="w">    </span><span class="c1">// chainedSubtrees stores the ordered list of completed subtrees</span>
<span class="w">    </span><span class="nx">chainedSubtrees</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">util</span><span class="p">.</span><span class="nx">Subtree</span>

<span class="w">    </span><span class="c1">// chainedSubtreeCount tracks the number of chained subtrees atomically</span>
<span class="w">    </span><span class="nx">chainedSubtreeCount</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Int32</span>

<span class="w">    </span><span class="c1">// currentSubtree represents the subtree currently being built</span>
<span class="w">    </span><span class="nx">currentSubtree</span><span class="w"> </span><span class="o">*</span><span class="nx">util</span><span class="p">.</span><span class="nx">Subtree</span>

<span class="w">    </span><span class="c1">// currentBlockHeader stores the current block header being processed</span>
<span class="w">    </span><span class="nx">currentBlockHeader</span><span class="w"> </span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">BlockHeader</span>

<span class="w">    </span><span class="c1">// Mutex provides thread-safe access to shared resources</span>
<span class="w">    </span><span class="nx">sync</span><span class="p">.</span><span class="nx">Mutex</span>

<span class="w">    </span><span class="c1">// txCount tracks the total number of transactions processed</span>
<span class="w">    </span><span class="nx">txCount</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Uint64</span>

<span class="w">    </span><span class="c1">// batcher manages transaction batching operations</span>
<span class="w">    </span><span class="nx">batcher</span><span class="w"> </span><span class="o">*</span><span class="nx">TxIDAndFeeBatch</span>

<span class="w">    </span><span class="c1">// queue manages the transaction processing queue</span>
<span class="w">    </span><span class="nx">queue</span><span class="w"> </span><span class="o">*</span><span class="nx">LockFreeQueue</span>

<span class="w">    </span><span class="c1">// currentTxMap tracks transactions currently held in the subtree processor</span>
<span class="w">    </span><span class="nx">currentTxMap</span><span class="w"> </span><span class="o">*</span><span class="nx">util</span><span class="p">.</span><span class="nx">SyncedMap</span><span class="p">[</span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span><span class="p">,</span><span class="w"> </span><span class="nx">meta</span><span class="p">.</span><span class="nx">TxInpoints</span><span class="p">]</span>

<span class="w">    </span><span class="c1">// removeMap tracks transactions marked for removal</span>
<span class="w">    </span><span class="nx">removeMap</span><span class="w"> </span><span class="o">*</span><span class="nx">util</span><span class="p">.</span><span class="nx">SwissMap</span>

<span class="w">    </span><span class="c1">// subtreeStore manages persistent storage of transaction subtrees</span>
<span class="w">    </span><span class="nx">subtreeStore</span><span class="w"> </span><span class="nx">blob</span><span class="p">.</span><span class="nx">Store</span>

<span class="w">    </span><span class="c1">// utxoStore manages the UTXO set storage and retrieval</span>
<span class="w">    </span><span class="nx">utxoStore</span><span class="w"> </span><span class="nx">utxostore</span><span class="p">.</span><span class="nx">Store</span>

<span class="w">    </span><span class="c1">// logger provides logging functionality</span>
<span class="w">    </span><span class="nx">logger</span><span class="w"> </span><span class="nx">ulogger</span><span class="p">.</span><span class="nx">Logger</span>

<span class="w">    </span><span class="c1">// stats tracks operational statistics</span>
<span class="w">    </span><span class="nx">stats</span><span class="w"> </span><span class="o">*</span><span class="nx">gocore</span><span class="p">.</span><span class="nx">Stat</span>

<span class="w">    </span><span class="c1">// currentRunningState tracks the current operational state</span>
<span class="w">    </span><span class="nx">currentRunningState</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Value</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>SubtreeProcessor</code> type manages the processing of transactions into subtrees, handling chain reorganizations, and maintaining the current state of the block assembly process.</p>
<h3 id="lockfreequeue">LockFreeQueue</h3>
<div class="highlight"><pre><span></span><code><span class="kd">type</span><span class="w"> </span><span class="nx">LockFreeQueue</span><span class="w"> </span><span class="kd">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nx">head</span><span class="w">        </span><span class="o">*</span><span class="nx">TxIDAndFee</span>
<span class="w">    </span><span class="nx">tail</span><span class="w">        </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Pointer</span><span class="p">[</span><span class="nx">TxIDAndFee</span><span class="p">]</span>
<span class="w">    </span><span class="nx">queueLength</span><span class="w"> </span><span class="nx">atomic</span><span class="p">.</span><span class="nx">Int64</span>
<span class="p">}</span>
</code></pre></div>
<p>The <code>LockFreeQueue</code> type represents a lock-free FIFO queue for managing transactions in the block assembly process.</p>
<h2 id="functions">Functions</h2>
<h3 id="blockassembly_1">BlockAssembly</h3>
<h4 id="new">New</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">New</span><span class="p">(</span><span class="nx">logger</span><span class="w"> </span><span class="nx">ulogger</span><span class="p">.</span><span class="nx">Logger</span><span class="p">,</span><span class="w"> </span><span class="nx">tSettings</span><span class="w"> </span><span class="o">*</span><span class="nx">settings</span><span class="p">.</span><span class="nx">Settings</span><span class="p">,</span><span class="w"> </span><span class="nx">txStore</span><span class="w"> </span><span class="nx">blob</span><span class="p">.</span><span class="nx">Store</span><span class="p">,</span><span class="w"> </span><span class="nx">utxoStore</span><span class="w"> </span><span class="nx">utxostore</span><span class="p">.</span><span class="nx">Store</span><span class="p">,</span><span class="w"> </span><span class="nx">subtreeStore</span><span class="w"> </span><span class="nx">blob</span><span class="p">.</span><span class="nx">Store</span><span class="p">,</span><span class="w"> </span><span class="nx">blockchainClient</span><span class="w"> </span><span class="nx">blockchain</span><span class="p">.</span><span class="nx">ClientI</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span>
</code></pre></div>
<p>Creates a new instance of the <code>BlockAssembly</code> service with the specified dependencies and initializes Prometheus metrics.</p>
<h4 id="health">Health</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">Health</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">checkLiveness</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="p">,</span><span class="w"> </span><span class="kt">string</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Performs health checks on the block assembly service. If checkLiveness is true, only performs basic liveness checks. Otherwise, performs readiness checks on all dependencies: BlockchainClient, FSM, SubtreeStore, TxStore, and UTXOStore.</p>
<h4 id="healthgrpc">HealthGRPC</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">HealthGRPC</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">HealthResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Performs a gRPC health check on the block assembly service.</p>
<h4 id="init">Init</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">Init</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Initializes the block assembly service by creating a BlockAssembler instance, subscribing to blockchain notifications, and preparing for transaction processing.</p>
<h4 id="start">Start</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">readyCh</span><span class="w"> </span><span class="kd">chan</span><span class="o">&lt;-</span><span class="w"> </span><span class="kd">struct</span><span class="p">{})</span><span class="w"> </span><span class="p">(</span><span class="nx">err</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Starts the block assembly service, launches concurrent processing routines, and begins listening for blockchain notifications. The readyCh channel is closed once the service is ready to receive requests.</p>
<h4 id="stop">Stop</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">Stop</span><span class="p">(</span><span class="nx">_</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div>
<p>Gracefully shuts down the BlockAssembly service, stopping all processing operations.</p>
<h4 id="addtx">AddTx</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">AddTx</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">AddTxRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">AddTxResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Adds a transaction to the block assembly. This method accepts a transaction request and forwards it to the block assembler for processing.</p>
<h4 id="removetx">RemoveTx</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">RemoveTx</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">RemoveTxRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Removes a transaction from the block assembly by its hash. This prevents the transaction from being included in future blocks.</p>
<h4 id="addtxbatch">AddTxBatch</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">AddTxBatch</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">batch</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">AddTxBatchRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">AddTxBatchResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Processes a batch of transactions for block assembly. This is more efficient than adding transactions individually.</p>
<h4 id="txcount">TxCount</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">TxCount</span><span class="p">()</span><span class="w"> </span><span class="kt">uint64</span>
</code></pre></div>
<p>Returns the total number of transactions processed by the block assembly service.</p>
<h4 id="getminingcandidate">GetMiningCandidate</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">GetMiningCandidate</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">GetMiningCandidateRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">MiningCandidate</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Retrieves a candidate block for mining. This method returns a block template that miners can use to find a valid proof-of-work solution.</p>
<h4 id="submitminingsolution">SubmitMiningSolution</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">SubmitMiningSolution</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">SubmitMiningSolutionRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">OKResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Processes a mining solution submission. It validates the solution, creates a block, and adds it to the blockchain.</p>
<h4 id="subtreecount">SubtreeCount</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">SubtreeCount</span><span class="p">()</span><span class="w"> </span><span class="kt">int</span>
</code></pre></div>
<p>Returns the total number of subtrees managed by the block assembly service.</p>
<h4 id="resetblockassembly">ResetBlockAssembly</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">ResetBlockAssembly</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Resets the block assembly service to a clean state, removing all transactions and subtrees. This is useful for recovery after errors or when a full reset is needed.</p>
<h4 id="getblockassemblystate">GetBlockAssemblyState</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">GetBlockAssemblyState</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">StateMessage</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Retrieves the current operational state of the block assembly service, including transaction and subtree counts, blockchain tip information, and queue metrics. This information is valuable for monitoring, debugging, and ensuring the service is operating correctly.</p>
<h4 id="getcurrentdifficulty">GetCurrentDifficulty</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">GetCurrentDifficulty</span><span class="p">(</span><span class="nx">_</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">GetCurrentDifficultyResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Retrieves the current mining difficulty target required for valid proof-of-work. This value determines how much computational work is required to find a valid block solution.</p>
<h4 id="generateblocks">GenerateBlocks</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">GenerateBlocks</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">req</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">GenerateBlocksRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Generates the given number of blocks by mining them. This method is primarily used for testing and development environments. The operation requires the GenerateSupported flag to be enabled in chain configuration.</p>
<p>Parameters:</p>
<ul>
<li><code>req.Count</code>: Number of blocks to generate</li>
<li><code>req.Address</code>: Optional mining address</li>
</ul>
<h4 id="checkblockassembly">CheckBlockAssembly</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">CheckBlockAssembly</span><span class="p">(</span><span class="nx">_</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">OKResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Checks the block assembly state for integrity and consistency.</p>
<h4 id="getblockassemblyblockcandidate">GetBlockAssemblyBlockCandidate</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">GetBlockAssemblyBlockCandidate</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">GetBlockAssemblyBlockCandidateResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Retrieves the current block assembly block candidate, including detailed information about the candidate's construction.</p>
<h4 id="getblockassemblytxs">GetBlockAssemblyTxs</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">GetBlockAssemblyTxs</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">_</span><span class="w"> </span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">EmptyMessage</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">blockassembly_api</span><span class="p">.</span><span class="nx">GetBlockAssemblyTxsResponse</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Retrieves all transaction hashes currently held in the block assembly service. Returns both the count and list of transaction hashes for monitoring and debugging purposes.</p>
<h4 id="setskipwaitforpendingblocks">SetSkipWaitForPendingBlocks</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">ba</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembly</span><span class="p">)</span><span class="w"> </span><span class="nx">SetSkipWaitForPendingBlocks</span><span class="p">(</span><span class="nx">skip</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span>
</code></pre></div>
<p>Sets the flag to skip waiting for pending blocks during startup. This is primarily used in test environments to prevent blocking on pending blocks.</p>
<h3 id="blockassembler_1">BlockAssembler</h3>
<h4 id="newblockassembler">NewBlockAssembler</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">NewBlockAssembler</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">logger</span><span class="w"> </span><span class="nx">ulogger</span><span class="p">.</span><span class="nx">Logger</span><span class="p">,</span><span class="w"> </span><span class="nx">tSettings</span><span class="w"> </span><span class="o">*</span><span class="nx">settings</span><span class="p">.</span><span class="nx">Settings</span><span class="p">,</span><span class="w"> </span><span class="nx">stats</span><span class="w"> </span><span class="o">*</span><span class="nx">gocore</span><span class="p">.</span><span class="nx">Stat</span><span class="p">,</span><span class="w"> </span><span class="nx">utxoStore</span><span class="w"> </span><span class="nx">utxo</span><span class="p">.</span><span class="nx">Store</span><span class="p">,</span><span class="w"> </span><span class="nx">subtreeStore</span><span class="w"> </span><span class="nx">blob</span><span class="p">.</span><span class="nx">Store</span><span class="p">,</span><span class="w"> </span><span class="nx">blockchainClient</span><span class="w"> </span><span class="nx">blockchain</span><span class="p">.</span><span class="nx">ClientI</span><span class="p">,</span><span class="w"> </span><span class="nx">newSubtreeChan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="nx">subtreeprocessor</span><span class="p">.</span><span class="nx">NewSubtreeRequest</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Creates and initializes a new BlockAssembler instance with the specified dependencies.</p>
<h4 id="txcount_1">TxCount</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">TxCount</span><span class="p">()</span><span class="w"> </span><span class="kt">uint64</span>
</code></pre></div>
<p>Returns the total number of transactions in the assembler.</p>
<h4 id="queuelength">QueueLength</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">QueueLength</span><span class="p">()</span><span class="w"> </span><span class="kt">int64</span>
</code></pre></div>
<p>Returns the current length of the transaction queue.</p>
<h4 id="subtreecount_1">SubtreeCount</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">SubtreeCount</span><span class="p">()</span><span class="w"> </span><span class="kt">int</span>
</code></pre></div>
<p>Returns the total number of subtrees.</p>
<h4 id="start_1">Start</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">Start</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div>
<p>Initializes and begins the block assembler operations, setting up channel listeners and initializing the blockchain state.</p>
<h4 id="getstate">GetState</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">GetState</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">BlockHeader</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Retrieves the current state of the block assembler from the blockchain, returning the best block header and height.</p>
<h4 id="setstate">SetState</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">SetState</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div>
<p>Persists the current state of the block assembler to the blockchain.</p>
<h4 id="currentblock">CurrentBlock</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">CurrentBlock</span><span class="p">()</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">BlockHeader</span><span class="p">,</span><span class="w"> </span><span class="kt">uint32</span><span class="p">)</span>
</code></pre></div>
<p>Returns the current best block header and height.</p>
<h4 id="addtx_1">AddTx</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">AddTx</span><span class="p">(</span><span class="nx">node</span><span class="w"> </span><span class="nx">util</span><span class="p">.</span><span class="nx">SubtreeNode</span><span class="p">,</span><span class="w"> </span><span class="nx">txInpoints</span><span class="w"> </span><span class="nx">meta</span><span class="p">.</span><span class="nx">TxInpoints</span><span class="p">)</span>
</code></pre></div>
<p>Adds a transaction to the block assembler along with its input points.</p>
<h4 id="removetx_1">RemoveTx</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">RemoveTx</span><span class="p">(</span><span class="nx">hash</span><span class="w"> </span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div>
<p>Removes a transaction from the block assembler by its hash.</p>
<h4 id="reset">Reset</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">Reset</span><span class="p">()</span>
</code></pre></div>
<p>Triggers a reset of the block assembler state. This operation runs asynchronously to prevent blocking.</p>
<h4 id="getminingcandidate_1">GetMiningCandidate</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">b</span><span class="w"> </span><span class="o">*</span><span class="nx">BlockAssembler</span><span class="p">)</span><span class="w"> </span><span class="nx">GetMiningCandidate</span><span class="p">(</span><span class="nx">_</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">MiningCandidate</span><span class="p">,</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">util</span><span class="p">.</span><span class="nx">Subtree</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Retrieves a candidate block for mining along with its associated subtrees.</p>
<h3 id="subtreeprocessor_1">SubtreeProcessor</h3>
<h4 id="newsubtreeprocessor">NewSubtreeProcessor</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">NewSubtreeProcessor</span><span class="p">(</span><span class="nx">ctx</span><span class="w"> </span><span class="nx">context</span><span class="p">.</span><span class="nx">Context</span><span class="p">,</span><span class="w"> </span><span class="nx">logger</span><span class="w"> </span><span class="nx">ulogger</span><span class="p">.</span><span class="nx">Logger</span><span class="p">,</span><span class="w"> </span><span class="nx">tSettings</span><span class="w"> </span><span class="o">*</span><span class="nx">settings</span><span class="p">.</span><span class="nx">Settings</span><span class="p">,</span><span class="w"> </span><span class="nx">subtreeStore</span><span class="w"> </span><span class="nx">blob</span><span class="p">.</span><span class="nx">Store</span><span class="p">,</span><span class="w"> </span><span class="nx">blockchainClient</span><span class="w"> </span><span class="nx">blockchain</span><span class="p">.</span><span class="nx">ClientI</span><span class="p">,</span><span class="w"> </span><span class="nx">utxoStore</span><span class="w"> </span><span class="nx">utxostore</span><span class="p">.</span><span class="nx">Store</span><span class="p">,</span><span class="w"> </span><span class="nx">newSubtreeChan</span><span class="w"> </span><span class="kd">chan</span><span class="w"> </span><span class="nx">NewSubtreeRequest</span><span class="p">,</span><span class="w"> </span><span class="nx">options</span><span class="w"> </span><span class="o">...</span><span class="nx">Options</span><span class="p">)</span><span class="w"> </span><span class="p">(</span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">,</span><span class="w"> </span><span class="kt">error</span><span class="p">)</span>
</code></pre></div>
<p>Creates and initializes a new SubtreeProcessor instance with the specified dependencies. This is the core component responsible for organizing transactions into hierarchical subtrees for efficient block assembly.</p>
<h4 id="txcount_2">TxCount</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">TxCount</span><span class="p">()</span><span class="w"> </span><span class="kt">uint64</span>
</code></pre></div>
<p>Returns the total number of transactions processed by the subtree processor.</p>
<h4 id="queuelength_1">QueueLength</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">QueueLength</span><span class="p">()</span><span class="w"> </span><span class="kt">int64</span>
</code></pre></div>
<p>Returns the current length of the transaction queue in the subtree processor.</p>
<h4 id="subtreecount_2">SubtreeCount</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">SubtreeCount</span><span class="p">()</span><span class="w"> </span><span class="kt">int</span>
</code></pre></div>
<p>Returns the total number of subtrees managed by the processor. This method is primarily used for prometheus statistics.</p>
<h4 id="getcurrentrunningstate">GetCurrentRunningState</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">GetCurrentRunningState</span><span class="p">()</span><span class="w"> </span><span class="nx">State</span>
</code></pre></div>
<p>Returns the current operational state of the processor.</p>
<h4 id="getcurrentlength">GetCurrentLength</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">GetCurrentLength</span><span class="p">()</span><span class="w"> </span><span class="kt">int</span>
</code></pre></div>
<p>Returns the length of the current subtree.</p>
<h4 id="add">Add</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">Add</span><span class="p">(</span><span class="nx">node</span><span class="w"> </span><span class="nx">util</span><span class="p">.</span><span class="nx">SubtreeNode</span><span class="p">,</span><span class="w"> </span><span class="nx">txInpoints</span><span class="w"> </span><span class="nx">meta</span><span class="p">.</span><span class="nx">TxInpoints</span><span class="p">)</span>
</code></pre></div>
<p>Adds a transaction node to the processor along with its input points.</p>
<h4 id="remove">Remove</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">Remove</span><span class="p">(</span><span class="nx">hash</span><span class="w"> </span><span class="nx">chainhash</span><span class="p">.</span><span class="nx">Hash</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div>
<p>Prevents a transaction from being processed from the queue into a subtree, and removes it if already present. This can only take place before the delay time in the queue has passed.</p>
<h4 id="getcompletedsubtreesforminingcandidate">GetCompletedSubtreesForMiningCandidate</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">GetCompletedSubtreesForMiningCandidate</span><span class="p">()</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">util</span><span class="p">.</span><span class="nx">Subtree</span>
</code></pre></div>
<p>Retrieves all completed subtrees for block mining.</p>
<h4 id="moveforwardblock">MoveForwardBlock</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">MoveForwardBlock</span><span class="p">(</span><span class="nx">block</span><span class="w"> </span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">Block</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div>
<p>Updates the subtrees when a new block is found.</p>
<h4 id="reorg">Reorg</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">Reorg</span><span class="p">(</span><span class="nx">moveBackBlocks</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">Block</span><span class="p">,</span><span class="w"> </span><span class="nx">moveForwardBlocks</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">Block</span><span class="p">)</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div>
<p>Handles blockchain reorganization by processing moved blocks. This method manages the complex task of reconciling the subtree state with the new blockchain state after a reorganization.</p>
<h4 id="reset_1">Reset</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">Reset</span><span class="p">(</span><span class="nx">blockHeader</span><span class="w"> </span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">BlockHeader</span><span class="p">,</span><span class="w"> </span><span class="nx">moveBackBlocks</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">Block</span><span class="p">,</span><span class="w"> </span><span class="nx">moveForwardBlocks</span><span class="w"> </span><span class="p">[]</span><span class="o">*</span><span class="nx">model</span><span class="p">.</span><span class="nx">Block</span><span class="p">,</span><span class="w"> </span><span class="nx">isLegacySync</span><span class="w"> </span><span class="kt">bool</span><span class="p">)</span><span class="w"> </span><span class="nx">ResetResponse</span>
</code></pre></div>
<p>Resets the processor to a clean state, removing all subtrees and transactions.</p>
<h4 id="checksubtreeprocessor">CheckSubtreeProcessor</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">stp</span><span class="w"> </span><span class="o">*</span><span class="nx">SubtreeProcessor</span><span class="p">)</span><span class="w"> </span><span class="nx">CheckSubtreeProcessor</span><span class="p">()</span><span class="w"> </span><span class="kt">error</span>
</code></pre></div>
<p>Checks the integrity of the subtree processor. It verifies that all transactions in the current transaction map are present in the subtrees and that the size of the current transaction map matches the expected transaction count.</p>
<h3 id="lockfreequeue_1">LockFreeQueue</h3>
<h4 id="newlockfreequeue">NewLockFreeQueue</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="nx">NewLockFreeQueue</span><span class="p">()</span><span class="w"> </span><span class="o">*</span><span class="nx">LockFreeQueue</span>
</code></pre></div>
<p>Creates a new instance of the LockFreeQueue, which is a lock-free FIFO queue for managing transactions in the block assembly process.</p>
<h4 id="len">Len</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">q</span><span class="w"> </span><span class="o">*</span><span class="nx">LockFreeQueue</span><span class="p">)</span><span class="w"> </span><span class="nx">Len</span><span class="p">()</span><span class="w"> </span><span class="kt">int64</span>
</code></pre></div>
<p>Returns the current length of the queue.</p>
<h4 id="enqueue">Enqueue</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">q</span><span class="w"> </span><span class="o">*</span><span class="nx">LockFreeQueue</span><span class="p">)</span><span class="w"> </span><span class="nx">Enqueue</span><span class="p">(</span><span class="nx">v</span><span class="w"> </span><span class="o">*</span><span class="nx">TxIDAndFee</span><span class="p">)</span>
</code></pre></div>
<p>Adds a transaction to the queue in a thread-safe manner.</p>
<h4 id="dequeue">Dequeue</h4>
<div class="highlight"><pre><span></span><code><span class="kd">func</span><span class="w"> </span><span class="p">(</span><span class="nx">q</span><span class="w"> </span><span class="o">*</span><span class="nx">LockFreeQueue</span><span class="p">)</span><span class="w"> </span><span class="nx">Dequeue</span><span class="p">(</span><span class="nx">validFromMillis</span><span class="w"> </span><span class="kt">int64</span><span class="p">)</span><span class="w"> </span><span class="o">*</span><span class="nx">TxIDAndFee</span>
</code></pre></div>
<p>Removes and returns a transaction from the queue if its validation time has passed. This method implements the delay mechanism that allows transactions to be properly validated before being included in subtrees.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright © 2025 BSV Blockchain Org.
    </div>
  
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/bsv-blockchain/teranode" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M173.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M252.8 8C114.1 8 8 113.3 8 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C436.2 457.8 504 362.9 504 252 504 113.3 391.5 8 252.8 8M105.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../../..", "features": ["navigation.tabs", "navigation.tabs.sticky", "navigation.sections", "navigation.expand", "navigation.instant", "search.suggest", "search.highlight"], "search": "../../../assets/javascripts/workers/search.973d3a69.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../../assets/javascripts/bundle.f55a23d4.min.js"></script>
      
        <script src="../../../assets/external/unpkg.com/mermaid@11/dist/mermaid.min.js"></script>
      
    
  </body>
</html>